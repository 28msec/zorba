Iterator tree for const-folded expr:
<OrIterator>
  <SingletonIterator value="xs:boolean(true)"/>
  <SingletonIterator value="xs:boolean(false)"/>
  <SingletonIterator value="xs:boolean(false)"/>
</OrIterator>

Iterator tree for main query:
<SequentialIterator>
  <CtxVarDeclareIterator varid="2" varname="input">
    <ChildAxisIterator test kind="match_name_test" qname="*" typename="*" nill allowed="0">
      <ChildAxisIterator test kind="match_name_test" qname="*" typename="*" nill allowed="0">
        <FnDocIterator>
          <SingletonIterator value="xs:string(books.xml)"/>
        </FnDocIterator>
      </ChildAxisIterator>
    </ChildAxisIterator>
  </CtxVarDeclareIterator>
  <TreatIterator type="[NodeXQType elementNode content=[XQType ANY_TYPE_KIND*]]" quant="*">
    <CtxVarIterator varid="2" varname="input" varkind="global"/>
  </TreatIterator>
  <UDFunctionCallIterator>
    <TreatIterator quant="+">
      <CtxVarIterator varid="2" varname="input" varkind="global"/>
    </TreatIterator>
  </UDFunctionCallIterator>
</SequentialIterator>

Iterator tree for local:collapseNodesSameName:
<flwor::FLWORIterator>
  <LetVariable name="x" materialize="true">
    <LetVarIterator varname="x"/>
  </LetVariable>
  <ReturnClause>
    <SequentialIterator>
      <CtxVarDeclareIterator varid="1" varname="f">
        <LetVarIterator varname="x" targetPos="1"/>
      </CtxVarDeclareIterator>
      <CtxVarDeclareIterator varid="2" varname="n">
        <NodeNameIterator>
          <TreatIterator type="[NodeXQType anyNode content=[XQType ANY_TYPE_KIND*]]" quant="?">
            <CtxVarIterator varid="1" varname="f" varkind="local"/>
          </TreatIterator>
        </NodeNameIterator>
      </CtxVarDeclareIterator>
      <CtxVarDeclareIterator varid="3" varname="a">
        <NodeSortIterator distinct="true" ascending="true">
          <AttributeAxisIterator test kind="match_name_test" qname="*" typename="*" nill allowed="0">
            <LetVarIterator varname="x"/>
          </AttributeAxisIterator>
        </NodeSortIterator>
      </CtxVarDeclareIterator>
      <CtxVarDeclareIterator varid="4" varname="c">
        <NodeSortIterator distinct="true" ascending="true">
          <ChildAxisIterator test kind="match_name_test" qname="*" typename="*" nill allowed="0">
            <LetVarIterator varname="x"/>
          </ChildAxisIterator>
        </NodeSortIterator>
      </CtxVarDeclareIterator>
      <CtxVarDeclareIterator varid="5" varname="ca">
        <UDFunctionCallIterator>
          <TreatIterator type="[NodeXQType anyNode content=[XQType ANY_TYPE_KIND*]]" quant="*">
            <CtxVarIterator varid="3" varname="a" varkind="local"/>
          </TreatIterator>
        </UDFunctionCallIterator>
      </CtxVarDeclareIterator>
      <CtxVarDeclareIterator varid="6" varname="cc">
        <UDFunctionCallIterator>
          <TreatIterator type="[NodeXQType anyNode content=[XQType ANY_TYPE_KIND*]]" quant="*">
            <CtxVarIterator varid="4" varname="c" varkind="local"/>
          </TreatIterator>
        </UDFunctionCallIterator>
      </CtxVarDeclareIterator>
      <IfThenElseIterator>
        <InstanceOfIterator>
          <CtxVarIterator varid="1" varname="f" varkind="local"/>
        </InstanceOfIterator>
        <ElementIterator>
          <NameCastIterator>
            <FnDataIterator>
              <CtxVarIterator varid="2" varname="n" varkind="local"/>
            </FnDataIterator>
          </NameCastIterator>
          <EnclosedIterator attr_cont="false">
            <FnConcatIterator>
              <CtxVarIterator varid="5" varname="ca" varkind="local"/>
              <CtxVarIterator varid="6" varname="cc" varkind="local"/>
            </FnConcatIterator>
          </EnclosedIterator>
        </ElementIterator>
        <AttributeIterator>
          <NameCastIterator>
            <FnDataIterator>
              <CtxVarIterator varid="2" varname="n" varkind="local"/>
            </FnDataIterator>
          </NameCastIterator>
          <EnclosedIterator attr_cont="true">
            <SingletonIterator value="xs:string(a)"/>
          </EnclosedIterator>
        </AttributeIterator>
      </IfThenElseIterator>
    </SequentialIterator>
  </ReturnClause>
</flwor::FLWORIterator>

Iterator tree for local:collapseNodes:
<flwor::FLWORIterator>
  <ForVariable name="y">
    <LetVarIterator varname="x"/>
  </ForVariable>
  <LetVariable name="n" materialize="true">
    <NodeNameIterator>
      <ForVarIterator varname="y"/>
    </NodeNameIterator>
  </LetVariable>
  <GroupByClause>
    <Spec>
      <LetVarIterator varname="n"/>
      <GroupVariable/>
    </Spec>
    <Spec>
      <ForVarIterator varname="y"/>
      <NonGroupVariable/>
    </Spec>
  </GroupByClause>
  <OrderBySpec>
    <FnStringIterator>
      <ForVarIterator varname="n"/>
    </FnStringIterator>
  </OrderBySpec>
  <ReturnClause>
    <UDFunctionCallIterator>
      <TreatIterator quant="+">
        <LetVarIterator varname="y"/>
      </TreatIterator>
    </UDFunctionCallIterator>
  </ReturnClause>
</flwor::FLWORIterator>

