Iterator tree for const-folded expr:
<LogicIterator>
  <LogicIterator>
    <SingletonIterator value="xs:boolean(true)"/>
    <SingletonIterator value="xs:boolean(false)"/>
  </LogicIterator>
  <SingletonIterator value="xs:boolean(false)"/>
</LogicIterator>

Iterator tree for main query:
<FunctionTraceIterator>
  <flwor::FLWORIterator>
    <LetVariable name="e" materialize="true">
      <ChildAxisIterator test kind="match_name_test" qname="xs:QName(,,r2)" typename="*" nill allowed="0" target_position="0">
        <ElementIterator>
          <SingletonIterator value="xs:QName(,,r1)"/>
          <FnConcatIterator/>
          <FnConcatIterator>
            <ElementIterator>
              <SingletonIterator value="xs:QName(,,r2)"/>
              <FnConcatIterator/>
            </ElementIterator>
            <ElementIterator>
              <SingletonIterator value="xs:QName(,,r2)"/>
              <FnConcatIterator/>
            </ElementIterator>
          </FnConcatIterator>
        </ElementIterator>
      </ChildAxisIterator>
    </LetVariable>
    <ForVariable name="$$opt_temp_3">
      <HoistIterator>
        <TreatIterator quant="">
          <LetVarIterator varname="e"/>
        </TreatIterator>
      </HoistIterator>
    </ForVariable>
    <LetVariable name="parent" materialize="true">
      <ParentAxisIterator test kind="match_name_test" qname="*" typename="*" nill allowed="0">
        <LetVarIterator varname="e"/>
      </ParentAxisIterator>
    </LetVariable>
    <ForVariable name="$$opt_temp_2">
      <HoistIterator>
        <TreatIterator quant="">
          <LetVarIterator varname="parent"/>
        </TreatIterator>
      </HoistIterator>
    </ForVariable>
    <ReturnClause>
      <SequentialIterator>
        <CreateInternalIndexIterator name="xs:QName(,,tempIndex0)">
          <flwor::FLWORIterator>
            <ForVariable name="$$opt_temp_4">
              <UnhoistIterator>
                <HoistIterator>
                  <InScopePrefixesIterator>
                    <TreatIterator quant="">
                      <LetVarIterator varname="parent"/>
                    </TreatIterator>
                  </InScopePrefixesIterator>
                </HoistIterator>
              </UnhoistIterator>
            </ForVariable>
            <ReturnClause>
              <ValueIndexEntryBuilderIterator>
                <ForVarIterator varname="$$opt_temp_4"/>
                <ForVarIterator varname="$$opt_temp_4"/>
              </ValueIndexEntryBuilderIterator>
            </ReturnClause>
          </flwor::FLWORIterator>
        </CreateInternalIndexIterator>
        <flwor::FLWORIterator>
          <ForVariable name="prefix">
            <flwor::FLWORIterator>
              <ForVariable name="prefixE">
                <InScopePrefixesIterator>
                  <TreatIterator quant="">
                    <LetVarIterator varname="e"/>
                  </TreatIterator>
                </InScopePrefixesIterator>
              </ForVariable>
              <LetVariable name="$$opt_temp_1" materialize="true">
                <HoistIterator>
                  <NamespaceUriForPrefixIterator>
                    <ForVarIterator varname="prefixE"/>
                    <TreatIterator quant="">
                      <LetVarIterator varname="e"/>
                    </TreatIterator>
                  </NamespaceUriForPrefixIterator>
                </HoistIterator>
              </LetVariable>
              <ForVariable name="prefixP">
                <ProbeIndexPointValueIterator>
                  <SingletonIterator value="xs:QName(,,tempIndex0)"/>
                  <ForVarIterator varname="prefixE"/>
                </ProbeIndexPointValueIterator>
              </ForVariable>
              <WhereClause>
                <FnBooleanIterator>
                  <CompareIterator>
                    <UnhoistIterator>
                      <LetVarIterator varname="$$opt_temp_1"/>
                    </UnhoistIterator>
                    <NamespaceUriForPrefixIterator>
                      <ForVarIterator varname="prefixP"/>
                      <UnhoistIterator>
                        <ForVarIterator varname="$$opt_temp_2"/>
                      </UnhoistIterator>
                    </NamespaceUriForPrefixIterator>
                  </CompareIterator>
                </FnBooleanIterator>
              </WhereClause>
              <ReturnClause>
                <ForVarIterator varname="prefixE"/>
              </ReturnClause>
            </flwor::FLWORIterator>
          </ForVariable>
          <ReturnClause>
            <FnConcatIterator>
              <SingletonIterator value="xs:string( )"/>
              <ElementIterator>
                <SingletonIterator value="xs:QName(,,span)"/>
                <AttributeIterator qname="xs:QName(,,class)">
                  <SingletonIterator value="xs:string(ns)"/>
                </AttributeIterator>
                <EnclosedIterator attr_cont="false">
                  <FnConcatIterator>
                    <ConcatStrIterator>
                      <SingletonIterator value="xs:string(xmlns:)"/>
                      <ForVarIterator varname="prefix"/>
                      <SingletonIterator value="xs:string(=")"/>
                    </ConcatStrIterator>
                    <ElementIterator>
                      <SingletonIterator value="xs:QName(,,span)"/>
                      <AttributeIterator qname="xs:QName(,,class)">
                        <SingletonIterator value="xs:string(nsUri)"/>
                      </AttributeIterator>
                      <EnclosedIterator attr_cont="false">
                        <NamespaceUriForPrefixIterator>
                          <ForVarIterator varname="prefix"/>
                          <UnhoistIterator>
                            <ForVarIterator varname="$$opt_temp_3"/>
                          </UnhoistIterator>
                        </NamespaceUriForPrefixIterator>
                      </EnclosedIterator>
                    </ElementIterator>
                    <SingletonIterator value="xs:string(")"/>
                  </FnConcatIterator>
                </EnclosedIterator>
              </ElementIterator>
            </FnConcatIterator>
          </ReturnClause>
        </flwor::FLWORIterator>
      </SequentialIterator>
    </ReturnClause>
  </flwor::FLWORIterator>
</FunctionTraceIterator>

