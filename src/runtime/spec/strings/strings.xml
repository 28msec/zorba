<?xml version="1.0" encoding="UTF-8"?>

<!--
/////////////////////////////////////////////////////////////////////////////////
//                                                                             //
// 7.2 Functions to Assemble and Disassemble Strings
//                                                                             //
/////////////////////////////////////////////////////////////////////////////////
-->
<zorba:iterators xmlns:zorba="http://www.zorba-xquery.com">
    
<zorba:header>
    <zorba:include form="Quoted">runtime/base/narybase.h</zorba:include>
    <zorba:include form="Quoted">zorbautils/checked_vector.h</zorba:include>
</zorba:header>

<zorba:source/>

<zorba:codegen>
    <zorba:h>
        <zorba:include form="Quoted">common/shared_types.h</zorba:include>
        <zorba:include form="Quoted">functions/function_impl.h</zorba:include>
    </zorba:h>
    <zorba:cpp>
        <zorba:include form="Quoted">runtime/strings/StringsImpl.h</zorba:include>
        <zorba:include form="Quoted">runtime/strings/strings.h</zorba:include>
        <zorba:include form="Quoted">functions/func_strings.h</zorba:include>
    </zorba:cpp>
</zorba:codegen>
<!--
/*******************************************************************************
 * 7.2.1 fn:codepoints-to-string
********************************************************************************/
-->
<zorba:iterator
    name="CodepointsToStringIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:codepoints-to-string
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="codepoints-to-string" prefix="fn">
            <zorba:param>xs:integer*</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>

<!--
/*******************************************************************************
 * 7.3.2 fn:compare
********************************************************************************/
-->

<zorba:iterator
    name="CompareStrIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:compare
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="compare" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:integer?</zorba:output>
        </zorba:signature>
        <zorba:signature localname="compare" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:integer?</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.3.3 fn:codepoint-equal
********************************************************************************/
-->

<zorba:iterator
    name="CodepointEqualIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:codepoint-equal
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="codepoint-equal" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:boolean?</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
 *
 * 7.4 Functions on String Values
 *_______________________________________________________________________*/
-->

<!--
/*******************************************************************************
 * 7.4.1 fn:concat
********************************************************************************/
-->
<zorba:iterator
    name="ConcatStrIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:concat
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="concat" prefix="fn">
            <zorba:param>xs:anyAtomicType?</zorba:param>
            <zorba:param>true</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>



<!--
/*******************************************************************************
 * 7.4.2 fn:string-join
********************************************************************************/
-->
<zorba:iterator
    name="StringJoinIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:string-join
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="string-join" prefix="fn">
            <zorba:param>xs:string*</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.3 fn:substring
********************************************************************************/
-->
<zorba:iterator
    name="SubstringIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:substring
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="substring" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:double</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
        <zorba:signature localname="substring" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:double</zorba:param>
            <zorba:param>xs:double</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.4 fn:string-length
********************************************************************************/
-->
<zorba:iterator
    name="StringLengthIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:string-length
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="string-length" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:integer</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.5 fn:normalize-space
********************************************************************************/
-->
<zorba:iterator
    name="NormalizeSpaceIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:normalize-space
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="normalize-space" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.6 fn:normalize-unicode
********************************************************************************/
-->
<zorba:iterator
    name="NormalizeUnicodeIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:normalize-unicode
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="normalize-unicode" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>        
        <zorba:signature localname="normalize-unicode" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.7 fn:upper-case
********************************************************************************/
-->
<zorba:iterator
    name="UpperCaseIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:upper-case
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="upper-case" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.8 fn:lower-case
********************************************************************************/
-->
<zorba:iterator
    name="LowerCaseIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:lower-case
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="lower-case" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.9 fn:translate
********************************************************************************/
-->
<zorba:iterator
    name="TranslateIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:translate
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="translate" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.10 fn:encode-for-uri
********************************************************************************/
-->
<zorba:iterator
    name="EncodeForUriIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:encode-for-uri
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="encode-for-uri" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.11 fn:iri-to-uri
********************************************************************************/
-->
<zorba:iterator
    name="IriToUriIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:iri-to-uri
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="iri-to-uri" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.4.12 fn:escape-html-uri
********************************************************************************/
-->
<zorba:iterator
    name="EscapeHtmlUriIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:escape-html-uri
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="escape-html-uri" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
 *
 * 7.5 Functions Based on Substring Matching
-->

<!--
/*******************************************************************************
 * 7.5.1 fn:contains
********************************************************************************/
-->
<zorba:iterator
    name="ContainsIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:contains
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="contains" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
        <zorba:signature localname="contains" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.5.2 fn:starts-with
********************************************************************************/
-->
<zorba:iterator
    name="StartsWithIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:starts-with
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="starts-with" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
        <zorba:signature localname="starts-with" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.5.3 fn:ends-with
********************************************************************************/
-->
<zorba:iterator
    name="EndsWithIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:ends-with
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="ends-with" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
        <zorba:signature localname="ends-with" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.5.4 fn:substring-before
********************************************************************************/
-->
<zorba:iterator
    name="SubstringBeforeIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:substring-before
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="substring-before" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
        <zorba:signature localname="substring-before" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>


<!--
/*******************************************************************************
 * 7.5.5 fn:substring-after
********************************************************************************/
-->
<zorba:iterator
    name="SubstringAfterIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:substring-after
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="substring-after" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
        <zorba:signature localname="substring-after" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>

<!--
/*******************************************************************************
// 7.6.2 fn:matches
********************************************************************************/
-->
<zorba:iterator
    name="FnMatchesIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:matches
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="matches" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
        <zorba:signature localname="matches" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:boolean</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>

<!--
/*******************************************************************************
// 7.6.3 fn:replace
********************************************************************************/
-->
<zorba:iterator
    name="FnReplaceIterator"
    generateVisitor="true"
    generateAccept="true" 
    arity="nary">

    <zorba:description author="Zorba Team">
        fn:replace
    </zorba:description>
    
    <zorba:function>
        <zorba:signature localname="replace" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
        <zorba:signature localname="replace" prefix="fn">
            <zorba:param>xs:string?</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:param>xs:string</zorba:param>
            <zorba:output>xs:string</zorba:output>
        </zorba:signature>
    </zorba:function>
</zorba:iterator>

</zorba:iterators>
