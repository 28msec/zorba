<?xml version="1.0" encoding="UTF-8"?>

<!--
/////////////////////////////////////////////////////////////////////////////////
//                                                                             //
//                                                                             //
/////////////////////////////////////////////////////////////////////////////////
-->
<zorba:iterators
  xmlns:zorba="http://www.zorba-xquery.com"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.zorba-xquery.com ../runtime.xsd">
    
<zorba:source>
    <zorba:include  form="Quoted">store/api/iterator.h</zorba:include>
</zorba:source>
  
<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="FnCollectionIterator">

    <zorba:description author="Zorba Team">
      fn:collection
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="collection" prefix="fn">
        <zorba:output>node()*</zorba:output>
      </zorba:signature>

      <zorba:signature localname="collection" prefix="fn">
        <zorba:param>xs:string</zorba:param>
        <zorba:output>node()*</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:accessesDynCtx returnValue="true"/>
        <zorba:isSource returnValue="true"/>
      </zorba:methods>

    </zorba:function>

    <zorba:state generateInit="false" generateReset="false" generateDestructor="false">
      <zorba:member type="store::Iterator_t" name="theIterator"
                    brief="the current iterator"/>
      <zorba:member type="bool" name="theIteratorOpened" defaultValue="false"
                    brief="flag indicating whether theIterator was opened"/>
    </zorba:state>
  
</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaCollectionIterator" >

    <zorba:description author="Zorba Team">
      zorba:collection
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="collection" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:output>node()*</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:accessesDynCtx returnValue="true"/>
        <zorba:isSource returnValue="true"/>        
        <zorba:producesDistinctNodes returnValue="YES"/>
        <zorba:producesSortedNodes returnValue="YES"/>
      </zorba:methods>

    </zorba:function>

    <zorba:state generateInit="false" generateReset="false" generateDestructor="false">
      <zorba:member type="store::Iterator_t" name="theIterator"
                    brief="the current iterator"/>
      <zorba:member type="bool" name="theIteratorOpened" defaultValue="false"
                    brief="flag indicating whether theIterator was opened"/>
    </zorba:state>
  
</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaIndexOfIterator" >

    <zorba:description author="Zorba Team">
      zorba:index-of
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="index-of" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()</zorba:param>
        <zorba:output>xs:integer</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>


<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaCreateCollectionIterator" >

    <zorba:description author="Zorba Team">
      zorba:create-collection
    </zorba:description>

    <zorba:function> 

      <zorba:signature localname="create-collection" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:signature localname="create-collection" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()*</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaDeleteCollectionIterator" >

    <zorba:description author="Zorba Team">
      zorba:delete-collection
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="delete-collection" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaInsertNodesIterator" >

    <zorba:description author="Zorba Team">
      zorba:insert-nodes
    </zorba:description>

    <zorba:function> 

      <zorba:signature localname="insert-nodes" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()*</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>        
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaInsertNodesFirstIterator" >

    <zorba:description author="Zorba Team">
      zorba:insert-nodes-first
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="insert-nodes-first" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()*</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaInsertNodesLastIterator" >

    <zorba:description author="Zorba Team">
      zorba:insert-nodes-last
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="insert-nodes-last" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()*</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaInsertNodesBeforeIterator" >

    <zorba:description author="Zorba Team">
      zorba:insert-nodes-before
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="insert-nodes-before" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()</zorba:param>
        <zorba:param>node()*</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaInsertNodesAfterIterator" >

    <zorba:description author="Zorba Team">
      zorba:insert-nodes-after
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="insert-nodes-after" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()</zorba:param>
        <zorba:param>node()*</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaDeleteNodesIterator" >

    <zorba:description author="Zorba Team">
      zorba:delete-nodes
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="delete-nodes" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>node()*</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
        <zorba:ignoresSortedNodes/>
        <zorba:ignoresDuplicateNodes/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaDeleteNodesFirstIterator" >

    <zorba:description author="Zorba Team">
      zorba:delete-node-first
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="delete-node-first" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:signature localname="delete-nodes-first" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>xs:unsignedLong</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

<!--
/*******************************************************************************
********************************************************************************/
-->
<zorba:iterator name="ZorbaDeleteNodesLastIterator" >

    <zorba:description author="Zorba Team">
      zorba:delete-node-last
    </zorba:description>

    <zorba:function> 

      <zorba:signature localname="delete-node-last" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:signature localname="delete-nodes-last" prefix="fn-zorba-xqddf">
        <zorba:param>xs:QName</zorba:param>
        <zorba:param>xs:unsignedLong</zorba:param>
        <zorba:output>empty-sequence()</zorba:output>
      </zorba:signature>

      <zorba:methods>
        <zorba:getUpdateType returnValue="UPDATE_EXPR"/>
        <zorba:accessesDynCtx returnValue="true"/>
      </zorba:methods>

    </zorba:function>

</zorba:iterator>

</zorba:iterators>
