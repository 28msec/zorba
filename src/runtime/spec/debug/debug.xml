<?xml version="1.0" encoding="UTF-8"?>

<!--
/*******************************************************************************
* Debug iterators (trace, read-line, print)
********************************************************************************/
-->

<zorba:iterators xmlns:zorba="http://www.zorba-xquery.com">
    
<zorba:source>
    <zorba:include form="Quoted">store/api/item.h</zorba:include>
</zorba:source>
    
<!--
/*******************************************************************************
 * Debug iterators:trace
********************************************************************************/
-->

<zorba:iterator
  name="TraceIterator">

  <zorba:description author="Zorba Team">fn:trace</zorba:description>
    
  <zorba:state generateInit="true" generateReset="true">
    <zorba:member type="store::Item_t" name="theTagItem" defaultValue="NULL" brief=""/>
    <zorba:member type="uint32_t" name="theIndex" defaultValue="0" brief=""/>
    <zorba:member type="std::ostream*" name="theOS" defaultValue="0" brief=""/>
  </zorba:state>
  
  <zorba:function generateCodegen="false">
    <zorba:signature localname="trace" prefix="fn">
      <zorba:param>item()*</zorba:param>
      <zorba:param>xs:string</zorba:param>
      <zorba:output>item()*</zorba:output>
    </zorba:signature>
  </zorba:function>
  
</zorba:iterator>

<!--
/*******************************************************************************
 * Debug iterators:read-line
********************************************************************************/
-->
  
<zorba:iterator name="ReadLineIterator">
  
  <zorba:description author="Zorba Team">op-zorba:read-line</zorba:description>
  
  <zorba:function requiresDynamicContext="true">
    <zorba:signature localname="read-line" prefix="op-zorba">
      <zorba:output>xs:string</zorba:output>
    </zorba:signature>
  </zorba:function>
  
</zorba:iterator>


<!--
/*******************************************************************************
 * Debug iterators:print
********************************************************************************/
-->

<zorba:iterator name="PrintIterator">
  
  <zorba:description author="Zorba Team">op-zorba:print</zorba:description>
  
  <zorba:constructor>
    <zorba:parameter type="bool" name="aPrintToConsole" defaultValue="true"/>
  </zorba:constructor>
  
  <zorba:member type="bool" name="thePrintToConsole" />
  
  <zorba:function requiresDynamicContext="true">
    <zorba:signature localname="print" prefix="op-zorba">
      <zorba:param>item()*</zorba:param>
      <zorba:output>empty-sequence()</zorba:output>
    </zorba:signature>
  </zorba:function>
  
</zorba:iterator>
  
</zorba:iterators>
