<?xml version="1.0" encoding="utf-8"?>

<!--
/////////////////////////////////////////////////////////////////////////////////
//                                                                             //
// 14.8. Functions giving access to external information                       //
//                                                                             //
/////////////////////////////////////////////////////////////////////////////////
-->

<zorba:iterators
  xmlns:zorba="http://www.zorba-xquery.com"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.zorba-xquery.com ../runtime.xsd">

<!--
/*******************************************************************************
14.8.5 fn:uri-collection
********************************************************************************/
-->
  <zorba:iterator name="FnURICollectionIterator">
    <zorba:description author="Zorba Team">
      Returns a sequence of xs:anyURI values representing the document URIs of the 
      documents in a collection.
    </zorba:description>

    <zorba:function>

      <zorba:signature localname="uri-collection" prefix="fn">
        <zorba:output>xs:anyURI*</zorba:output>
      </zorba:signature>

      <zorba:signature localname="uri-collection" prefix="fn">
        <zorba:param>xs:string?</zorba:param>
        <zorba:output>xs:anyURI*</zorba:output>
      </zorba:signature>
      
    </zorba:function>

    <zorba:state generateInit="false" generateReset="false" generateDestructor="false">
      <zorba:member type="store::Iterator_t" name="theIterator"
                    brief="the current iterator"/>
      <zorba:member type="bool" name="theIteratorOpened" defaultValue="false"
                    brief="flag indicating whether theIterator was opened"/>
    </zorba:state>
    
  </zorba:iterator>
  
<!--
/*******************************************************************************
14.8.5 fn:unparsed-text
********************************************************************************/
-->

  <zorba:iterator name="FnUnparsedTextIterator">
    <zorba:description author="Zorba Team">
      Summary: The fn:unparsed-text function reads an external resource (for 
      example, a file) and returns its contents as a string.
    </zorba:description>
    
    <zorba:function>
      
      <zorba:signature localname="unparsed-text" prefix="fn">
        <zorba:param>xs:string?</zorba:param>
        <zorba:output>xs:string?</zorba:output>
      </zorba:signature>
      
      <zorba:signature localname="unparsed-text" prefix="fn">
        <zorba:param>xs:string?</zorba:param>
        <zorba:param>xs:string</zorba:param>
        <zorba:output>xs:string?</zorba:output>
      </zorba:signature>
      
    </zorba:function>
    
  </zorba:iterator>

<!--
/*******************************************************************************
14.8.5 fn:unparsed-text
********************************************************************************/
-->

  <zorba:iterator name="FnUnparsedTextAvailableIterator">
    <zorba:description author="Zorba Team">
      Because errors in evaluating the fn:unparsed-text function are 
      non-recoverable, these two functions are provided to allow an application 
      to determine whether a call with particular arguments would succeed.
    </zorba:description>
     
    <zorba:function>
      
      <zorba:signature localname="unparsed-text-available" prefix="fn">
        <zorba:param>xs:string?</zorba:param>
        <zorba:output>xs:string?</zorba:output>
      </zorba:signature>
      
      <zorba:signature localname="unparsed-text-available" prefix="fn">
        <zorba:param>xs:string?</zorba:param>
        <zorba:param>xs:string</zorba:param>
        <zorba:output>xs:string?</zorba:output>
      </zorba:signature>
     
    </zorba:function>
    
  </zorba:iterator> 

<!--
/*******************************************************************************
  14.8.9 fn:available-environment-variables
********************************************************************************/
-->

  <zorba:iterator name="FnAvailableEnvironmentVariablesIterator">
    <zorba:description author="Zorba Team">
      Summary: returns a list of environment variable names that are suitable for 
      passing to fn:environment-variable, as a (possible empty) sequence of 
      strings.
      
      The function returns a sequence of strings, being the names of the environment 
      variables in the dynamic context in some implementation-defined order.
    </zorba:description>

    <zorba:function>
        <zorba:signature localname="available-environment-variables" prefix="fn">
        <zorba:output>xs:string*</zorba:output>
      </zorba:signature>
      
    </zorba:function>

    <zorba:state generateInit="false" generateReset="false">
      <zorba:member type="store::Iterator_t" name="theIterator"
                    brief="the current iterator"/>
    </zorba:state>
    
  </zorba:iterator>
  
<!--
/*******************************************************************************
14.8.9 fn:available-environment-variables
********************************************************************************/
-->

  <zorba:iterator name="FnEnvironmentVariableIterator">
    <zorba:description author="Zorba Team">
      Summary: Returns the value of a system environment variable, if it exists.

      If there is no environment variable with a matching name, the function returns 
      the empty sequence.
    </zorba:description>

    <zorba:function>
      <zorba:signature localname="environment-variable" prefix="fn">
        <zorba:param>xs:string</zorba:param>
        <zorba:output>xs:string?</zorba:output>
      </zorba:signature>

    </zorba:function>
    
  </zorba:iterator>

</zorba:iterators>
