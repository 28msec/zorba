INCLUDE(../cmake_modules/AddSrcSubfolder.cmake)

SET(ZORBA_SRCS)

ADD_SRC_SUBFOLDER(ZORBA_SRCS api API_SRCS )
ADD_SRC_SUBFOLDER(ZORBA_SRCS compiler COMPILER_SRCS)

FOREACH (SRCS ${COMPILER_BUILD_SRCS})
    LIST(APPEND ZORBA_SRCS ${SRCS})
ENDFOREACH (SRCS)

ADD_SRC_SUBFOLDER(ZORBA_SRCS system SYSTEM_SRCS)
ADD_SRC_SUBFOLDER(ZORBA_SRCS context CONTEXT_SRCS)
ADD_SRC_SUBFOLDER(ZORBA_SRCS errors	ERRORS_SRCS)
ADD_SRC_SUBFOLDER(ZORBA_SRCS functions FUNCTIONS_SRCS)
ADD_SRC_SUBFOLDER(ZORBA_SRCS runtime RUNTIME_SRCS)
ADD_SRC_SUBFOLDER(ZORBA_SRCS store STORE_SRCS)
ADD_SRC_SUBFOLDER(ZORBA_SRCS types TYPES_SRCS)
ADD_SRC_SUBFOLDER(ZORBA_SRCS util UTIL_SRCS)


IF (MSVC)
	ADD_LIBRARY(zorba ${ZORBA_SRCS})
	ADD_LIBRARY(zorba_static ${ZORBA_SRCS})
ELSE (MSVC)
	ADD_LIBRARY(zorba SHARED ${ZORBA_SRCS})
	ADD_LIBRARY(zorba_static STATIC ${ZORBA_SRCS})
ENDIF (MSVC)

TARGET_LINK_LIBRARIES(zorba ${requiredlibs})
TARGET_LINK_LIBRARIES(zorba_static ${requiredlibs})
