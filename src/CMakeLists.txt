SET(ZORBA_SRCS)

INCLUDE (api/CMakeLists.txt)
FOREACH (SRCS ${API_SRCS})
    LIST(APPEND ZORBA_SRCS api/${SRCS})
ENDFOREACH (SRCS)

INCLUDE (compiler/CMakeLists.txt)
FOREACH (SRCS ${COMPILER_SRCS})
    LIST(APPEND ZORBA_SRCS compiler/${SRCS})
ENDFOREACH (SRCS)

FOREACH (SRCS ${COMPILER_BUILD_SRCS})
    LIST(APPEND ZORBA_SRCS ${SRCS})
ENDFOREACH (SRCS)


INCLUDE (context/CMakeLists.txt)
FOREACH (SRCS ${CONTEXT_SRCS})
    LIST(APPEND ZORBA_SRCS context/${SRCS})
ENDFOREACH (SRCS)


INCLUDE (errors/CMakeLists.txt)
FOREACH (SRCS ${ERRORS_SRCS})
    LIST(APPEND ZORBA_SRCS errors/${SRCS})
ENDFOREACH (SRCS)


INCLUDE (functions/CMakeLists.txt)
FOREACH (SRCS ${FUNCTIONS_SRCS})
    LIST(APPEND ZORBA_SRCS functions/${SRCS})
ENDFOREACH (SRCS)


INCLUDE (runtime/CMakeLists.txt)
FOREACH (SRCS ${RUNTIME_SRCS})
    LIST(APPEND ZORBA_SRCS runtime/${SRCS})
ENDFOREACH (SRCS)


INCLUDE (store/CMakeLists.txt)
FOREACH (SRCS ${STORE_SRCS})
    LIST(APPEND ZORBA_SRCS store/${SRCS})
ENDFOREACH (SRCS)


INCLUDE (types/CMakeLists.txt)
FOREACH (SRCS ${TYPES_SRCS})
    LIST(APPEND ZORBA_SRCS types/${SRCS})
ENDFOREACH (SRCS)

INCLUDE (util/CMakeLists.txt)
FOREACH (SRCS ${UTIL_SRCS})
    LIST(APPEND ZORBA_SRCS util/${SRCS})
ENDFOREACH (SRCS)


IF (MSVC)
	ADD_LIBRARY(zorba ${ZORBA_SRCS})
ELSE (MSVC)
	ADD_LIBRARY(zorba SHARED ${ZORBA_SRCS})
ENDIF (MSVC)


TARGET_LINK_LIBRARIES(zorba ${ICU_LIBRARIES} ${ICU_I18N_LIBRARIES} ${ICU_DATA_LIBRARIES})
