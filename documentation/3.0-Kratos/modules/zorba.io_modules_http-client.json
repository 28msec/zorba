{ "ns" : "http://zorba.io/modules/http-client", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This module provides functions for performing HTTP requests.\n </p>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">A simple GET request using the get#1 convenience function</h2>\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\">\n import module namespace http=\"http://zorba.io/modules/http-client\";\n http:get(\"http://www.example.com\")\n </pre>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This example makes a GET request to example.com and returns the server's response\n as a JSON object.\n </p>\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"java\">\n {\n   \"status\" : 200,\n   \"message\" : \"OK\",\n   \"headers\" : {\n     \"Content-Length\" : \"1270\",\n     \"Date\" : \"Tue, 11 Jun 2013 22:27:10 GMT\",\n     ...\n   },\n   \"body\" : {\n     \"media-type\" : \"text/html\",\n     \"content\" : \"...\"\n   }\n }\n </pre>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" id=\"standard_return\">Response format</h2>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Most functions in this module (all except <a href=\"?anchor=options-1\">options#1</a>)\n return a single JSON item, describing the server's response, as in the previous\n example.\n The server status (integer) and message (string) fields are always present.\n If the server replied sending one or more headers, they are reported\n in an optional headers object. Each header is represented as a single (string)\n field.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For non-multipart responses, as in the previous example, the response body,\n if any, is reported as a body object. This object contains both the (string)\n media-type returned by the server and its content.\n The type of the content field is determined by the media-type returned by the\n server. If the media-type indicates that the body content is textual,\n then the content has type string, base64Binary otherwise.\n Specifically, the body content is considered textual only if the MIME-type specified in\n the media-type is one of:\n <ul>\n   <li>\"application/json\"</li>\n   <li>\"application/x-javascript\"</li>\n   <li>\"application/xml\"</li>\n   <li>\"application/xml-external-parsed-entity\"</li>\n </ul>\n or if the MIME-type starts with \"text/\" or ends with \"+xml\".</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For multipart responses, multiple bodies are returned, as in the following example: </p>\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"java\">\n {\n   \"status\" : 200,\n   \"message\" : \"OK\",\n   \"headers\" : {\n     \"Date\" : \"Tue, 11 Jun 2013 22:34:13 GMT\",\n     ...\n   },\n   \"multipart\" : {\n     \"boundary\": \"--AaB03x\",\n     \"parts\": [\n       {\n         \"headers\" : {\n            \"Content Disposition: file\",\n            ...\n         },\n         \"body\": {\n           \"media-type\" : \"image/gif\",\n           \"content\" : \"...\"\n         }\n       },\n       {\n         \"body\" : {\n           \"media-type\" : \"text/html\",\n           \"content\" : \"...\"\n         }\n       }\n    ]\n }\n </pre>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The multipart field contains both the boundary used to separate parts\n and an array containing all parts. Each part contains its specific headers,\n if any, and the corresponding body.</p>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" id=\"nondeterministic_warning\">Important Notice Regarding Nondeterministic Functions</h2>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n The following functions in this module -\n <a href=\"?anchor=get-1\">get#1</a>,\n <a href=\"?anchor=get-text-1\">get-text#1</a>,\n <a href=\"?anchor=get-binary-1\">get-binary#1</a>,\n <a href=\"?anchor=send-nondeterministic-request-1\">send-nondeterministic-request-1</a>,\n <a href=\"?anchor=head-1\">head#1</a>, and\n <a href=\"?anchor=options-1\">options#1</a>\n are declared to be <i>nondeterministic</i>, which means that their results\n will not be cached.\n However, they are <b>not</b> declared to be\n <i>sequential</i>, which means that they may be re-ordered during query optimization.\n According to the HTTP RFC, GET, HEAD an OPTIONS requests should not have any side-effects.\n However, in practice it is not uncommon, especially for GET requests, to have side-effects.\n If your application depends on the ordering of side-effects from requests issued through\n these functions, you should either use the <a href=\"?anchor=send-request-3\">send-request()</a>\n function (which is declared <i>sequential</i>), or alternatively\n wrap each call to get() in your own sequential function, to ensure\n that the requests are not reordered.\n </p>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" id=\"url_string\">$href Arguments to Functions</h2>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Several functions in this module accept a URL argument named $href. In\n all cases, the value passed to $href must be a valid anyURI.\n However, all functions declare $href to be of type string. This\n is for convenience, since you can pass a string literal value (that\n is, a URL in double-quotes spelled out explicitly in your query)\n to an string parameter.</p>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" id=\"expath_relation\">Relation to the EXPath http-client module</h2>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"><a href=\"http://expath.org/\">EXPath</a> defines its own http-client\n module, which is available separately.\n There are two primary differences between EXPath's http-client and\n this module:\n <ol>\n   <li>EXPath defines only the send-request() function, although it\n does include convenient 1- and 2-argument forms in addition to the\n full 3-argument form. EXPath does not include the simpler get(),\n post(), put(), delete(), head(), and options() functions defined by\n this module.</li>\n <li>EXPath uses XML to represent request for its send-request() function,\n whereas this module uses JSON.</li>\n <li>EXPath specifies that all XML content returned by an HTTP server\n will be parsed and returned as an XML document, whereas all HTML content\n will be <i>tidied up</i> into valid XML, and then parsed into an element.\n This module returns any textual content as string and any binary content\n as base6Binary.</li>\n <li>EXPath accepts XML nodes as body in the send-request() function and\n automatically serializes them into a string. The send-request() function\n defined in this module only allows string, base64Binary, and hexBinary\n as body types.\n </li>\n </ol>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n See <a href=\"http://www.expath.org/spec/http-client\">the full spec\n of the EXPath http-client module</a> for more information.\n </p>\n", "sees" : [ "<xqdoc:see xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"><a href=\"http://www.w3.org/TR/xquery-11/#FunctionDeclns\">XQuery 1.1: Function Declaration</a></xqdoc:see>" ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Federico Cavalieri</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/annotations", "prefix" : "an" }, { "uri" : "http://www.w3.org/2005/xqt-errors", "prefix" : "err" }, { "uri" : "http://zorba.io/modules/http-client", "prefix" : "http" }, { "uri" : "http://jsoniq.org/function-library", "prefix" : "libjn" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "arity" : 1, "name" : "delete", "qname" : "http:delete", "signature" : "($href as string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes an HTTP DELETE request to a given URL.\n </p>\n", "summary" : "<p>  \n This function makes an HTTP DELETE request to a given URL.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified request is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 1, "name" : "get-binary", "qname" : "http:get-binary", "signature" : "($href as string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes a GET request on a given URL. All returned bodies\n are forced to be interpreted as binary data, and will be returned\n as base64Binary items.\n </p>\n", "summary" : "<p>  \n This function makes a GET request on a given URL.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified href is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 1, "name" : "get-text", "qname" : "http:get-text", "signature" : "($href as string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes a GET request to a given URL. All returned bodies\n are forced to be interpreted as textual, with a UTF-8 charset and will\n be returned as string items.\n </p>\n", "summary" : "<p>  \n This function makes a GET request to a given URL.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified href is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 1, "name" : "get", "qname" : "http:get", "signature" : "($href as string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes a GET request to a given URL.\n </p>\n", "summary" : "<p>  \n This function makes a GET request to a given URL.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified href is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 1, "name" : "head", "qname" : "http:head", "signature" : "($href as string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes an HTTP HEAD request on a given URL.\n </p>\n", "summary" : "<p>  \n This function makes an HTTP HEAD request on a given URL.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified href is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 1, "name" : "options", "qname" : "http:options", "signature" : "($href as string) as string*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes an HTTP OPTIONS request, which asks the server\n which operations it supports.\n </p>\n", "summary" : "<p>  \n This function makes an HTTP OPTIONS request, which asks the server\n which operations it supports.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" } ], "returns" : { "type" : "string*", "description" : "A sequence of string values of the allowed operations." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified href is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 2, "name" : "post", "qname" : "http:post", "signature" : "($href as string, $body as atomic) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes an HTTP POST request to a given URL.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n The body passed to this function must be either a string, a base64Binary, or an\n hexBinary.\n If it is a string, the Content-Type sent to the server will be \"text/plain\",\n \"application/octet-stream\" otherwise.\n </p>\n", "summary" : "<p>  \n This function makes an HTTP POST request to a given URL.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" }, { "name" : "body", "type" : "atomic", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The body which will be sent to the server.</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified request is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 3, "name" : "post", "qname" : "http:post", "signature" : "($href as string, $body as atomic, $content-type as string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes an HTTP POST request to a given URL.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n The body passed to this function must be either a string, a base64Binary,\n or an hexBinary.\n In any case, Content-Type of the request sent to the server will\n be $content-type.\n </p>\n", "summary" : "<p>  \n This function makes an HTTP POST request to a given URL.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" }, { "name" : "body", "type" : "atomic", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The body which will be sent to the server</div>" }, { "name" : "content-type", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The content type of the body as described above.</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified request is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:CHARSET The specified charset is unsupported.</xqdoc:error>" ] }, { "arity" : 2, "name" : "put", "qname" : "http:put", "signature" : "($href as string, $body as atomic) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes an HTTP PUT request to a given URL.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n The body passed to this function must be either a string, a base64Binary or\n an hexBinary.\n If it is a string, the Content-Type sent to the server will be \"text/plain\",\n \"application/octet-stream\" otherwise.\n </p>\n", "summary" : "<p>  \n This function makes an HTTP PUT request to a given URL.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" }, { "name" : "body", "type" : "atomic", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The body which will be sent to the server.</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified request is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>" ] }, { "arity" : 3, "name" : "put", "qname" : "http:put", "signature" : "($href as string, $body as atomic, $content-type as string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function makes an HTTP PUT request to a given URL.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n The body passed to this function must be either a string, a base64Binary, or\n an hexBinary.\n In any case, Content-Type of the request sent to the server will\n be $content-type.\n </p>\n", "summary" : "<p>  \n This function makes an HTTP PUT request to a given URL.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "href", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The URL to which the request will be made (see <a href=\"#url_string\">note</a> above).</div>" }, { "name" : "body", "type" : "atomic", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The body which will be sent to the server.</div>" }, { "name" : "content-type", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The content type of $body to send to the server.</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified request is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:CHARSET The specified charset is unsupported.</xqdoc:error>" ] }, { "arity" : 1, "name" : "send-nondeterministic-request", "qname" : "http:send-nondeterministic-request", "signature" : "($request as object()) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function sends an HTTP request and returns the corresponding response.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function has the same semantics of <a href=\"#send-request-1\">send-request-1</a>,\n but is declared as nondeterministic and thus should only be used when\n the request has no side-effects.\n </p>\n", "summary" : "<p>  \n This function sends an HTTP request and returns the corresponding response.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "request", "type" : "object()", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> see request parameter of <a href=\"#send-request-1\">send-request#1</a></div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified request is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:FOLLOW Cannot follow a redirect of a POST, PUT, or DELETE request.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:CHARSET The specified charset is unsupported.</xqdoc:error>" ] }, { "arity" : 1, "name" : "send-request", "qname" : "http:send-request", "signature" : "($request as object()) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function sends an HTTP request and returns the corresponding response.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n This function is declared as sequential and should be used whenever the\n request may have side-effects.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n The request parameters are specified in the $request JSON object, which\n has the following minimal structure:\n <pre class=\"ace-static\" ace-mode=\"java\">\n   {\n     \"href\": \"http://www.example.com\"\n   }\n </pre>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This object specifies a GET request of the URI \"http://www.example.com\"</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Additional optional parameters can be specified when issuing a request,\n using the following structure:</p>\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"java\">\n  {\n    \"method\": \"POST\",\n    \"href\": \"http://www.example.com\",\n    \"authentication\":\n    {\n      \"username\" : \"user\",\n      \"password\" : \"pass\",\n      \"auth-method\" : \"Basic\"\n    },\n    \"options\":\n    {\n      \"status-only\": true,\n      \"override-media-type\": \"text/plain\",\n      \"follow-redirect\": false,\n      \"timeout\": 30,\n      \"user-agent\": \"Mozilla/5.0\"\n    },\n    \"headers\":\n    {\n      \"name\": \"value\",\n      ...\n    },\n    \"body\":\n    {\n      \"media-type\": \"text/plain\",\n      \"content\": \"...\"\n    }\n  }\n</pre>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n The method field (string) defines the HTTP verb to use in the HTTP request (i.e., GET, HEAD, OPTIONS,\n POST, PUT, DELETE). If not specified GET will be used.\n The authentication field can be used to specify the credentials and authentication method\n used when issuing a request (e.g, Basic). If the authentication field is specified, all its (string)\n subfields must be specified. If an authentication object is provided, it overrides any\n Authorization header specified in the request.\n Additionally, the following options can be specified:\n <ul>\n    <li>status-only. If true, the response body contents are omitted from the response object.</li>\n    <li>override-media-type. Is a MIME type that will override the Content-Type header returned\n        by the server. It affects the type of the result body content.</li>\n    <li>follow-redirect. Control whether an http redirect is automatically followed or not. If\n        it is false, the http redirect is returned as the response. If it is\n        true (the default) the function tries to follow the redirect, by\n        sending the same request to the new address (including body, headers,\n         and authentication credentials.) Maximum one redirect is followed\n        (there is no attempt to follow a redirect in response to following a\n          first redirect).</li>\n    <li>timeout. Is the maximum number of seconds to wait for the server to respond.\n         If no response is received withing this time duration, an error is thrown.</li>\n    <li>user-agent. The user agent sent to the server when issuing the request.\n        If not specified libcurl-agent/1.0 is used.</li>\n </ul>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">One or more headers can be sent to the server, specifying them in an optional headers object.\n Each header is represented as a single (string) field. These headers are overridden if the corresponding\n option/authentication has been specified in the request.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For non-multipart request a body object can be specified.\n This object must contain both the desired (string) media-type and its content.\n The type of the content field must be either string, base64Binary, or hexBinary. </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For multipart requests, multipart object can be specified in place of the body object.\n The multipart object has the following structure: </p>\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"java\">\n  \"multipart\" : {\n    \"boundary\": \"--AaB03x\",\n    \"parts\": [\n      {\n        \"headers\" : {\n           \"Content Disposition: file\",\n           ...\n        },\n        \"body\": {\n          \"media-type\" : \"image/gif\",\n          \"content\" : \"...\"\n        }\n      },\n      {\n        \"body\" : {\n          \"media-type\" : \"text/html\",\n          \"content\" : \"...\"\n        }\n      }\n   ]\n }\n </pre>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The multipart field contains an optional (string) field which specifies\n the boundary used to separate each part and an array containing all parts.\n Each part contains its specific headers, if any, and the corresponding body.\n </p>\n", "summary" : "<p>  \n This function sends an HTTP request and returns the corresponding response.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "request", "type" : "object()", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a JSON http-client request object</div>" } ], "returns" : { "type" : "object()", "description" : "<a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#standard_return\">standard http-client return type</a>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:HTTP An HTTP error occurred.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:REQUEST The specified request is not valid.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:TIMEOUT A timeout occurred waiting for the response.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:FOLLOW Cannot follow a redirect of a POST, PUT, or DELETE request.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http:CHARSET The specified charset is unsupported.</xqdoc:error>" ] } ], "variables" : [  ] }