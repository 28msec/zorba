{ "ns" : "http://zorba.io/modules/json-csv", "description" : " This module provides an API for parsing and serializing CSV (comma-separated\n values) files.\n See RFC 4180,\n \"Common Format and MIME Type for Comma-Separated Values (CSV) Files.\"\n", "sees" : [  ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Paul J. Lucas</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/modules/json-csv", "prefix" : "csv" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "arity" : 1, "name" : "parse", "qname" : "csv:parse", "signature" : "($csv as string) as object()*", "description" : " Parses a CSV (comma-separated values) string using the default options.\n A newline (U+000A), optionally preceeded by a carriage-return (U+000D),\n terminates lines, aka, \"records.\"\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n Quoted values are always considered strings;\n unquoted values are attempted to be cast to other types, e.g., integer\n (unless the <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">cast-unquoted-values</code> option is <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">false</code>).\n Casting is attempted in the following order:\n integer, decimal, double, and boolean.\n If casting fails, the value is considered a string.\n Header field names are always considered strings even if unquoted.\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n In addition to the \"normal\" values of\n <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">true</code> and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">false</code> for boolean,\n <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">T</code> and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Y</code> are also considered \"true\"\n and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">F</code> and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">N</code> are also considered \"false.\"\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n The default options are:\n  <dl xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n    <dt><code>cast-unquoted-values</code></dt>\n      <dd>\n        Whether to attempt to cast unquoted values to\n        integer, decimal, double, or boolean;\n        default: <code>true</code>.\n      </dd>\n    <dt><code>extra-name</code></dt>\n      <dd>\n        The field name for extra values, if any;\n        default: none (error <code>csv:EXTRA_VALUE</code> is raised).\n      </dd>\n    <dt><code>field-names</code></dt>\n      <dd>\n        A JSON array of strings denoting field names;\n        default: none.\n        The first CSV line is assumed to be a header line\n        and the field names are taken from this line.\n      </dd>\n    <dt><code>missing-value</code></dt>\n      <dd>\n        What should happen when a missing value is detected;\n        default: <code>\"null\"</code>.\n        A \"missing\" value is one of:\n        <ul>\n          <li>Two consecutive <code>quote-char</code> characters.</li>\n          <li>A <code>quote-char</code> character as either the first\n              or last character on a line.</li>\n          <li>Fewer values than the number of field names.</li>\n        </ul>\n        When a missing value is detected,\n        the value is set to <code>null</code>.\n      </dd>\n    <dt><code>quote-char</code></dt>\n      <dd>\n        The single ASCII character that may be used to quote values;\n        default: <code>\"</code> (U+0022).\n      </dd>\n    <dt><code>quote-escape</code></dt>\n      <dd>\n        The single ASCII character used to escape <code>quote-char</code>;\n        default: same as <code>quote-char</code>.\n        This means that an escaped quote is doubled as <code>\"\"</code>.\n      </dd>\n    <dt><code>separator</code></dt>\n      <dd>\n        The single ASCII character used to separate values;\n        default: <code>,</code> (U+002C).\n      </dd>\n  </dl>\n", "summary" : "<p> Parses a CSV (comma-separated values) string using the default options.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "csv", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The CSV string to parse.</div>" } ], "returns" : { "type" : "object()*", "description" : "a sequence of zero or more JSON objects where each key is a field name and each value is a parsed value." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">csv:EXTRA_VALUE if an extra value is detected.</xqdoc:error>" ] }, { "arity" : 2, "name" : "parse", "qname" : "csv:parse", "signature" : "($csv as string, $options as object()) as object()* external", "description" : " Parses a CSV (comma-separated values) string using the given options.\n A newline (U+000A), optionally preceeded by a carriage-return (U+000D),\n terminates lines, aka, \"records.\"\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n Quoted values are always considered strings;\n unquoted values are attempted to be cast to other types, e.g., integer\n (unless the <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">cast-unquoted-values</code> option is <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">false</code>).\n Casting is attempted in the following order:\n integer, decimal, double, and boolean.\n If casting fails, the value is considered a string.\n Header field names are always considered strings even if unquoted.\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n In addition to the \"normal\" values of\n <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">true</code> and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">false</code> for boolean,\n <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">T</code> and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Y</code> are also considered \"true\"\n and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">F</code> and <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">N</code> are also considered \"false.\"\n", "summary" : "<p> Parses a CSV (comma-separated values) string using the given options.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "csv", "type" : "string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The CSV string to parse.</div>" }, { "name" : "options", "type" : "object()", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The options to use: <dl> <dt><code>cast-unquoted-values</code></dt> <dd> Whether to attempt to cast unquoted values to integer, decimal, double, or boolean; default: <code>true</code>. </dd> <dt><code>extra-name</code></dt> <dd> The field name for extra values, if any; default: none (error <code>csv:EXTRA_VALUE</code> is raised). If this option is given and a line contains one or more extra values (that is, values that have no corresponding field names), then the extra values are assigned as the values for fields having <code>extra-name</code> as their names. <p/> If <code>extra-name</code> contains a <code>#</code> (U+0023), then the <code>#</code> is substituted with the field number (where field numbers start at 1). If <code>extra-name</code> does not contains a <code>#</code>, then the field number is appended. </dd> <dt><code>field-names</code></dt> <dd> A JSON array of strings denoting field names; default: none. If this option is given, then the first CSV line is assumed not to be a header line; if omitted, then the first CSV line is assumed to be a header line and the field names are taken from this line. </dd> <dt><code>missing-value</code></dt> <dd> What should happen when a missing value is detected; default: <code>\"null\"</code>. A \"missing\" value is one of: <ul> <li>Two consecutive <code>separator</code> characters.</li> <li>A <code>separator</code> character as either the first or last character on a line.</li> <li>Fewer values than the number of field names.</li> </ul> When a missing value is detected, the value of this option determines what happens: <dl> <dt><code>\"error\"</code></dt> <dd>Error <code>csv:MISSING_VALUE</code> is raised.</dd> <dt><code>\"omit\"</code></dt> <dd>Both the value and its key are omitted from the result object.</dd> <dt><code>\"null\"</code></dt> <dd>The value is set to <code>null</code>.</dd> </dl> </dd> <dt><code>quote-char</code></dt> <dd> The single ASCII character that may be used to quote values; default: <code>\"</code> (U+0022). </dd> <dt><code>quote-escape</code></dt> <dd> The single ASCII character used to escape <code>quote-char</code>; default: same as <code>quote-char</code>. If <code>quote-escape</code> equals <code>quote-char</code>, it means that <code>quote-char</code> must be doubled to escape it. If <code>quote-escape</code> does not equal <code>quote-char</code>, it means that <code>quote-escape</code> is used to escape <code>quote-char</code>. For example, a <code>quote-char</code> of <code>\"</code> (U+0022) and a <code>quote-escape</code> of <code>\\</code> (U+005C) means that quotes will be escaped by <code>\\\"</code>. </dd> <dt><code>separator</code></dt> <dd> The single ASCII character used to separate values; default: <code>,</code> (U+002C). </dd> </dl></div>" } ], "returns" : { "type" : "object()*", "description" : "a sequence of zero or more JSON objects where each key is a field name and each value is a parsed value." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">csv:INVALID_OPTION if the <code>quote-char</code>, <code>quote-escape</code>, or <code>separator</code> option is given and it's not a single ASCII character.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">csv:MISSING_VALUE if a missing value is detected and the <code>missing-value</code> option is \"<code>error</code>\".</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">csv:EXTRA_VALUE if an extra value is detected and the <code>extra-name</code> option is not set.</xqdoc:error>" ] }, { "arity" : 1, "name" : "serialize", "qname" : "csv:serialize", "signature" : "($obj as object()*) as string*", "description" : " Serializes a sequence of JSON objects as CSV (comma-separated values) using\n the default options.\n The default options are:\n  <dl xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n    <dt><code>field-names</code></dt>\n      <dd>\n        A JSON array of strings denoting field names;\n        default: none.\n        The field names are taken from the first JSON object\n        and the order of the fields is implementation dependent.\n      </dd>\n    <dt><code>serialize-boolean-as</code></dt>\n      <dd>\n        What strings to serialize <code>true</code> and <code>false</code> as;\n        default: <code>true</code> and <code>false</code>.\n      </dd>\n    <dt><code>serialize-header</code></dt>\n      <dd>\n        Whether a header line is included;\n        default: <code>true</code>.\n        The first string result is the header line\n        comprised of all the objects' keys' names.\n      </dd>\n    <dt><code>serialize-null-as</code></dt>\n      <dd>\n        What string to serialize JSON <code>null</code> values as;\n        default: <code>null</code>.\n      </dd>\n    <dt><code>quote-char</code></dt>\n      <dd>\n        The single ASCII character that may be used to quote values;\n        default: <code>\"</code> (U+0022).\n      </dd>\n    <dt><code>quote-escape</code></dt>\n      <dd>\n        The single ASCII character used to escape <code>quote-char</code>;\n        default: same as <code>quote-char</code>.\n        This means that <code>quote-char</code> is doubled to escape it.\n      </dd>\n    <dt><code>separator</code></dt>\n      <dd>\n        The single ASCII character used to separate values;\n        default: <code>,</code> (U+002C).\n      </dd>\n  </dl>\n", "summary" : "<p> Serializes a sequence of JSON objects as CSV (comma-separated values) using\n the default options.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "obj", "type" : "object()", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The sequence of JSON objects to serialize.</div>" } ], "returns" : { "type" : "string*", "description" : "a sequence of strings where each string corresponds to a JSON object, aka, \"record.\"" }, "errors" : [  ] }, { "arity" : 2, "name" : "serialize", "qname" : "csv:serialize", "signature" : "($obj as object()*, $options as object()) as string* external", "description" : " Serializes a sequence of JSON objects as CSV (comma-separated values) using\n the given options.\n", "summary" : "<p> Serializes a sequence of JSON objects as CSV (comma-separated values) using\n the given options.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "obj", "type" : "object()", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The sequence of JSON objects to serialize.</div>" }, { "name" : "options", "type" : "object()", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The options to use: <dl> <dt><code>field-names</code></dt> <dd> A JSON array of strings denoting field names; default: none. If this option is not set, the field names are taken from the first JSON object and the order of the fields is implementation dependent. If this option is set, the fields are serielized in the order they are in the array. In either case, every JSON object must have the same keys as the first object. </dd> <dt><code>serialize-boolean-as</code></dt> <dd> What strings to serialize <code>true</code> and <code>false</code> as; default: <code>true</code> and <code>false</code>. This must be a sub-object with the two keys <code>\"true\"</code> and <code>\"false\"</code>, e.g.: <code>{ \"true\" : \"Y\", \"false\" : \"N\" }</code>. </dd> <dt><code>serialize-header</code></dt> <dd> Whether a header line is included; default: <code>true</code>. If <code>true</code>, the first string result is the header line comprised of all the objects' keys' names; if <code>false</code>, the heder line is not returned. </dd> <dt><code>serialize-null-as</code></dt> <dd> What string to serialize JSON <code>null</code> values as; default: <code>null</code>. </dd> <dt><code>quote-char</code></dt> <dd> The single ASCII character that may be used to quote values; default: <code>\"</code> (U+0022). </dd> <dt><code>quote-escape</code></dt> <dd> The single ASCII character used to escape <code>quote-char</code>; default: same as <code>quote-char</code>. If <code>quote-escape</code> equals <code>quote-char</code>, it means that <code>quote-char</code> must be doubled to escape it. If <code>quote-escape</code> does not equal <code>quote-char</code>, it means that <code>quote-escape</code> is used to escape <code>quote-char</code>. For example, a <code>quote-char</code> of <code>\"</code> (U+0022) and a <code>quote-escape</code> of <code>\\</code> (U+005C) means that quotes will be escaped by <code>\\\"</code>. </dd> <dt><code>separator</code></dt> <dd> The single ASCII character used to separate values; default: <code>,</code> (U+002C). </dd> </dl></div>" } ], "returns" : { "type" : "string*", "description" : "a sequence of strings where each string corresponds to a JSON object, aka, \"record.\"" }, "errors" : [  ] } ], "variables" : [  ] }