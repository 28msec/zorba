{ "ns" : "http://www.zorba-xquery.com/modules/email/imap", "description" : " This module provides functions for accessing and manipulating emails on mail\n servers through the IMAP protocol.\n All functions in this module receive as the first argument the IMAP host and user\n information. This is an element with the type <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">hostInfoType</code> as defined\n in the email schema: <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http://www.zorba-xquery.com/modules/email</code>.\n For example:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\">\n &lt;email:hostInfo&gt;\n   &lt;email:hostName&gt;imap.example.com&lt;/email:hostName&gt;\n   &lt;email:userName&gt;myuser&lt;/email:userName&gt;\n   &lt;email:password&gt;mypassword&lt;/email:password&gt;\n &lt;/email:hostInfo&gt;\n </pre>\n The <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">hostInfoType</code> only needs to be in the email schema namespace\n (<code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http://www.zorba-xquery.com/modules/email</code>). It does not need\n to be validated since it's validated by the module.\n", "sees" : [ "<xqdoc:see xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"><a href=\"http://www.washington.edu/imap/\">c-client library part of UW IMAP toolkit</a></xqdoc:see>" ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Daniel Thomas, Gabriel Petrovay</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/annotations", "prefix" : "an" }, { "uri" : "http://www.zorba-xquery.com/modules/email", "prefix" : "email" }, { "uri" : "http://www.zorba-xquery.com/modules/email/imap", "prefix" : "imap" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "arity" : 5, "name" : "copy", "qname" : "imap:copy", "signature" : "($host-info as element(email:hostInfo), $mailbox-from as xs:string, $mailbox-to as xs:string, $messages as xs:long+, $uid as xs:boolean?) as empty-sequence()", "description" : " Copies messages between mailboxes.\n Depending on the value of <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">$uid</code>, the messages are either specified\n through their sequence number or through their unique id. Both mailboxes must exist.\n", "summary" : "<p> Copies messages between mailboxes.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox-from", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox in which the messages reside.</div>" }, { "name" : "mailbox-to", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox in to which the messages are copied.</div>" }, { "name" : "messages", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The messages to be copied, specified either by their sequence number or their unique id.</div>" }, { "name" : "uid", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If true, <code>$messages</code> are treated as sequence numbers. Else as unique identifiers.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 2, "name" : "create", "qname" : "imap:create", "signature" : "($host-info as element(email:hostInfo), $mailbox-name as xs:string) as empty-sequence()", "description" : " Creates a new mailbox for the given user.\n", "summary" : "<p> Creates a new mailbox for the given user.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox-name", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name for the new mailbox.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 2, "name" : "delete", "qname" : "imap:delete", "signature" : "($host-info as element(email:hostInfo), $mailbox-name as xs:string) as empty-sequence()", "description" : " Deletes a mailbox for the given user.\n", "summary" : "<p> Deletes a mailbox for the given user.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox-name", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the mailbox to delete.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 2, "name" : "expunge", "qname" : "imap:expunge", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string) as empty-sequence()", "description" : " Permanently deletes all messages of the given mailbox that have the \"deleted\" flag set.\n", "summary" : "<p> Permanently deletes all messages of the given mailbox that have the \"deleted\" flag set.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox for which all messages that have the \\Deleted flag set should be permanently deleted.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 4, "name" : "fetch-envelope", "qname" : "imap:fetch-envelope", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long, $uid as xs:boolean?) as element(email:envelope)", "description" : " Fetches the envelope of a message.\n", "summary" : "<p> Fetches the envelope of a message.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox in which to search for the message.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The message for which to fetch the envelope (depending on <code>$uid</code> either as message sequence number or unique identifier).</div>" }, { "name" : "uid", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If true, <code>$message-number</code> is treated as sequence number. Else as unique identifier.</div>" } ], "returns" : { "type" : "element(email:envelope)", "description" : "The <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">envelope</code> of the requested message. The result is validated against the schema: <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http://www.zorba-xquery.com/modules/email</code>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 4, "name" : "fetch-flags", "qname" : "imap:fetch-flags", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long, $uid as xs:boolean?) as element(email:flags)", "description" : " Fetches the flags of a message.\n", "summary" : "<p> Fetches the flags of a message.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox containing the specified message.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Either the message sequence number or the unique identifier of the message.</div>" }, { "name" : "uid", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If true, <code>$message-number</code> is treated as sequence number. Else as unique identifier.</div>" } ], "returns" : { "type" : "element(email:flags)", "description" : "The <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">flags</code> of the specified message. The result is validated against the schema: <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http://www.zorba-xquery.com/modules/email</code>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 3, "name" : "fetch-from", "qname" : "imap:fetch-from", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long) as xs:string", "description" : " Fetches the 'from' string of a message.\n Please note that this function only words with message sequence numbers,\n not with unique identifiers. Only the first 255 characters of a 'from'\n string are fetched.\n", "summary" : "<p> Fetches the 'from' string of a message.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox for which we want to get the 'from' string of a message.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Denotes the message for which we want the 'from' string.</div>" } ], "returns" : { "type" : "xs:string", "description" : "The 'from' string of the specified message." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 3, "name" : "fetch-message-sequence-number", "qname" : "imap:fetch-message-sequence-number", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long) as xs:long", "description" : " Fetches the message sequence number for a given unique identifier.\n", "summary" : "<p> Fetches the message sequence number for a given unique identifier.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox for which we want to get the message sequence number of an unique identifier.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The unique identifier for which we want the message sequence number.</div>" } ], "returns" : { "type" : "xs:long", "description" : "The message sequence number of the of the given unique identifier." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 4, "name" : "fetch-message", "qname" : "imap:fetch-message", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long, $uid as xs:boolean) as element(email:message)", "description" : " Fetches a whole message.\n", "summary" : "<p> Fetches a whole message.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox in which to search for the message.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The message to fetch, denoted either by its sequence number or unique identifier.</div>" }, { "name" : "uid", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If true, <code>$message-number</code> is treated as sequence number. Else as unique identifier.</div>" } ], "returns" : { "type" : "element(email:message)", "description" : "the <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">message</code> with the given <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">$message-number</code>. The result is validated against the schema: <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http://www.zorba-xquery.com/modules/email</code>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 3, "name" : "fetch-subject", "qname" : "imap:fetch-subject", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long) as xs:string", "description" : " Fetches the subject for a message.\n Please note that this function only works with message sequence numbers,\n not with unique identifiers. Only the first 255 characters of a subject\n are fetched.\n", "summary" : "<p> Fetches the subject for a message.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox for which we want to get the subject of a message.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Denotes the message for which we want the subject.</div>" } ], "returns" : { "type" : "xs:string", "description" : "The subject of the specified message." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 3, "name" : "fetch-uid", "qname" : "imap:fetch-uid", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long) as xs:long", "description" : " Fetches the unique identifier for a given message sequence number.\n", "summary" : "<p> Fetches the unique identifier for a given message sequence number.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox for which we want to get the unique identifier of a message sequence number.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The message sequence number for which we want the unique identifier.</div>" } ], "returns" : { "type" : "xs:long", "description" : "The unique identifier of the given message sequence number." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 4, "name" : "list", "qname" : "imap:list", "signature" : "($host-info as element(email:hostInfo), $mailbox-ref as xs:string, $pattern as xs:string, $only-subscribed as xs:boolean) as element(email:mailbox)*", "description" : " Lists IMAP folders for the specified user on the host that match the pattern.\n", "summary" : "<p> Lists IMAP folders for the specified user on the host that match the pattern.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox-ref", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> is applied to pattern in an implementation dependent fashion to search for matching mailbox names.</div>" }, { "name" : "pattern", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The pattern for mailboxes to look for (can include wildcards '*' and '%').</div>" }, { "name" : "only-subscribed", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If set true, only mailboxes are listed to which the user is subscribed.</div>" } ], "returns" : { "type" : "element(email:mailbox)*", "description" : "A sequence of <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mailbox</code> elements. The result elements are validated against the schema: <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http://www.zorba-xquery.com/modules/email</code>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 5, "name" : "move", "qname" : "imap:move", "signature" : "($host-info as element(email:hostInfo), $mailbox-from as xs:string, $mailbox-to as xs:string, $messages as xs:long+, $uid as xs:boolean?) as empty-sequence()", "description" : " Moves messages between mailboxes.\n Depending on the value of <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">$uid</code>, the messages are either specified through\n their sequence number or through their unique id. Both mailboxes must exist.\n", "summary" : "<p> Moves messages between mailboxes.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox-from", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox in which the messages reside.</div>" }, { "name" : "mailbox-to", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox in to which the messages should be moved.</div>" }, { "name" : "messages", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The messages to be copied, specified either by their sequence number or their unique id.</div>" }, { "name" : "uid", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If true, <code>$messages</code> are treated as sequence numbers. Else as unique identifiers.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 3, "name" : "rename", "qname" : "imap:rename", "signature" : "($host-info as element(email:hostInfo), $mailbox-old as xs:string, $mailbox-new as xs:string) as empty-sequence()", "description" : " Renames a mailbox.\n", "summary" : "<p> Renames a mailbox.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox-old", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the mailbox we want to rename.</div>" }, { "name" : "mailbox-new", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The new name for the mailbox.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 4, "name" : "search", "qname" : "imap:search", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $criteria as xs:string, $uid as xs:boolean?) as xs:long*", "description" : " Searches a mailbox for messages that match the given criteria.\n The criteria should be a string as defined in the RFC3501 (IMAP4rev1).\n A valid example would be: 'FROM zorba@gmail.com OR NOT SUBJECT Bug'.\n Depending on the value of <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">$uid</code>, the function will either\n return matching sequence numbers or unique identifiers.\n", "summary" : "<p> Searches a mailbox for messages that match the given criteria.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox to search.</div>" }, { "name" : "criteria", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The searching criteria.</div>" }, { "name" : "uid", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If true, the function returns the sequence of unique identifiers corresponding to the matching mails, else the corresponding sequence numbers are returned.</div>" } ], "returns" : { "type" : "xs:long*", "description" : "Either the sequence of matching sequence numbers or the sequence of matching unique identifiers." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 5, "name" : "set-flags", "qname" : "imap:set-flags", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string, $message-number as xs:long, $flags as element(email:flags), $uid as xs:boolean?) as empty-sequence()", "description" : " Sets the flags for a given message.\n The flags are set and unset according to the passed <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">$flags</code>.\n", "summary" : "<p> Sets the flags for a given message.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox containing the specified message.</div>" }, { "name" : "message-number", "type" : "xs:long", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Either the message sequence number or the unique identifier of the message (depending on the value of <code>$uid</code>).</div>" }, { "name" : "flags", "type" : "element(email:flags)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Defines which flags should be set for this message. The possibilities are \"seen\", \"deleted\", \"flagged\", \"answered\", and \"draft\". Setting all flags at once is done by passing the element: <code> &lt;email:flags&gt; &lt;email:seen/&gt; &lt;email:deleted/&gt; &lt;email:flagged/&gt; &lt;email:answered/&gt; &lt;email:draft/&gt; &lt;/email:flags&gt; </code>. Setting \"flagged\" only and unsetting all other at once can be done by passing: <code> &lt;email:flags&gt; &lt;email:flagged/&gt; &lt;/email:flags&gt; </code>.</div>" }, { "name" : "uid", "type" : "xs:boolean", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> If true, <code>$message-number</code> is treated as sequence number. Else as unique identifier.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0003 If no message is found with the provided sequence number/unique identifier.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 2, "name" : "status", "qname" : "imap:status", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string) as element(email:status)", "description" : " Returns the status of the given mailbox.\n The status of a mailbox contains:\n <ul xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n  <li><code>messages</code>: the number of messages in the mailbox</li>\n  <li><code>recent</code>: the number of messages flagged as recent</li>\n  <li><code>unseen</code>: the number of messages flagged as unseen</li>\n  <li><code>uidnext</code>: the next unique identifier that will be assigned to a message</li>\n  <li><code>uidvalidity</code>: a value that, together with the <code>uidnext</code> value\n    forms a 64 bit number that must be unique for the server</li>\n </ul>\n", "summary" : "<p> Returns the status of the given mailbox.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox for which we want to have the status.</div>" } ], "returns" : { "type" : "element(email:status)", "description" : "The <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">status</code> of the specified <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">$mailbox</code>. The result is validated against the schema: <code xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">http://www.zorba-xquery.com/modules/email</code>." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 2, "name" : "subscribe", "qname" : "imap:subscribe", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string) as empty-sequence()", "description" : " Subscribes the user to the specified mailbox.\n", "summary" : "<p> Subscribes the user to the specified mailbox.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox the user wants to subscribe to.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] }, { "arity" : 2, "name" : "unsubscribe", "qname" : "imap:unsubscribe", "signature" : "($host-info as element(email:hostInfo), $mailbox as xs:string) as empty-sequence()", "description" : " Unsubscribes the user from the specified mailbox.\n", "summary" : "<p> Unsubscribes the user from the specified mailbox.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host-info", "type" : "element(email:hostInfo)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The IMAP host, user name, and password.</div>" }, { "name" : "mailbox", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The mailbox the user wants to unsubscribe from.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The function is declared as sequential and has side-effects. It returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0001 If the IMAP operation failed.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">imap:IMAP0002 If the connection to the IMAP server is refused.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 If the value of <code>$host-info</code> is not valid according to the email schema: <code>http://www.zorba-xquery.com/modules/email</code></xqdoc:error>" ] } ], "variables" : [  ] }