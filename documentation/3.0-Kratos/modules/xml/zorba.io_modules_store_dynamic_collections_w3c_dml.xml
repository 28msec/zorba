<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2013-12-04T01:28:38.942159+01:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/dml</xqdoc:uri><xqdoc:name>dml</xqdoc:name><xqdoc:comment><xqdoc:description> This modules provides a set of functions to modify a collection and retrieve
 the nodes contained in a particular collection.
 <p/>
 Such collections are identified by a URI as defined in the XQuery
 specification.
 However, please note that we do not advice users to use collections
 identified by URIs.
 Instead, we refer to the
 <a href="../zorba/data_lifecycle.html">data lifecycle documentation</a>.
 It gives an overview of several ways to work with collections, documents,
 and other data-structures.
</xqdoc:description><xqdoc:author>Matthias Brantner, David Graf, Till Westmann, Markos Zaharioudakis</xqdoc:author><xqdoc:see><a href="../zorba/data_lifecycle.html">Data Lifecycle</a></xqdoc:see><xqdoc:see>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:see><xqdoc:see>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:see><xqdoc:see>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:see><xqdoc:see>http://zorba.io/errors</xqdoc:see><xqdoc:custom tag="project">Zorba/Data Store/Collections/W3C Data Manipulation</xqdoc:custom><xqdoc:custom tag="language">xquery</xqdoc:custom><xqdoc:custom tag="version">3.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="an" uri="http://zorba.io/annotations" isSchema="false"/><xqdoc:namespace prefix="ddl" uri="http://zorba.io/modules/store/dynamic/collections/w3c/ddl" isSchema="false"/><xqdoc:namespace prefix="dml" uri="http://zorba.io/modules/store/dynamic/collections/w3c/dml" isSchema="false"/><xqdoc:namespace prefix="qdml" uri="http://zorba.io/modules/store/dynamic/collections/dml" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/><xqdoc:namespace prefix="zerr" uri="http://zorba.io/errors" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri></xqdoc:import></xqdoc:imports><xqdoc:variables/><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Inserts copies of the given nodes at the beginning of the collection.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$content The sequence of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, inserts <code>$content</code> into the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:insert-nodes-first</xqdoc:name><xqdoc:signature>declare updating function dml:insert-nodes-first($name as xs:string, $content as node()*)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>insert-first</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Inserts copies of the given nodes at the end of the collection.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$content The sequence of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, inserts the nodes into the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:insert-nodes-last</xqdoc:name><xqdoc:signature>declare updating function dml:insert-nodes-last($name as xs:string, $content as node()*)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>insert-last</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> Inserts copies of the given nodes into a collection at the position directly
 preceding the given target node.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$target The node in the collection before which <code>$content</code> will be inserted.</xqdoc:param><xqdoc:param>$content The sequences of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, inserts the nodes into the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:error>zerr:ZDDY0011 if <code>$target</code> node is not contained in the collection.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:insert-nodes-before</xqdoc:name><xqdoc:signature>declare updating function dml:insert-nodes-before($name as xs:string, $target as node(), $content as node()*)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>target</xqdoc:name><xqdoc:type>node()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="3"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>insert-before</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> Inserts copies of the given nodes into a collection at the position
 directly following the given target node.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$target The node in the collection after which <code>$content</code> will be inserted.</xqdoc:param><xqdoc:param>$content The sequence of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, inserts the nodes into the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:error>zerr:ZDDY0011 if <code>$target</code> node is not contained in the collection.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:insert-nodes-after</xqdoc:name><xqdoc:signature>declare updating function dml:insert-nodes-after($name as xs:string, $pos as node(), $content as node()*)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>pos</xqdoc:name><xqdoc:type>node()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="3"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>insert-after</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> This function does the same as the <code>insert-nodes()</code> function
 except it immediately applies the resulting pending updates and returns the
 nodes that have been inserted.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$content The sequence of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>The sequence of nodes that have been inserted.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:see>dml:insert-nodes-first</xqdoc:see></xqdoc:comment><xqdoc:name>dml:apply-insert-nodes-first</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function dml:apply-insert-nodes-first($name as xs:string, $content as node()*) as node()*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">node()*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>apply-insert-first</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> This function does the same as the <code>insert-nodes-last()</code> function
 except it immediately applies the resulting pending updates and returns the
 nodes that have been inserted.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$content The sequence of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>The sequence of nodes that have been inserted.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:see>dml:insert-nodes-last</xqdoc:see></xqdoc:comment><xqdoc:name>dml:apply-insert-nodes-last</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function dml:apply-insert-nodes-last($name as xs:string, $content as node()*) as node()*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">node()*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>apply-insert-last</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> This function does the same as the <code>insert-nodes-before()</code>
 function except it immediately applies the resulting pending updates and
 returns the nodes that have been inserted.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$target The node in the collection before which <code>$content</code> will be inserted.</xqdoc:param><xqdoc:param>$content The sequence of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>The sequence of nodes that have been inserted.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:see>dml:insert-nodes-before</xqdoc:see></xqdoc:comment><xqdoc:name>dml:apply-insert-nodes-before</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function dml:apply-insert-nodes-before($name as xs:string, $target as node(), $content as node()*) as node()*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>target</xqdoc:name><xqdoc:type>node()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">node()*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>apply-insert-before</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> This function does the same as the <code>insert-nodes-after()</code>
 function except it immediately applies the resulting pending updates and
 returns the nodes that have been inserted.
</xqdoc:description><xqdoc:param>$name The name of the collection to insert into.</xqdoc:param><xqdoc:param>$target The node in the collection after which <code>$content</code> will be inserted.</xqdoc:param><xqdoc:param>$content The sequence of nodes whose copies will be inserted.</xqdoc:param><xqdoc:return>The sequence of nodes that have been inserted.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:see>dml:insert-nodes-after</xqdoc:see></xqdoc:comment><xqdoc:name>dml:apply-insert-nodes-after</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function dml:apply-insert-nodes-after($name as xs:string, $pos as node(), $content as node()*) as node()*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>pos</xqdoc:name><xqdoc:type>node()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">node()*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>apply-insert-after</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Gets the sequence of nodes of the collection identified by the given name.
</xqdoc:description><xqdoc:param>$name The name of the collection.</xqdoc:param><xqdoc:return>The sequence contained in the given collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:collection</xqdoc:name><xqdoc:signature>declare function dml:collection($name as xs:string) as node()*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">node()*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Gets the name of the collection the given node belongs to.
</xqdoc:description><xqdoc:param>$node The node for which to get the name of the collection.</xqdoc:param><xqdoc:return>The URI of the collection to which <code>$node</code> belongs.</xqdoc:return><xqdoc:error>zerr:ZDDY0011 if <code>$node</code> does not belong to a collection.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:collection-name</xqdoc:name><xqdoc:signature>declare function dml:collection-name($node as node()) as xs:string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>node</xqdoc:name><xqdoc:type>node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>collection-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>from-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Deletes nodes from a collection.
</xqdoc:description><xqdoc:param>$nodes the nodes in the collection that should be deleted.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, deletes the nodes from their collections.</xqdoc:return><xqdoc:error>zerr:ZDDY0011 if any nodes are not a member of a collection or not all nodes of belong to the same collection.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:delete-nodes</xqdoc:name><xqdoc:signature>declare updating function dml:delete-nodes($nodes as node()*)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>nodes</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>delete</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Deletes the first node from a collection.
</xqdoc:description><xqdoc:param>$name The name of the collection to delete from.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, deletes the first node from the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0011 if the collection is empty.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:delete-node-first</xqdoc:name><xqdoc:signature>declare updating function dml:delete-node-first($name as xs:string)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>delete-first</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Deletes the first <i>N</i> nodes from a collection.
</xqdoc:description><xqdoc:param>$name The name of the collection to delete from.</xqdoc:param><xqdoc:param>$number The number of nodes to delete.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, deletes the nodes from the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0011 if the collection contains less than <code>$number</code> items.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:delete-nodes-first</xqdoc:name><xqdoc:signature>declare updating function dml:delete-nodes-first($name as xs:string, $number as xs:integer)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>number</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>delete-first</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Deletes the last node from a collection.
</xqdoc:description><xqdoc:param>$name The name of the collection to delete from.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, deletes the last node from the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:error>zerr:ZDDY0011 if the collection is empty.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:delete-node-last</xqdoc:name><xqdoc:signature>declare updating function dml:delete-node-last($name as xs:string)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>delete-last</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Deletes the last <i>N</i> nodes from a collection.
</xqdoc:description><xqdoc:param>$name The name of the collection to delete from.</xqdoc:param><xqdoc:param>$number The number of nodes to delete.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, deletes the last n nodes.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:error>zerr:ZDDY0011 if the collection contains less than <code>$number</code> items.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:delete-nodes-last</xqdoc:name><xqdoc:signature>declare updating function dml:delete-nodes-last($name as xs:string, $number as xs:integer)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>number</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>delete-last</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Gets the index of the given node in the collection.
</xqdoc:description><xqdoc:param>$node The node to get the index of.</xqdoc:param><xqdoc:return>Returns the position of <code>$node</code> in the collection.</xqdoc:return><xqdoc:error>zerr:ZDDY0011 if <code>$node</code> is not contained in any collection.</xqdoc:error></xqdoc:comment><xqdoc:name>dml:index-of</xqdoc:name><xqdoc:signature>declare function dml:index-of($node as node()) as xs:integer</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>node</xqdoc:name><xqdoc:type>node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:integer</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>index-of</xqdoc:name></xqdoc:invoked></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>