<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2013-12-04T01:28:38.942159+01:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://zorba.io/modules/store/documents</xqdoc:uri><xqdoc:name>documents</xqdoc:name><xqdoc:comment><xqdoc:description> This module defines a set of functions which manage documents that
 are persisted in the store. Specifically, it contains functions
 to put, remove, list, or retrieve documents.
 <p/>
 Please refer to
 <a href="http://zorba.io/documentation/latest/zorba/architecture/data_lifecycle">our documentation</a>
 for more information about the lifecycle management and manipulation of
 documents.
</xqdoc:description><xqdoc:author>Matthias Brantner, David Graf, Till Westmann, Markos Zaharioudakis</xqdoc:author><xqdoc:see><a href="http://zorba.io/documentation/latest/zorba/architecture/data_lifecycle">Data Lifecycle</a></xqdoc:see><xqdoc:see>http://zorba.io/modules/latest/zorba.io/errors</xqdoc:see><xqdoc:custom tag="project">Zorba/Data Store/Documents/Documents</xqdoc:custom><xqdoc:custom tag="language">xquery</xqdoc:custom><xqdoc:custom tag="version">3.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="doc" uri="http://zorba.io/modules/store/documents" isSchema="false"/><xqdoc:namespace prefix="err" uri="http://www.w3.org/2005/xqt-errors" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/><xqdoc:namespace prefix="zerr" uri="http://zorba.io/errors" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports/><xqdoc:variables/><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Retrieves a sequence of URIs of documents bound in the store.
</xqdoc:description><xqdoc:return>The list of URIs of the available documents in the store or the empty sequence if none.</xqdoc:return></xqdoc:comment><xqdoc:name>doc:available-documents</xqdoc:name><xqdoc:signature>declare function doc:available-documents() as xs:string* external</xqdoc:signature><xqdoc:return><xqdoc:type occurrence="*">xs:string*</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Gets the document with the given URI from the store.
 The difference to fn:doc is that this function does not attempt to retrieve
 the resource from the file system or the web before returning it.
 Its only responsibility is to return the document from the store that was
 bound using fn:put or doc:put.
</xqdoc:description><xqdoc:param>$uri The URI of the document to retrieve. If a relative URI is given, the URI is made absolute using the static base URI of the module.</xqdoc:param><xqdoc:return>Returns the document bound to the given URI.</xqdoc:return><xqdoc:error>zerr:ZXQD0002 if no document with the given URI exists in the store.</xqdoc:error><xqdoc:error>err:FODC0004 if the given URI is not valid or couldn't be made absolute.</xqdoc:error></xqdoc:comment><xqdoc:name>doc:document</xqdoc:name><xqdoc:signature>declare function doc:document($uri as xs:string) as document() external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>document()</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Returns true if a document with the given URI exists in the store.
</xqdoc:description><xqdoc:param>$uri The URI of the document to check for. If a relative URI is given, the URI is made absolute using the static base URI of the module.</xqdoc:param><xqdoc:return>Returns true if a document with the given URI exists in the store or false otherwise.</xqdoc:return><xqdoc:error>err:FODC0004 if the given URI is not valid or couldn't be made absolute.</xqdoc:error></xqdoc:comment><xqdoc:name>doc:is-available-document</xqdoc:name><xqdoc:signature>declare function doc:is-available-document($uri as xs:string) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Adds a document to the store.
 The document is bound to the URI given as first parameter.
 This URI is the name of the document and can be used by the
 <code>doc:document()</code> function to retrieve the document from the
 store.
 <p/>
 The semantics of the function is similar to the <code>fn:put()</code>
 function.
 The difference is that this function accepts only document nodes as
 parameters.
 Please note that this function does not try to fetch the document from the
 external resource identified by the URI.
 Instead, the file or http-client modules can be used to retrieve the
 resource as string and <code>fn:parse-xml()</code> can be used to parse the
 string returning a document.
</xqdoc:description><xqdoc:param>$uri The URI of the document. If a relative URI is given, the URI is made absolute using the static base URI of the module.</xqdoc:param><xqdoc:param>$doc The document node to be added to the store.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, when applied, adds the given document to the store.</xqdoc:return><xqdoc:error>zerr:ZAPI0020 if the store already contains a document for the given URI.</xqdoc:error><xqdoc:error>err:FODC0004 if the given URI is not valid or couldn't be made absolute.</xqdoc:error></xqdoc:comment><xqdoc:name>doc:put</xqdoc:name><xqdoc:signature>declare updating function doc:put($uri as xs:string, $doc as document()) external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>doc</xqdoc:name><xqdoc:type>document()</xqdoc:type></xqdoc:parameter></xqdoc:parameters></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Removes the document with the given URI from the store.
</xqdoc:description><xqdoc:param>$uri The URI of the document to remove. If a relative URI is given, the URI is made absolute using the static base URI of the module.</xqdoc:param><xqdoc:return>Returns an empty XDM instance and a pending update list that, when applied, removes the document bound to the given URI.</xqdoc:return><xqdoc:error>zerr:ZXQD0002 if no document with the given URI exists in the store.</xqdoc:error><xqdoc:error>err:FODC0004 if the given URI is not valid or couldn't be made absolute.</xqdoc:error></xqdoc:comment><xqdoc:name>doc:remove</xqdoc:name><xqdoc:signature>declare updating function doc:remove($uri as xs:string) external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>