<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2013-12-04T01:28:38.942159+01:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://zorba.io/modules/stack</xqdoc:uri><xqdoc:name>stack</xqdoc:name><xqdoc:comment><xqdoc:description> Implementation of stack for items, using dynamic collections.<p/>
 Entries in the stack must be structured items - that is, either JSON
 Objects or Arrays, or XML Nodes. <p/>
</xqdoc:description><xqdoc:author>Daniel Turcanu, Sorin Nasoi</xqdoc:author><xqdoc:custom tag="project">Zorba/Data Store/Data Structures/Stack</xqdoc:custom><xqdoc:custom tag="language">xquery</xqdoc:custom><xqdoc:custom tag="version">3.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="ann" uri="http://zorba.io/annotations" isSchema="false"/><xqdoc:namespace prefix="collections-ddl" uri="http://zorba.io/modules/store/dynamic/collections/ddl" isSchema="false"/><xqdoc:namespace prefix="collections-dml" uri="http://zorba.io/modules/store/dynamic/collections/dml" isSchema="false"/><xqdoc:namespace prefix="stack" uri="http://zorba.io/modules/stack" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri></xqdoc:import></xqdoc:imports><xqdoc:variables><xqdoc:variable><xqdoc:uri>stack:errNS</xqdoc:uri><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable><xqdoc:variable><xqdoc:uri>stack:NOT-EXISTS</xqdoc:uri><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable><xqdoc:variable><xqdoc:uri>stack:EXISTS</xqdoc:uri><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable></xqdoc:variables><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Create a stack with this name. If stack exists, an error is raised. <p/>
</xqdoc:description><xqdoc:param>$name name of the new stack.</xqdoc:param><xqdoc:return>an empty sequence.</xqdoc:return><xqdoc:error>stack:EXISTS if the stack identified by $name already exists.</xqdoc:error></xqdoc:comment><xqdoc:name>stack:create</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="ann" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %ann:sequential function stack:create($name as xs:QName) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>create</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>is-available-collection</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Return the top item in the stack, without removing it. <p/>
</xqdoc:description><xqdoc:param>$name name of the stack.</xqdoc:param><xqdoc:return>the top item, or empty sequence if stack is empty.</xqdoc:return><xqdoc:error>stack:NOT-EXISTS if the stack identified by $name does not exist.</xqdoc:error><xqdoc:custom tag="example">test/Queries/top1.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>stack:top</xqdoc:name><xqdoc:signature>declare function stack:top($name as xs:QName) as structured-item()?</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="?">structured-item()?</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>is-available-collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>collection</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Return the top item in the stack, and remove it. <p/>
</xqdoc:description><xqdoc:param>$name name of the stack.</xqdoc:param><xqdoc:return>the top item, or empty sequence if stack is empty.</xqdoc:return><xqdoc:error>stack:NOT-EXISTS if the stack identified by $name does not exist.</xqdoc:error><xqdoc:custom tag="example">test/Queries/pop2.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>stack:pop</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="ann" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %ann:sequential function stack:pop($name as xs:QName) as structured-item()?</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="?">structured-item()?</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>is-available-collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>delete-first</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Add a new item to the stack; the stack will contain a copy of the given item. <p/>
</xqdoc:description><xqdoc:param>$name name of the stack.</xqdoc:param><xqdoc:param>$value the item to be added.</xqdoc:param><xqdoc:return>an empty sequence.</xqdoc:return><xqdoc:error>stack:NOT-EXISTS if the stack identified by $name does not exist.</xqdoc:error><xqdoc:custom tag="example">test/Queries/push1.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>stack:push</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="ann" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %ann:sequential function stack:push($name as xs:QName, $value as structured-item()) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>value</xqdoc:name><xqdoc:type>structured-item()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>apply-insert-first</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Checks if a stack exists and is empty. <p/>
</xqdoc:description><xqdoc:param>$name name of the stack.</xqdoc:param><xqdoc:return>true if the stack is empty or does not exist.</xqdoc:return><xqdoc:error>stack:NOT-EXISTS if the stack identified by $name does not exist.</xqdoc:error><xqdoc:custom tag="example">test/Queries/empty1.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>stack:empty</xqdoc:name><xqdoc:signature>declare function stack:empty($name as xs:QName) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>is-available-collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>collection</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Count of items in the stack. <p/>
</xqdoc:description><xqdoc:param>$name name of the stack.</xqdoc:param><xqdoc:return>the amount of items.</xqdoc:return><xqdoc:error>stack:NOT-EXISTS if the stack identified by $name does not exist.</xqdoc:error><xqdoc:custom tag="example">test/Queries/size1.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>stack:size</xqdoc:name><xqdoc:signature>declare function stack:size($name as xs:QName) as xs:integer</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:integer</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>count</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>is-available-collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>collection</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Copy all items from source stack to a destination stack. <p/>
 If destination stack does not exist, it is created first. <p/>
 If destination stack is not empty, the items are appended on top. <p/>
</xqdoc:description><xqdoc:param>$destName name of the destination stack.</xqdoc:param><xqdoc:param>$sourceName name of the source stack.</xqdoc:param><xqdoc:return>an empty sequence.</xqdoc:return><xqdoc:custom tag="example">test/Queries/copy1.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>stack:copy</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="ann" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %ann:sequential function stack:copy($destName as xs:QName, $sourceName as xs:QName) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>destName</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>sourceName</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>create</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>is-available-collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/dml</xqdoc:uri><xqdoc:name>insert-first</xqdoc:name></xqdoc:invoked></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>