<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2013-12-04T01:28:38.942159+01:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>ddl</xqdoc:name><xqdoc:comment><xqdoc:description> This modules defines a set of functions for managing persistent, ordered,
 and updatable collections.
 <p/>
 Such collections are identified by a URI as defined in the XQuery
 specification.
 However, please note that we do not advise users to use collections
 identified by URIs.
 Instead, we refer to the
 <a href="http://zorba.io/documentation/latest/zorba/architecture/data_lifecycle">data lifecycle documentation</a>.
 It gives an overview of several ways to work with collections, documents,
 and other data-structures.
</xqdoc:description><xqdoc:author>Matthias Brantner, David Graf, Till Westmann, Markos Zaharioudakis</xqdoc:author><xqdoc:see><a href="http://zorba.io/documentation/latest/zorba/architecture/data_lifecycle">Data Lifecycle</a></xqdoc:see><xqdoc:see>http://zorba.io/modules/latest/zorba.io/modules/store/dynamic/collections/w3c/dml</xqdoc:see><xqdoc:see>http://zorba.io/modules/latest/zorba.io/modules/store/dynamic/collections/ddl</xqdoc:see><xqdoc:see>http://zorba.io/modules/latest/zorba.io/modules/store/dynamic/collections/dml</xqdoc:see><xqdoc:see>http://zorba.io/modules/latest/zorba.io/errors</xqdoc:see><xqdoc:custom tag="project">Zorba/Data Store/Collections/W3C Data Definition</xqdoc:custom><xqdoc:custom tag="language">xquery</xqdoc:custom><xqdoc:custom tag="version">3.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="ddl" uri="http://zorba.io/modules/store/dynamic/collections/w3c/ddl" isSchema="false"/><xqdoc:namespace prefix="qddl" uri="http://zorba.io/modules/store/dynamic/collections/ddl" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/><xqdoc:namespace prefix="zerr" uri="http://zorba.io/errors" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri></xqdoc:import></xqdoc:imports><xqdoc:variables/><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> THIS FUNCTION IS FOR INTERNAL USE ONLY.
 Converts a URI given as a string into a reserved QName.
 This QName is used in the module to be able to store collections identified
 by URIs using dynamic collections that are identified by QNames.
</xqdoc:description><xqdoc:param>$uri URI to convert to a reserved QName.</xqdoc:param><xqdoc:return>The reserved QName for the given URI.</xqdoc:return></xqdoc:comment><xqdoc:name>ddl:to-qname</xqdoc:name><xqdoc:signature>declare function ddl:to-qname($uri as xs:string) as xs:QName</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:QName</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> THIS FUNCTION IS FOR INTERNAL USE ONLY.
 Gets the namespace component of the given QName.
</xqdoc:description><xqdoc:param>$name The QName whose namespace component should be returned.</xqdoc:param><xqdoc:return>The namespace component of <code>$name</code></xqdoc:return></xqdoc:comment><xqdoc:name>ddl:from-qname</xqdoc:name><xqdoc:signature>declare function ddl:from-qname($name as xs:QName) as xs:string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:QName</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>namespace-uri-from-QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Checks whether a collection with the given URI exists.
</xqdoc:description><xqdoc:param>$uri The URI of the collection to check.</xqdoc:param><xqdoc:return>true if the collection is available and false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>ddl:is-available-collection</xqdoc:name><xqdoc:signature>declare function ddl:is-available-collection($uri as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>is-available-collection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> The function returns a sequence of URIs of the collections that are
 available. The sequence will be empty if there are no collections.
</xqdoc:description><xqdoc:return>A sequence of URIs, one for each available collection, or an emtpy sequence.</xqdoc:return></xqdoc:comment><xqdoc:name>ddl:available-collections</xqdoc:name><xqdoc:signature>declare function ddl:available-collections() as xs:string*</xqdoc:signature><xqdoc:return><xqdoc:type occurrence="*">xs:string*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>local-name-from-QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>available-collections</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>from-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Creates the collection with the given URI.
</xqdoc:description><xqdoc:param>$uri The URI of the collection to create.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, creates a collection with the given URI.</xqdoc:return><xqdoc:error>zerr:ZDDY0002 if a collection identified by <code>$uri</code> already exists.</xqdoc:error></xqdoc:comment><xqdoc:name>ddl:create</xqdoc:name><xqdoc:signature>declare updating function ddl:create($uri as xs:string)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>create</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> Creates the collection with the given URI and adds copies of the given
 sequence to the new collection.
</xqdoc:description><xqdoc:param>$uri The URI of the collection to create.</xqdoc:param><xqdoc:param>$content The sequence of nodes to add to the new collection.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, creates a collection identified by <code>$uri</code> and inserts <code>$content</code> into it.</xqdoc:return><xqdoc:error>zerr:ZDDY0002 if a collection identified by <code>$uri</code> already exists.</xqdoc:error></xqdoc:comment><xqdoc:name>ddl:create</xqdoc:name><xqdoc:signature>declare updating function ddl:create($uri as xs:string, $content as node()*)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>content</xqdoc:name><xqdoc:type occurrence="*">node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>create</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Deletes the collection with the given URI.
</xqdoc:description><xqdoc:param>$uri The URI of the collection to delete.</xqdoc:param><xqdoc:return>An empty XDM instance and a pending update list that, once applied, deletes the collection identified by <code>$uri</code>.</xqdoc:return><xqdoc:error>zerr:ZDDY0003 if the collection is not available.</xqdoc:error><xqdoc:error>zerr:ZDDY0015 if any of the in-scope variables reference a node that belongs to the collection identified by <code>$uri</code>.</xqdoc:error></xqdoc:comment><xqdoc:name>ddl:delete</xqdoc:name><xqdoc:signature>declare updating function ddl:delete($uri as xs:string)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>uri</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/ddl</xqdoc:uri><xqdoc:name>delete</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/store/dynamic/collections/w3c/ddl</xqdoc:uri><xqdoc:name>to-qname</xqdoc:name></xqdoc:invoked></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>