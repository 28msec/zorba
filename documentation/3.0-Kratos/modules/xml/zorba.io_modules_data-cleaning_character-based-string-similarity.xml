<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2013-12-04T01:28:38.942159+01:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://zorba.io/modules/data-cleaning/character-based-string-similarity</xqdoc:uri><xqdoc:name>character-based-string-similarity</xqdoc:name><xqdoc:comment><xqdoc:description> <p>This library module provides character-based string similarity functions
 that view strings as sequences of characters, generally computing a similarity score
 that corresponds to the cost of transforming one string into another.
 These functions are particularly useful for matching near duplicate strings
 in the presence of typographical errors. </p>
 <p>The logic contained in this module is not specific to any particular XQuery implementation.</p>
</xqdoc:description><xqdoc:author>Bruno Martins and Diogo Sim√µes</xqdoc:author><xqdoc:custom tag="project">Zorba/Data Cleaning/Character-Based String Similarity</xqdoc:custom><xqdoc:custom tag="language">xquery</xqdoc:custom><xqdoc:custom tag="version">1.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="simc" uri="http://zorba.io/modules/data-cleaning/character-based-string-similarity" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports/><xqdoc:variables/><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Returns the edit distance between two strings.</p>
 <p/>
 <p>This distance, also refered to as the Levenshtein distance, is defined as the minimum number
 of edits needed to transform one string into the other, with the allowable edit operations
 being insertion, deletion, or substitution of a single character.</p>
 <p/>
 <p>Example usage : <pre class="ace-static" ace-mode="xquery">edit-distance("FLWOR", "FLOWER")</pre></p>
 <p/>
 <p>The function invocation in the example above returns : <pre class="ace-static" ace-mode="xquery">2</pre></p>
</xqdoc:description><xqdoc:param>$s1 The first string.</xqdoc:param><xqdoc:param>$s2 The second string.</xqdoc:param><xqdoc:return>The edit distance between the two strings.</xqdoc:return><xqdoc:custom tag="example">test/Queries/data-cleaning/character-based-string-similarity/edit-distance.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>simc:edit-distance</xqdoc:name><xqdoc:signature>declare function simc:edit-distance($s1 as xs:string, $s2 as xs:string) as xs:integer</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>s1</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>s2</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:integer</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>min</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/data-cleaning/character-based-string-similarity</xqdoc:uri><xqdoc:name>edit-distance</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Returns the Jaro similarity coefficient between two strings.</p>
 <p/>
 <p>This similarity coefficient is based on the number of transposed characters and on a
 weighted sum of the percentage of matched characters held within the strings. The higher
 the Jaro-Winkler value is, the more similar the strings are. The coefficient is
 normalized such that 0 equates to no similarity and 1 is an exact match.</p>
 <p/>
 <p>Example usage : <pre class="ace-static" ace-mode="xquery">jaro("FLWOR Found.", "FLWOR Foundation")</pre></p>
 <p/>
 <p>The function invocation in the example above returns : <pre class="ace-static" ace-mode="xquery">0.5853174603174603</pre></p>
</xqdoc:description><xqdoc:param>$s1 The first string.</xqdoc:param><xqdoc:param>$s2 The second string.</xqdoc:param><xqdoc:return>The Jaro similarity coefficient between the two strings.</xqdoc:return><xqdoc:custom tag="example">test/Queries/data-cleaning/character-based-string-similarity/jaro.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>simc:jaro</xqdoc:name><xqdoc:signature>declare function simc:jaro($s1 as xs:string, $s2 as xs:string) as xs:double</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>s1</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>s2</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:double</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>double</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>integer</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>count</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>max</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>min</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Returns the Jaro-Winkler similarity coefficient between two strings.</p>
 <p/>
 <p>This similarity coefficient corresponds to an extension of the Jaro similarity coefficient that weights or
 penalizes strings based on their similarity at the beginning of the string, up to a given prefix size.</p>
 <p/>
 <p>Example usage : <pre class="ace-static" ace-mode="xquery">jaro-winkler("DWAYNE", "DUANE", 4, 0.1 )</pre></p>
 <p/>
 <p>The function invocation in the example above returns : <pre class="ace-static" ace-mode="xquery">0.8577777777777778</pre></p>
</xqdoc:description><xqdoc:param>$s1 The first string.</xqdoc:param><xqdoc:param>$s2 The second string.</xqdoc:param><xqdoc:param>$prefix The number of characters to consider when testing for equal prefixes in the strings.</xqdoc:param><xqdoc:param>$fact The weighting factor to consider when the input strings have equal prefixes.</xqdoc:param><xqdoc:return>The Jaro-Winkler similarity coefficient between the two strings.</xqdoc:return><xqdoc:custom tag="example">test/Queries/data-cleaning/character-based-string-similarity/jaro-winkler.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>simc:jaro-winkler</xqdoc:name><xqdoc:signature>declare function simc:jaro-winkler($s1 as xs:string, $s2 as xs:string, $prefix as xs:integer, $fact as xs:double) as xs:double</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>s1</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>s2</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>prefix</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>fact</xqdoc:name><xqdoc:type>xs:double</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:double</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>max</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>min</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/data-cleaning/character-based-string-similarity</xqdoc:uri><xqdoc:name>jaro</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Returns the Needleman-Wunsch distance between two strings.</p>
 <p/>
 <p>The Needleman-Wunsch distance is similar to the basic edit distance metric, adding a
 variable cost adjustment to the cost of a gap (i.e., an insertion or deletion) in the
 distance metric.</p>
 <p/>
 <p>Example usage : <pre class="ace-static" ace-mode="xquery">needleman-wunsch("KAK", "KQRK", 1, 1)</pre></p>
 <p/>
 <p>The function invocation in the example above returns : <pre class="ace-static" ace-mode="xquery">0</pre></p>
</xqdoc:description><xqdoc:param>$s1 The first string.</xqdoc:param><xqdoc:param>$s2 The second string.</xqdoc:param><xqdoc:param>$score The score value.</xqdoc:param><xqdoc:param>$penalty The penalty value.</xqdoc:param><xqdoc:return>The Needleman-Wunsch distance between the two strings.</xqdoc:return><xqdoc:custom tag="example">test/Queries/data-cleaning/character-based-string-similarity/needleman-wunsch.xq</xqdoc:custom></xqdoc:comment><xqdoc:name>simc:needleman-wunsch</xqdoc:name><xqdoc:signature>declare function simc:needleman-wunsch($s1 as xs:string, $s2 as xs:string, $score as xs:integer, $penalty as xs:integer) as xs:double</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>s1</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>s2</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>score</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>penalty</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:double</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>max</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="4"><xqdoc:uri>http://zorba.io/modules/data-cleaning/character-based-string-similarity</xqdoc:uri><xqdoc:name>needleman-wunsch</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Returns the Smith-Waterman distance between two strings.</p>
 <p/>
 <p>Example usage : <pre class="ace-static" ace-mode="xquery">smith-waterman("ACACACTA", "AGCACACA", 2, 1)</pre></p>
 <p/>
 <p>The function invocation in the example above returns : <pre class="ace-static" ace-mode="xquery">12</pre></p>
</xqdoc:description><xqdoc:param>$s1 The first string.</xqdoc:param><xqdoc:param>$s2 The second string.</xqdoc:param><xqdoc:param>$score The score value.</xqdoc:param><xqdoc:param>$penalty The penalty value.</xqdoc:param><xqdoc:return>The Smith-Waterman distance between the two strings.</xqdoc:return></xqdoc:comment><xqdoc:name>simc:smith-waterman</xqdoc:name><xqdoc:signature>declare function simc:smith-waterman($s1 as xs:string, $s2 as xs:string, $score as xs:integer, $penalty as xs:integer) as xs:double</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>s1</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>s2</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>score</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>penalty</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:double</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>max</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="4"><xqdoc:uri>http://zorba.io/modules/data-cleaning/character-based-string-similarity</xqdoc:uri><xqdoc:name>smith-waterman</xqdoc:name></xqdoc:invoked></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>