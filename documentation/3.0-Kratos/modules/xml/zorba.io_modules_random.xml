<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2013-12-04T01:28:38.942159+01:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>random</xqdoc:name><xqdoc:comment><xqdoc:description> This module provides several functions for generating (pseudo-)random
 numbers and strings.
</xqdoc:description><xqdoc:author>Matthias Brantner, Sorin Nasoi</xqdoc:author><xqdoc:custom tag="project">Zorba/XML and JSON Data Model/Atomic/Random</xqdoc:custom><xqdoc:custom tag="language">jsoniq</xqdoc:custom><xqdoc:custom tag="version">1.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="an" uri="http://zorba.io/annotations" isSchema="false"/><xqdoc:namespace prefix="r" uri="http://zorba.io/modules/random" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/><xqdoc:namespace prefix="zerr" uri="http://zorba.io/errors" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports/><xqdoc:variables><xqdoc:variable><xqdoc:uri>r:errNS</xqdoc:uri><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable><xqdoc:variable><xqdoc:uri>r:INVALID_ARGUMENT</xqdoc:uri><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable></xqdoc:variables><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>This function generates an arbitrary number of pseudo-random numbers.
 The sequence is repeatable by calling the function with the same
 seed.</p>
 <p>The function is based on posix function <tt>srand()</tt> and
 <tt>rand()</tt>. Specifically, it invokes <tt>srand($seed)</tt>
 and then returns the values returned by invoking <tt>rand()</tt>
 <tt>$num</tt>-times.</p>
 <p>Sequences returned by this function are not thread-safe (i.e.
 if multiple XQuery programs invoking this function are executed
 concurrently in several threads). This is because the function is
 based on <tt>srand()</tt> and <tt>rand()</tt>.</p>
</xqdoc:description><xqdoc:param>$seed the initial seed value for the sequence</xqdoc:param><xqdoc:param>$num the length of the sequence returned</xqdoc:param><xqdoc:return><tt>$num</tt> pseudo-random integers, or the empty sequence if <tt>$num</tt> is negative.</xqdoc:return><xqdoc:error>zerr:ZQXD0004 if the given seed is negative or great than the max value of <tt>unsigned int</tt> on the given platform.</xqdoc:error></xqdoc:comment><xqdoc:name>r:seeded-random</xqdoc:name><xqdoc:signature>declare function r:seeded-random($seed as integer, $num as integer) as integer* external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>seed</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>num</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">integer*</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>This function generates an arbitrary number of random numbers.
 The function is nondeterministic because the sequence is
 <b>not</b> repeatable.</p>
 <p>However, the function is based on posix function <tt>srand()</tt> and
 <tt>rand()</tt>. Specifically, it invokes <tt>srand()</tt>
 with some random number based on the current time
 and then returns the values returned by invoking
 <tt>rand()</tt> <tt>$num</tt>-times.</p>
</xqdoc:description><xqdoc:param>$num the length of the sequence returned</xqdoc:param><xqdoc:return><tt>$num</tt> random integers, or the empty sequence if <tt>$num</tt> is negative.</xqdoc:return></xqdoc:comment><xqdoc:name>r:random</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function r:random($num as integer) as integer* external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>num</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">integer*</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>This function generates one random number.
 The function is nondeterministic.</p>
 <p>The function is based on <tt>r:random#1</tt>. Specifically, it
 returns the value of invoking <tt>r:random(1)</tt>.</p>
</xqdoc:description><xqdoc:return>a random integer</xqdoc:return></xqdoc:comment><xqdoc:name>r:random</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function r:random() as integer</xqdoc:signature><xqdoc:return><xqdoc:type>integer</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>random</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>This function generates an arbitrary number of pseudo-random numbers
 within a given range. The sequence is repeatable by calling the
 function with the same seed and boundaries.</p>
 <p>The function is based on the function <tt>r:seeded-random#2</tt>.
 Specifically, its result is repeatable if called with the
 same arguments.</p>
</xqdoc:description><xqdoc:param>$seed the initial seed value for the sequence</xqdoc:param><xqdoc:param>$lower the lower bound for every value within the sequence</xqdoc:param><xqdoc:param>$upper the upper bound for every value within the sequence</xqdoc:param><xqdoc:param>$num the length of the sequence returned</xqdoc:param><xqdoc:return><tt>$num</tt> pseudo-random integers within (and including) the range specified by <tt>$lower</tt> and <tt>$upper</tt>. It returns <tt>$num</tt>-times <tt>$lower</tt> if <tt>$lower</tt> is equal to <tt>$upper</tt> and the empty sequence if <tt>$num</tt> is negative.</xqdoc:return><xqdoc:error>zerr:ZQXD0004 if the given seed is negative or great than the max value of <tt>unsigned int</tt> on the given platform.</xqdoc:error><xqdoc:error>r:INVALID_ARGUMENT if <tt>$lower</tt> is greater than <tt>$upper</tt></xqdoc:error></xqdoc:comment><xqdoc:name>r:seeded-random-between</xqdoc:name><xqdoc:signature>declare function r:seeded-random-between($seed as integer, $lower as integer, $upper as integer, $num as integer) as integer*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>seed</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>lower</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>upper</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>num</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">integer*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>double</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>integer</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>round</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>seeded-random</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>This function generates an arbitrary number of random numbers
 within a given range. The function is nondeterministic because
 the sequence is <b>not</b> repeatable.</p>
</xqdoc:description><xqdoc:param>$lower the lower bound for every value within the sequence</xqdoc:param><xqdoc:param>$upper the upper bound for every value within the sequence</xqdoc:param><xqdoc:param>$num the length of the sequence returned</xqdoc:param><xqdoc:return><tt>$num</tt> pseudo-random integers within (and including) the range specified by <tt>$lower</tt> and <tt>$upper</tt>. It returns <tt>$num</tt>-times <tt>$lower</tt> if <tt>$lower</tt> is equal to <tt>$upper</tt> and the empty sequence if <tt>$num</tt> is negative.</xqdoc:return><xqdoc:error>r:INVALID_ARGUMENT if <tt>$lower</tt> is greater than <tt>$upper</tt></xqdoc:error></xqdoc:comment><xqdoc:name>r:random-between</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function r:random-between($lower as integer, $upper as integer, $num as integer) as integer*</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>lower</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>upper</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>num</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="*">integer*</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>double</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>integer</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>round</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>random</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>This function generates one random number within a given range.
 The function is nondeterministic.</p>
 <p>The function is based on <tt>r:random-between#3</tt>.
 Specifically, it returns the value of invoking
 <tt>r:random-betwen($lower, $upper, 1)</tt>.</p>
</xqdoc:description><xqdoc:param>$lower the lower bound for the random number</xqdoc:param><xqdoc:param>$upper the upper bound for the random number</xqdoc:param><xqdoc:return>a random integer within the given range</xqdoc:return></xqdoc:comment><xqdoc:name>r:random-between</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function r:random-between($lower as integer, $upper as integer) as integer</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>lower</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>upper</xqdoc:name><xqdoc:type>integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>integer</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>random-between</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>This function returns a uuid.</p>
 <p> Note, that the function is not stable,
 that is, it returns a different UUID everytime the function is invoked.</p>
</xqdoc:description><xqdoc:return>the generated UUID as string</xqdoc:return></xqdoc:comment><xqdoc:name>r:uuid</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function r:uuid() as string external</xqdoc:signature><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>