<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2013-12-04T01:28:38.942159+01:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://zorba.io/modules/node-position</xqdoc:uri><xqdoc:name>node-position</xqdoc:name><xqdoc:comment><xqdoc:description> <p>This module provides a function (np:node-position) that, given a node,
 returns positional information about the node in the form of an xs:anyURI
 item. The module also defines functions that use such positional information
 to determine: (1) positional relationships between two nodes (e.g. if one
 is the ancestor of another) and (2) positional properties of a single node
 (e.g. its level in the tree).</p>
 <p/>
 <p>Within this module, the term "node position" will be used to refer to an
 xs:anyURI item that is returned by the np:node-position function.</p>
</xqdoc:description><xqdoc:author>Federico Cavalieri, Markos Zaharioudakis</xqdoc:author><xqdoc:custom tag="project">Zorba/XML and JSON Data Model/Node/Node Position</xqdoc:custom><xqdoc:custom tag="language">xquery</xqdoc:custom><xqdoc:custom tag="version">1.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="np" uri="http://zorba.io/modules/node-position" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports/><xqdoc:variables/><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Return a URI item containing positional information for a given node.</p>
 <p/>
 <p>Within a snapshot, each has a different positional URI. However,
 different nodes in different snapshots might have the same URI.</p>
</xqdoc:description><xqdoc:param>$arg the node for which the positional information URI should be computed</xqdoc:param><xqdoc:return>the opaque positional information URI of the node.</xqdoc:return></xqdoc:comment><xqdoc:name>np:node-position</xqdoc:name><xqdoc:signature>declare function np:node-position($arg as node()) as xs:anyURI external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>arg</xqdoc:name><xqdoc:type>node()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 an ancestor of the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is an ancestor of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential descendant node position</xqdoc:param><xqdoc:param>$n-pos2 the potential ancestor node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is an ancestor of the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:ancestor-of</xqdoc:name><xqdoc:signature>declare function np:ancestor-of($pos1 as xs:anyURI, $pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 a descendant of the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is a descendant of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential ancestor node position</xqdoc:param><xqdoc:param>$n-pos2 the potential descendant node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is a descendant of the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:descendant-of</xqdoc:name><xqdoc:signature>declare function np:descendant-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument belongs
 to the subtree rooted at the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node belongs to the subtree rooted at the
 first. Otherwise, the result of the function does not imply anything about
 the positional relationship of the two nodes.</p>
 <p/>
 <p>This function differs from np:descendant-of in the way it treats attribute
 nodes. np:descendant-of follows the XQuery/XPath specification for the
 descendant axis, and as a result, it does not consider attributes as
 descendants of any nodes; it will always return false if $n-pos2 was
 obtained from an attribute node.In contrast, np:in-subtree-of will return
 true if $n-pos2 was obtained from an attribute node that appeared in the
 subtree of the node that $n-pos1 was obtained from.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential subtree root node position</xqdoc:param><xqdoc:param>$n-pos2 the potential node in the subtree node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 belongs to the subtree rooted at the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:in-subtree-of</xqdoc:name><xqdoc:signature>declare function np:in-subtree-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 the parent of the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is the parent of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential child node position</xqdoc:param><xqdoc:param>$n-pos2 the potential parent node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is the parent of the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:parent-of</xqdoc:name><xqdoc:signature>declare function np:parent-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 a child of the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is a child of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential parent node position</xqdoc:param><xqdoc:param>$n-pos2 the potential child node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is a child of the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:child-of</xqdoc:name><xqdoc:signature>declare function np:child-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 an attribute of the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is an attribute of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential parent node position</xqdoc:param><xqdoc:param>$n-pos2 the potential attribute node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is an attribute of the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:attribute-of</xqdoc:name><xqdoc:signature>declare function np:attribute-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 a following-sibling of the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is a following-sibling of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential preceding-sibling node position</xqdoc:param><xqdoc:param>$n-pos2 the potential following-sibling node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is a following-sibling of the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:following-sibling-of</xqdoc:name><xqdoc:signature>declare function np:following-sibling-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 a preceding-sibling of the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is a preceding-sibling of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential following-sibling node position</xqdoc:param><xqdoc:param>$n-pos2 the potential preceding-sibling node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is a preceding-sibling of the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:preceding-sibling-of</xqdoc:name><xqdoc:signature>declare function np:preceding-sibling-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether two node positions are siblings.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is a sibling of the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 a node position</xqdoc:param><xqdoc:param>$n-pos2 a node position</xqdoc:param><xqdoc:return>true if the two node positions $n-pos1 and $n-pos2 are siblings; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:sibling-of</xqdoc:name><xqdoc:signature>declare function np:sibling-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 following the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is following the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential preceding node position</xqdoc:param><xqdoc:param>$n-pos2 the potential following node position</xqdoc:param><xqdoc:return>true if node positions $n-pos1 and $n-pos2 belong to the same XML tree and $n-pos2 is following the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:following-of</xqdoc:name><xqdoc:signature>declare function np:following-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 following in document order the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is following in document order the
 first.</p>
 <p>Otherwise, the result of the function does not imply anything about
 the positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential preceding node position</xqdoc:param><xqdoc:param>$n-pos2 the potential following node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is following in document order the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:following-in-document-order-of</xqdoc:name><xqdoc:signature>declare function np:following-in-document-order-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 preceding the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is preceding the first.</p>
 <p>Otherwise, the result of the function does not imply anything about the
 positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential following node position</xqdoc:param><xqdoc:param>$n-pos2 the potential preceding node position</xqdoc:param><xqdoc:return>true if node positions $n-pos1 and $n-pos2 belong to the same XML tree and $n-pos2 is preceding the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:preceding-of</xqdoc:name><xqdoc:signature>declare function np:preceding-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether the node position given as second argument is
 preceding in document order the node position given as first argument.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the second node is preceding in document order the
 first.</p>
 <p>Otherwise, the result of the function does not imply anything about
 the positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 the potential following node position</xqdoc:param><xqdoc:param>$n-pos2 the potential preceding node position</xqdoc:param><xqdoc:return>true if the node position $n-pos2 is preceding in document order the node position $n-pos1; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:preceding-in-document-order-of</xqdoc:name><xqdoc:signature>declare function np:preceding-in-document-order-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Computes the level of a node position in its tree.</p>
 <p/>
 <p>Note: The root node of a tree is at level one.</p>
 <p/>
 <p>The result of the function applies to the corresponding node as well,
 that is, within the snapshot in which the position was computed, the node
 level is the returned one.</p>
 <p>The result of the function does not imply anything about the
 node level in other snapshots.</p>
</xqdoc:description><xqdoc:param>$n-pos the node position of the node whose level should be determined.</xqdoc:param><xqdoc:return>the level in the tree of the node position $n-pos as xs:integer.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:level</xqdoc:name><xqdoc:signature>declare function np:level($n-pos as xs:anyURI) as xs:integer external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:integer</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Determines whether a node position corresponds to an attribute node.</p>
</xqdoc:description><xqdoc:param>$n-pos the potential attribute node position</xqdoc:param><xqdoc:return>true if the node position $n-pos corresponds to an attribute; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:is-attribute</xqdoc:name><xqdoc:signature>declare function np:is-attribute($n-pos1 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Determines whether a node position corresponds to a comment node.</p>
</xqdoc:description><xqdoc:param>$n-pos the potential comment node position</xqdoc:param><xqdoc:return>true if the node position $n-pos corresponds to an comment; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:is-comment</xqdoc:name><xqdoc:signature>declare function np:is-comment($n-pos1 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Determines whether a node position corresponds to a document node.</p>
</xqdoc:description><xqdoc:param>$n-pos the potential document node position</xqdoc:param><xqdoc:return>true if the node position $n-pos corresponds to a document; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:is-document</xqdoc:name><xqdoc:signature>declare function np:is-document($n-pos1 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Determines whether a node position corresponds to an element node.</p>
</xqdoc:description><xqdoc:param>$n-pos the potential element node position</xqdoc:param><xqdoc:return>true if the node position $n-pos corresponds to an element; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:is-element</xqdoc:name><xqdoc:signature>declare function np:is-element($n-pos1 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Determines whether a node position corresponds to an processing-instruction
 node.</p>
</xqdoc:description><xqdoc:param>$n-pos the potential processing-instruction node position</xqdoc:param><xqdoc:return>true if the node position $n-pos corresponds to a processing instruction; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:is-processing-instruction</xqdoc:name><xqdoc:signature>declare function np:is-processing-instruction($n-pos1 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Determines whether a node position corresponds to a text node.</p>
</xqdoc:description><xqdoc:param>$n-pos the potential text node position</xqdoc:param><xqdoc:return>true if the node position $n-pos corresponds to a text; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:is-text</xqdoc:name><xqdoc:signature>declare function np:is-text($n-pos1 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether two node positions belong to the same tree.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the two nodes belong to the same tree.</p>
 <p>Otherwise, the result of the function does not imply anything about
 the positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 a node position</xqdoc:param><xqdoc:param>$n-pos2 a node position</xqdoc:param><xqdoc:return>true if the two nodes whose node positions are $n-pos1 and $n-pos2 belong to the same tree.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:in-same-tree-of</xqdoc:name><xqdoc:signature>declare function np:in-same-tree-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Determines whether a node position belongs to a collection.</p>
</xqdoc:description><xqdoc:param>$n-pos the node position</xqdoc:param><xqdoc:return>true if the node position $n-pos belongs to a collection; false otherwise.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:in-collection</xqdoc:name><xqdoc:signature>declare function np:in-collection($n-pos as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Determines whether two node positions belong to the same collection.</p>
 <p/>
 <p>If the two positions were obtained within the same snapshot S, then the
 result of the function applies to the corresponding nodes as well, that
 is, within snapshot S, the two nodes belong to the same collection.</p>
 <p>Otherwise, the result of the function does not imply anything about
 the positional relationship of the two nodes.</p>
</xqdoc:description><xqdoc:param>$n-pos1 a node position</xqdoc:param><xqdoc:param>$n-pos2 a node position</xqdoc:param><xqdoc:return>true if the two nodes whose node positions are $n-pos1 and $n-pos2 belong to the same collection.</xqdoc:return><xqdoc:error>zerr:ZAPI0028 if one of the given URI is not a valid node position computed by the <tt>np:node-position</tt> function.</xqdoc:error></xqdoc:comment><xqdoc:name>np:in-same-collection-of</xqdoc:name><xqdoc:signature>declare function np:in-same-collection-of($n-pos1 as xs:anyURI, $n-pos2 as xs:anyURI) as xs:boolean external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>n-pos1</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>n-pos2</xqdoc:name><xqdoc:type>xs:anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>