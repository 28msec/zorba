{ "ns" : "http://www.zorba-xquery.com/modules/oauth/client", "description" : " This module provides the functions necessary to acquire access to the personal\n resources of a user through the open standard called\n <a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"http://oauth.net/\" target=\"_blank\">OAuth</a>.\n The application/mashup creator does not need to know the\n specifics of <a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"http://oauth.net/\" target=\"_blank\">OAuth</a> to use this module.\n", "sees" : [ "<xqdoc:see xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"><a href=\"http://oauth.net/\" target=\"_blank\">OAuth Website</a></xqdoc:see>" ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Stephanie Russell</xqdoc:author>", "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"><a href=\"mailto:william.candillon@28msec.com\">William Candillon</a></xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/annotations", "prefix" : "an" }, { "uri" : "http://zorba.io/modules/base64", "prefix" : "base64" }, { "uri" : "http://zorba.io/features", "prefix" : "f" }, { "uri" : "http://zorba.io/modules/hmac", "prefix" : "hmac" }, { "uri" : "http://expath.org/ns/http-client", "prefix" : "http" }, { "uri" : "http://expath.org/ns/http-client", "prefix" : "http-client" }, { "uri" : "http://www.zorba-xquery.com/modules/oauth/client", "prefix" : "oauth" }, { "uri" : "http://www.zorba-xquery.com/modules/oauth/error", "prefix" : "oerr" }, { "uri" : "http://zorba.io/options/features", "prefix" : "op" }, { "uri" : "http://www.zorba-xquery.com/schemas/oauth/parameters", "prefix" : "p" }, { "uri" : "http://zorba.io/modules/random", "prefix" : "ra" }, { "uri" : "http://www.zorba-xquery.com/schemas/oauth/service-provider", "prefix" : "sp" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "arity" : 2, "name" : "access-token", "qname" : "oauth:access-token", "signature" : "($service-provider as schema-element(sp:service-provider), $parameters as schema-element(p:parameters)) as schema-element(p:parameters)", "description" : " This function allows the client to obtain a set of token credentials from the service provider by making an authenticated HTTP request to the Token Request endpoint.\n This function is provided for convenience.\n", "summary" : "<p> This function allows the client to obtain a set of token credentials from the service provider by making an authenticated HTTP request to the Token Request endpoint.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "service-provider", "type" : "schema-element(sp:service-provider)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Contains service provider information</div>" }, { "name" : "parameters", "type" : "schema-element(p:parameters)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> parameters</div>" } ], "returns" : { "type" : "schema-element(p:parameters)", "description" : "token credentials correctly parsed as parameter elements, or an error if http response status is not 200 OK <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\"> let $service-provider := oauth:service-provider(...) let $parameters := oauth:parameters(\"oauth_token\", \"#\") let $parameters := oauth:add-parameter($parameters, \"oauth_token_secret\", \"#\") let $tokens := oauth:access-token($service-provider, $parameters) ... </pre>" }, "errors" : [  ] }, { "arity" : 3, "name" : "add-parameter", "qname" : "oauth:add-parameter", "signature" : "($parameters as schema-element(p:parameters)?, $name as xs:string, $value as xs:string) as schema-element(p:parameters)", "description" : " Adds an OAuth parameter to an OAuth Parameters instance.\n Instances of OAuth parameters are used to\n contain value/pair data such as <em xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">oauth_token</em>\n and <em xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">oauth_token_secret</em>.\n For instance the following code snippet:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\">\n  let $params := oauth:parameters(\"oauth_token\", \"#\")\n  let $params := oauth:add-parameter($params, \"oauth_token_secret\", \"#\")\n  return $params\n </pre>\n Returns the following XML schema instance:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\">\n <p:parameters xmlns:p=\"http://www.zorba-xquery.com/schemas/oauth/parameters\">\n   <p:parameter name=\"oauth_token\" value=\"#\"/>\n   <p:parameter name=\"oauth_token_secret\" value=\"#\"/>\n </p:parameters>\n </pre>\n", "summary" : "<p> Adds an OAuth parameter to an OAuth Parameters instance.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "parameters", "type" : "schema-element(p:parameters)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> parameters</div>" }, { "name" : "name", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> parameter name</div>" }, { "name" : "value", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> parameter value</div>" } ], "returns" : { "type" : "schema-element(p:parameters)", "description" : "instance of the OAuth parameters XML schema." }, "errors" : [  ] }, { "arity" : 2, "name" : "parameter", "qname" : "oauth:parameter", "signature" : "($params as schema-element(p:parameters), $string as xs:string) as xs:string", "description" : " This function returns the string value of the parameters whose key matches a $string input.\n", "summary" : "<p> This function returns the string value of the parameters whose key matches a $string input.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "params", "type" : "schema-element(p:parameters)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> element parameters</div>" }, { "name" : "string", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> string as the \"key\" name</div>" } ], "returns" : { "type" : "xs:string", "description" : "string value of the parameter with key $string <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\"> let $params := oauth:parameters(\"oauth_token\", \"token\") let $params := oauth:add-parameter($params, \"oauth_token_secret\", \"secret\") let $token-secret := oauth:parameter($params, \"oauth_token_secret\") return $token-secret </pre>" }, "errors" : [  ] }, { "arity" : 2, "name" : "parameters", "qname" : "oauth:parameters", "signature" : "($name as xs:string, $value as xs:string) as element(p:parameters)", "description" : " Create an OAuth Parameters instance.\n Instances of OAuth parameters are used to\n contain value/pair data such as <em xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">oauth_token</em>\n and <em xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">oauth_token_secret</em>.\n For instance the following code snippet:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\">\n  oauth:parameters(\"oauth_token\", \"#\")\n </pre>\n Returns the following XML schema instance:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xml\">\n <p:parameters xmlns:p=\"http://www.zorba-xquery.com/schemas/oauth/parameters\">\n   <p:parameter name=\"oauth_token\" value=\"#\"/>\n </p:parameters>\n </pre>\n", "summary" : "<p> Create an OAuth Parameters instance.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "name", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> parameter name</div>" }, { "name" : "value", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> parameter value</div>" } ], "returns" : { "type" : "element(p:parameters)", "description" : "instance of the OAuth parameters XML schema." }, "errors" : [  ] }, { "arity" : 3, "name" : "protected-resource", "qname" : "oauth:protected-resource", "signature" : "($protected-resource as schema-element(http:request), $service-provider as schema-element(sp:service-provider), $parameters as schema-element(p:parameters)) as item()*", "description" : " This function allows the client access to the protected resources of the user.\n This function is provided for convenience.\n", "summary" : "<p> This function allows the client access to the protected resources of the user.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "protected-resource", "type" : "schema-element(http:request)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> (Not schema-validated) http:request element with http method and href.</div>" }, { "name" : "service-provider", "type" : "schema-element(sp:service-provider)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Information about the service provider</div>" }, { "name" : "parameters", "type" : "schema-element(p:parameters)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> parameters</div>" } ], "returns" : { "type" : "item()*", "description" : "protected resources parsed as parameter elements, or an error if http response status is not 200 OK <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\"> let $tokens := oauth:parameters(\"oauth_token\", \"#\") let $tokens := oauth:add-parameter($tokens, \"oauth_token_secret\", \"#\") let $service-provider := oauth:service-provider(...) let $request := validate { <request xmlns=\"http://expath.org/ns/http-client\" href=\"http://twitter.com/account/verify_credentials.xml\" method=\"GET\"/> } return oauth:protected-resource($request, $service-provider, $tokens) </pre>" }, "errors" : [  ] }, { "arity" : 1, "name" : "request-token", "qname" : "oauth:request-token", "signature" : "($service-provider as schema-element(sp:service-provider)) as schema-element(p:parameters)", "description" : " This function allows the client to obtain a set of temporary credentials from the service provider by making an authenticated HTTP request to the Temporary Credential Request endpoint.\n This function is provided for convenience for <a xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" href=\"#request-token-2\">request-token#2</a>.\n Invoking this function is equivalent to:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\">\n oauth:request-token($service-provider, ())\n </pre>\n", "summary" : "<p> This function allows the client to obtain a set of temporary credentials from the service provider by making an authenticated HTTP request to the Temporary Credential Request endpoint.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "service-provider", "type" : "schema-element(sp:service-provider)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Information about the service provider</div>" } ], "returns" : { "type" : "schema-element(p:parameters)", "description" : "temporary credentials correctly parsed as parameter elements, or an error if http response status is not 200 OK" }, "errors" : [  ] }, { "arity" : 2, "name" : "request-token", "qname" : "oauth:request-token", "signature" : "($service-provider as schema-element(sp:service-provider), $parameters as schema-element(p:parameters)?) as schema-element(p:parameters)", "description" : " This function allows the client to obtain a set of temporary credentials from the service provider by making an authenticated HTTP request to the Temporary Credential Request endpoint.\n This function is provided for convenience.\n", "summary" : "<p> This function allows the client to obtain a set of temporary credentials from the service provider by making an authenticated HTTP request to the Temporary Credential Request endpoint.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "service-provider", "type" : "schema-element(sp:service-provider)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Information about the service provider</div>" }, { "name" : "parameters", "type" : "schema-element(p:parameters)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Additionnal parameters to the request</div>" } ], "returns" : { "type" : "schema-element(p:parameters)", "description" : "temporary credentials correctly parsed as parameter elements, or an error if http response status is not 200 OK <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\"> let $twitter-config := oauth:service-provider(...) let $additional-parameter := oauth:parameters(\"foo\", \"bar\") let $tokens := oauth:request-token($twitter-config, $additional-parameter) let $token := oauth:parameter($tokens, \"oauth_token\") let $token-secret := oauth:parameter($tokens, \"oauth_token_secret\") ... </pre>" }, "errors" : [  ] }, { "arity" : 10, "name" : "service-provider", "qname" : "oauth:service-provider", "signature" : "($consumer-key as xs:string, $consumer-secret as xs:string, $signature-method as xs:string, $realm as xs:string, $authorize-url as xs:string, $request-token-method as xs:string, $request-token-url as xs:string, $request-token-callback-url as xs:string, $access-token-method as xs:string, $access-token-url as xs:string) as schema-element(sp:service-provider)", "description" : " Utility function to build a service provider object.\n This object contains the information required by the\n OAuth client to interact with an OAuth service provider.\n For instance the following expression:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xquery\">\n let $consumer-key     := \"#\"\n let $consumer-secret  := \"#\"\n let $signature-method := \"HMAC-SHA1\"\n let $realm            := \"twitter.com\"\n let $authorize-url    := \"http://api.twitter.com/oauth/authorize\"\n let $request-token-method := \"POST\"\n let $request-token-url := \"https://twitter.com/oauth/request_token\"\n let $request-token-callback-url := \"https://twitter.com/oauth/request_token\"\n let $access-token-method := \"POST\"\n let $access-token-url := \"https://api.twitter.com/oauth/access_token\"\n return oauth:service-provider(\n   $consumer-key, $consumer-secret, $signature-method,\n   $realm, $authorize-url, $request-token-method,\n   $request-token-url, $request-token-callback-url,\n   $access-token-method, $access-token-url\n )\n </pre>\n Will return the following XML schema instance:\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" class=\"ace-static\" ace-mode=\"xml\">\n <sp:service-provider xmlns:sp=\"http://www.zorba-xquery.com/schemas/oauth/service-provider\" consumer-key=\"#\" consumer-secret=\"#\" signature-method=\"HMAC-SHA1\" realm=\"twitter.com\" authorize-url=\"http://api.twitter.com/oauth/authorize\">\n   <sp:request-token method=\"POST\" href=\"https://twitter.com/oauth/request_token\" callback-url=\"https://twitter.com/oauth/request_token\"/>\n   <sp:access-token method=\"POST\" href=\"https://api.twitter.com/oauth/access_token\"/>\n </sp:service-provider>\n </pre>\n", "summary" : "<p> Utility function to build a service provider object.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "consumer-key", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Client Identifier, also known as the consumer-key</div>" }, { "name" : "consumer-secret", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Client Shared-Secret, also known as the consumer-secret</div>" }, { "name" : "signature-method", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Method with which the signing key is signed (typically HMAC-SHA1)</div>" }, { "name" : "realm", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Realm that defines the protection space</div>" }, { "name" : "authorize-url", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> authorize-url</div>" }, { "name" : "request-token-method", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> request-token-method</div>" }, { "name" : "request-token-url", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> request-token-url</div>" }, { "name" : "request-token-callback-url", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> request-token-callback-url</div>" }, { "name" : "access-token-method", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> access-token-method</div>" }, { "name" : "access-token-url", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> access-token-url</div>" } ], "returns" : { "type" : "schema-element(sp:service-provider)", "description" : "instance of the OAuth service provider XML schema." }, "errors" : [  ] } ], "variables" : [  ] }