{ "ns" : "http://zorba.io/modules/geoproj", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Geographic projection module.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Forward and inverse projection from WGS84 lat-long coordinates to Oblique Mercator x-y projection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Oblique Mercator projection is a sphere to cylinder projection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This projection results in a conformal output, meaning the shape of small areas is preserved,\n no matter the distance from the origin. But it is not equal area, meaning the area size increases heavily\n when getting closer to North or South. The area size increases with the same amount on x and y axes,\n so the relative shape remains almost the same.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Mercator projection is the oldest projection, and it is still widely used because it produces a rectangular map.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This projection is used in Google Maps because of its conformal output.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For military or measurements purposes the UTM projection is used (or variants). This splits the Earth into small\n areas and computes the cartesian coordinates relative to each area.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Here we use Oblique Mercator projection. Its advantage over the normal Mercator is that you can set the tangent point\n between the cylinder and the sphere to be anywhere on Earth. So you can set the center of the map to be close\n to the area you want projected and be able to measure accurately the distances between points and lines.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The map deformation is minimal close to the center point and close to the \"equator\" line.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The advantage over the UTM projection is that it can also produce a global rectangular map, like Mercator,\n which is great for viewing.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The disadvantage over Mercator is that it needs more processing power.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">WGS84 is the ellipsoid aproximation of the Earth, with big radius of 6,378,137 m and small radius of 6,356,752.3 m.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The geographic coordinates expressed for this ellipsoid are widely used today in maps and gps coordinates.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">It is the default standard for representing geographic coordinates.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The purpose of this module is to provide convertion from polar to cartesian coordinates, so you can\n process the geographic data with the Simple Features API functions implemented in the geo module.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">That module works only with cartesian coordinates, but most maps have polar coordinates.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The projection formulas are taken from lib_proj library and implemented in XQuery.</p>\n", "sees" : [  ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Daniel Turcanu</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://www.w3.org/2005/xqt-errors", "prefix" : "err" }, { "uri" : "http://zorba.io/modules/geoproj", "prefix" : "geoproj" }, { "uri" : "http://zorba.io/modules/geoproj-param", "prefix" : "geoproj-param" }, { "uri" : "http://www.opengis.net/gml", "prefix" : "gml" }, { "uri" : "http://www.w3.org/2005/xpath-functions/math", "prefix" : "math" }, { "uri" : "http://zorba.io/modules/schema", "prefix" : "schemaOptions" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "arity" : 1, "name" : "deg-to-dms", "qname" : "geoproj:deg-to-dms", "signature" : "($deg as xs:double) as xs:string", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Convertion from Degrees to Degrees-Minutes-Seconds (DMS).</p>\n", "summary" : "<p>  Convertion from Degrees to Degrees-Minutes-Seconds (DMS).</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "deg", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the degree value</div>" } ], "returns" : { "type" : "xs:string", "description" : "the value in DMS format, <i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">[-]degree</i><b xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">d</b><i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">minutes</i><b xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">'</b><i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">seconds</i>" }, "errors" : [  ] }, { "arity" : 1, "name" : "deg-to-rad", "qname" : "geoproj:deg-to-rad", "signature" : "($deg as xs:double) as xs:double", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Convert angle from degrees to radians.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The parameter is first reduced to value range of (-360, 360).</p>\n", "summary" : "<p>  Convert angle from degrees to radians.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "deg", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> angle in degrees</div>" } ], "returns" : { "type" : "xs:double", "description" : "value in radians (-2PI, 2PI)" }, "errors" : [  ] }, { "arity" : 1, "name" : "dms-to-deg", "qname" : "geoproj:dms-to-deg", "signature" : "($dms as xs:string) as xs:double", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Convertion from Degrees-Minutes-Seconds (DMS) to Degrees.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The values for DMS can be like 11d12'13\", meaning 11 degrees, 12 minutes and 13 seconds.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">One degree has 60 minutes, and one minute has 60 seconds.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The separator for degrees can be one of the characters [dDoO].</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The separator for minutes can be one of the characters ['m].</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The separator for seconds can be \" or nothing.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The seconds can be a floating point number.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The seconds can be missing, and if it is missing, the minutes can be missing too.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The negative value can be expressed as -11d12'13\" or 11d12'13\"S or 11d12'13\"W.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Values for N (North) and E (East) are positive, and S (South) and W (West) are negative.</p>\n", "summary" : "<p>  Convertion from Degrees-Minutes-Seconds (DMS) to Degrees.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "dms", "type" : "xs:string", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the degree-minutes-seconds string expressed in the format described above</div>" } ], "returns" : { "type" : "xs:double", "description" : "the value in degrees" }, "errors" : [  ] }, { "arity" : 4, "name" : "omerc-gmlpos-to-wgs84", "qname" : "geoproj:omerc-gmlpos-to-wgs84", "signature" : "($lat_0 as xs:double, $long_c as xs:double, $k0 as xs:double, $gmlposs as element(gml:pos)*) as element(geoproj-param:latlong)*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Inverse projection from cartesian coordinates on Oblique Mercator cylinder\n to geographic coordinates lat-long on WGS84 ellipsoid.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This is an intermediate function for omerc-to-wgs84.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The difference is that it works with coordinates in gml:pos format,\n gml being the prefix for the GML namespace \"http://www.opengis.net/gml\".</p>\n", "summary" : "<p>  Inverse projection from cartesian coordinates on Oblique Mercator cylinder\n to geographic coordinates lat-long on WGS84 ellipsoid.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "lat_0", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> is the latitude for center point, in degrees (-90, 90)</div>" }, { "name" : "long_c", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> is the longitude for center point, in degrees (-180, 180)</div>" }, { "name" : "k0", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> is the scale in the center point.</div>" }, { "name" : "gmlposs", "type" : "element(gml:pos)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a sequence of nodes of type &lt;gml:pos&gt;<i>x</i> <i>y</i>&lt;/gml:pos&gt; in namespace \"http://www.opengis.net/gml\"</div>" } ], "returns" : { "type" : "element(geoproj-param:latlong)*", "description" : "a sequence of geographic coordinates in format v &lt;latlong&gt;&lt;lat&gt;<i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">latitude degree</i>&lt;/lat&gt;&lt;long&gt;<i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">longitude degree</i>&lt;/long&gt;&lt;/latlong&gt; in namespace \"http://zorba.io/modules/geoproj-param\"" }, "errors" : [  ] }, { "arity" : 4, "name" : "omerc-to-wgs84", "qname" : "geoproj:omerc-to-wgs84", "signature" : "($lat-0 as xs:double, $long-c as xs:double, $k0 as xs:double, $coords as element(geoproj-param:coord)*) as element(geoproj-param:latlong)*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Inverse projection from cartesian coordinates on Oblique Mercator cylinder\n to geographic coordinates lat-long on WGS84 ellipsoid.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The parameters for center point and scale should be the same as for the initial forward projection,\n otherwise you will get wrong results.</p>\n", "summary" : "<p>  Inverse projection from cartesian coordinates on Oblique Mercator cylinder\n to geographic coordinates lat-long on WGS84 ellipsoid.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "lat-0", "type" : "xs:double", "occurence" : null, "description" : "" }, { "name" : "long-c", "type" : "xs:double", "occurence" : null, "description" : "" }, { "name" : "k0", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> is the scale in the center point.</div>" }, { "name" : "coords", "type" : "element(geoproj-param:coord)", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a sequence of nodes of type &lt;coord&gt;&lt;x&gt;<i>x</i>&lt;/x&gt;&lt;y&gt;<i>y</i>&lt;/y&gt;&lt;/coord&gt; in namespace \"http://zorba.io/modules/geoproj-param\" The coordinates are expressed in meters.</div>" } ], "returns" : { "type" : "element(geoproj-param:latlong)*", "description" : "a sequence of geographic coordinates in format &lt;latlong&gt;&lt;lat&gt;<i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">latitude degree</i>&lt;/lat&gt;&lt;long&gt;<i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">longitude degree</i>&lt;/long&gt;&lt;/latlong&gt; in namespace \"http://zorba.io/modules/geoproj-param\" Note that the longitude corresponds to the x coordinate, and the latitude to the y coordinate." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 if any of the coordinates passed in the $coords parameter is not valid according to the schema.</xqdoc:error>" ] }, { "arity" : 1, "name" : "rad-to-deg", "qname" : "geoproj:rad-to-deg", "signature" : "($rad as xs:double) as xs:double", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Convert angle from radians to degrees.</p>\n", "summary" : "<p>  Convert angle from radians to degrees.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "rad", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> value in radians</div>" } ], "returns" : { "type" : "xs:double", "description" : "value in degrees (-360, 360)" }, "errors" : [  ] }, { "arity" : 4, "name" : "wgs84-to-omerc-gmlpos", "qname" : "geoproj:wgs84-to-omerc-gmlpos", "signature" : "($lat-0 as xs:double, $long-c as xs:double, $k0 as xs:double, $lat-long-degrees as element(geoproj-param:latlong)*) as element(gml:pos)*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Forward projection from geographic coordinates lat-long on WGS84 ellipsoid to Oblique Mercator cylinder.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This is an intermediate function for wgs84-to-omerc.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The difference is that it returns the x-y coordinates in gml:pos format,\n gml being the prefix for the GML namespace \"http://www.opengis.net/gml\".</p>\n", "summary" : "<p>  Forward projection from geographic coordinates lat-long on WGS84 ellipsoid to Oblique Mercator cylinder.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "lat-0", "type" : "xs:double", "occurence" : null, "description" : "" }, { "name" : "long-c", "type" : "xs:double", "occurence" : null, "description" : "" }, { "name" : "k0", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> is the scale in the center point.</div>" }, { "name" : "lat-long-degrees", "type" : "element(geoproj-param:latlong)", "occurence" : null, "description" : "" } ], "returns" : { "type" : "element(gml:pos)*", "description" : "a sequence of x-y coordinates in format &lt;gml:pos&gt;<i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">x</i> <i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">y</i>&lt;/gml:pos&gt; in namespace \"http://www.opengis.net/gml\"" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 if any of the nodes passed in the $lat-long-degress parameter is not valid according to the schema.</xqdoc:error>" ] }, { "arity" : 4, "name" : "wgs84-to-omerc", "qname" : "geoproj:wgs84-to-omerc", "signature" : "($lat-0 as xs:double, $long-c as xs:double, $k0 as xs:double, $lat-long-degrees as element(geoproj-param:latlong)*) as element(geoproj-param:coord)*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Forward projection from geographic coordinates lat-long on WGS84 ellipsoid to Oblique Mercator cylinder.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The Oblique Mercator projection is like the standard Mercator projection, but you can choose the point of origin.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Specify the coordinates of the center point somewhere near the points being projected,\n so the projection deformation is small.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The azimuth in the center point, alpha, is hardcoded to zero, so the true north is preserved.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This is a simplification of the standard Oblique Mercator projection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Gamma, the azimuth of the rectified bearing of center line is also zero, calculated from alpha.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The radius of the Earth in WGS84 is 6378137 m.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Reverse flatening 298.257223563.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Eccentricity e 0.0818192.</p>\n", "summary" : "<p>  Forward projection from geographic coordinates lat-long on WGS84 ellipsoid to Oblique Mercator cylinder.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "lat-0", "type" : "xs:double", "occurence" : null, "description" : "" }, { "name" : "long-c", "type" : "xs:double", "occurence" : null, "description" : "" }, { "name" : "k0", "type" : "xs:double", "occurence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> is the scale in the center point. The scale will increase when going far to north and south. Use value 1 to get the true distances between points, in meters. At equator, the distance for 1 degree is aproximately 110 km.</div>" }, { "name" : "lat-long-degrees", "type" : "element(geoproj-param:latlong)", "occurence" : null, "description" : "" } ], "returns" : { "type" : "element(geoproj-param:coord)*", "description" : "a sequence of x-y coordinates in format &lt;coord&gt;&lt;x&gt;<i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">x</i>&lt;/x&gt;&lt;y&gt;<i xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">y</i>&lt;/y&gt;&lt;/coord&gt; in namespace \"http://zorba.io/modules/geoproj-param\" Note that the x coordinate corresponds to the longitude, and y coordinate to the latitude. The coordinates are expressed in meters. The coordinates are relative to the center point." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XQDY0027 if any of the nodes passed in the $lat-long-degress parameter is not valid according to the schema.</xqdoc:error>" ] } ], "variables" : [  ] }