<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.7.6.1">
  <compounddef id="data__lifecycle_8dox" kind="file">
    <compoundname>data_lifecycle.dox</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/**<sp/>\page<sp/>data_lifecycle<sp/>Data<sp/>Lifecycle</highlight></codeline>
<codeline lineno="2"><highlight class="comment"></highlight></codeline>
<codeline lineno="3"><highlight class="comment">\section<sp/>dl_overview<sp/>Overview</highlight></codeline>
<codeline lineno="4"><highlight class="comment"></highlight></codeline>
<codeline lineno="5"><highlight class="comment">This<sp/>sections<sp/>gives<sp/>a<sp/>short<sp/>overview<sp/>of<sp/>the<sp/>Zorba<sp/>data<sp/>lifecycle:<sp/>how<sp/>to<sp/>load<sp/>data<sp/>in<sp/>the<sp/>Zorba<sp/>store,<sp/>how<sp/>to<sp/>query<sp/>and<sp/>update<sp/>it,<sp/>and<sp/>how<sp/>to<sp/>remove<sp/>the<sp/>data<sp/>from<sp/>the<sp/>store.</highlight></codeline>
<codeline lineno="6"><highlight class="comment"></highlight></codeline>
<codeline lineno="7"><highlight class="comment">\image<sp/>html<sp/>data_lifecycle.png</highlight></codeline>
<codeline lineno="8"><highlight class="comment"></highlight></codeline>
<codeline lineno="9"><highlight class="comment">The<sp/>store<sp/>contains<sp/>several<sp/>types<sp/>of<sp/>data<sp/>containers:<sp/>documents,<sp/>collections,<sp/>and<sp/>other<sp/>structures.</highlight></codeline>
<codeline lineno="10"><highlight class="comment">Each<sp/>such<sp/>container<sp/>is<sp/>identified<sp/>by<sp/>a<sp/>name,<sp/>which<sp/>can<sp/>be<sp/>a<sp/>URI<sp/>or<sp/>a<sp/>QName.</highlight></codeline>
<codeline lineno="11"><highlight class="comment">The<sp/>association<sp/>between<sp/>the<sp/>name<sp/>and<sp/>the<sp/>content<sp/>of<sp/>the<sp/>containers<sp/>is<sp/>maintained<sp/>by<sp/>the<sp/>store<sp/>during<sp/>the<sp/>lifetime<sp/>of<sp/>the<sp/>container.</highlight></codeline>
<codeline lineno="12"><highlight class="comment"></highlight></codeline>
<codeline lineno="13"><highlight class="comment">There<sp/>are<sp/>two<sp/>kinds<sp/>of<sp/>containers:<sp/>static<sp/>and<sp/>dynamic.</highlight></codeline>
<codeline lineno="14"><highlight class="comment">Collections<sp/>can<sp/>be<sp/>either<sp/>static<sp/>or<sp/>dynamic.</highlight></codeline>
<codeline lineno="15"><highlight class="comment">Documents,<sp/>maps,<sp/>stacks,<sp/>and<sp/>queues<sp/>can<sp/>only<sp/>be<sp/>dynamic.<sp/></highlight></codeline>
<codeline lineno="16"><highlight class="comment"></highlight></codeline>
<codeline lineno="17"><highlight class="comment">\image<sp/>html<sp/>store_concepts.png</highlight></codeline>
<codeline lineno="18"><highlight class="comment"></highlight></codeline>
<codeline lineno="19"><highlight class="comment">While<sp/>the<sp/>dynamic<sp/>containers<sp/>require<sp/>no<sp/>static<sp/>knowledge<sp/>from<sp/>the<sp/>query<sp/>processor<sp/>(no<sp/>need<sp/>for<sp/>explicit<sp/>knowledge<sp/>about<sp/>their<sp/>existence<sp/>at<sp/>compilation<sp/>time),<sp/>the<sp/>static<sp/>collections<sp/>require<sp/>the<sp/>query<sp/>processor<sp/>to<sp/>be<sp/>aware<sp/>of<sp/>their<sp/>existence,<sp/>and<sp/>take<sp/>this<sp/>information<sp/>into<sp/>consideration<sp/>at<sp/>compilation<sp/>and<sp/>optimization<sp/>time.</highlight></codeline>
<codeline lineno="20"><highlight class="comment">Note<sp/>that<sp/>static<sp/>collections<sp/>can<sp/>have<sp/>indexes<sp/>and<sp/>integrity<sp/>constraints<sp/>defined<sp/>on<sp/>them<sp/>(declared<sp/>using<sp/>the<sp/>\ref<sp/>xqddf),<sp/>while<sp/>the<sp/>dynamic<sp/>structures<sp/>cannot.</highlight></codeline>
<codeline lineno="21"><highlight class="comment">At<sp/>compilation<sp/>time<sp/>the<sp/>query<sp/>processor<sp/>needs<sp/>to<sp/>be<sp/>aware<sp/>of<sp/>the<sp/>indexes,<sp/>integrity<sp/>constraints<sp/>of<sp/>the<sp/>static<sp/>collections<sp/>in<sp/>order<sp/>to<sp/>generate<sp/>correct<sp/><sp/>and<sp/>optimal<sp/>execution<sp/>plans.</highlight></codeline>
<codeline lineno="22"><highlight class="comment"></highlight></codeline>
<codeline lineno="23"><highlight class="comment">Both<sp/>static<sp/>and<sp/>dynamic<sp/>collections<sp/>have<sp/>functions<sp/>that<sp/>allow<sp/>queries<sp/>to<sp/>manipulate<sp/>them.</highlight></codeline>
<codeline lineno="24"><highlight class="comment">Like<sp/>in<sp/>most<sp/>other<sp/>databases,<sp/>the<sp/>functions<sp/>are<sp/>clustered<sp/>into<sp/>Data<sp/>Definition<sp/>Modules<sp/>(DDL;<sp/>e.g.<sp/>creation,<sp/>deletion)<sp/>and<sp/>Data<sp/>Manipulation<sp/>Modules<sp/>(DML;<sp/>e.g.<sp/>query,<sp/>update).</highlight></codeline>
<codeline lineno="25"><highlight class="comment"></highlight></codeline>
<codeline lineno="26"><highlight class="comment">The<sp/>following<sp/>tables<sp/>gives<sp/>the<sp/>complete<sp/>list<sp/>of<sp/>all<sp/>Zorba<sp/>modules<sp/>that<sp/>allow<sp/>the<sp/>manipulation<sp/>of<sp/>static<sp/>and<sp/>dynamic<sp/>containers.</highlight></codeline>
<codeline lineno="27"><highlight class="comment"></highlight></codeline>
<codeline lineno="28"><highlight class="comment">&lt;table&gt;</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td<sp/>colspan=&quot;3&quot;&gt;</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;b&gt;Static<sp/>Containers&lt;/b&gt;</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;/td&gt;</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;b&gt;Container<sp/>Type&lt;/b&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;b&gt;Definition<sp/>(DDL)<sp/>/<sp/>Manipulation<sp/>(DML)&lt;/b&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;b&gt;Module<sp/>Namespace&lt;/b&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Collections&lt;/td&gt;</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL&lt;/td&gt;</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/static/collections/ddl&quot;&gt;http://zorba.io/modules/store/static/collections/ddl&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="43"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="45"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Collections&lt;/td&gt;</highlight></codeline>
<codeline lineno="46"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="47"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/static/collections/dml&quot;&gt;http://zorba.io/modules/store/static/collections/dml&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="48"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="49"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="50"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Indexes&lt;/td&gt;</highlight></codeline>
<codeline lineno="51"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL&lt;/td&gt;</highlight></codeline>
<codeline lineno="52"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/static/indexes/ddl&quot;&gt;http://zorba.io/modules/store/static/indexes/ddl&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="53"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="54"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="55"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Indexes&lt;/td&gt;</highlight></codeline>
<codeline lineno="56"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="57"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/static/indexes/dml&quot;&gt;http://zorba.io/modules/store/static/indexes/dml&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="58"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="59"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="60"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Integrity<sp/>Constraints&lt;/td&gt;</highlight></codeline>
<codeline lineno="61"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL&lt;/td&gt;</highlight></codeline>
<codeline lineno="62"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/static/integrity/constraints/ddl&quot;&gt;http://zorba.io/modules/store/static/integrity_constraints/ddl&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="63"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="64"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="65"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Integrity<sp/>Constraints&lt;/td&gt;</highlight></codeline>
<codeline lineno="66"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="67"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/zorba.io/modules/store/static/integrity/constraints/dml&quot;&gt;http://zorba.io/modules/store/static/integrity_constraints/dml&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="68"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="69"><highlight class="comment">&lt;/table&gt;</highlight></codeline>
<codeline lineno="70"><highlight class="comment"></highlight></codeline>
<codeline lineno="71"><highlight class="comment"></highlight></codeline>
<codeline lineno="72"><highlight class="comment">&lt;table&gt;</highlight></codeline>
<codeline lineno="73"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="74"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td<sp/>colspan=&quot;3&quot;&gt;</highlight></codeline>
<codeline lineno="75"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;b&gt;Dynamic<sp/>Containers&lt;/b&gt;</highlight></codeline>
<codeline lineno="76"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;/td&gt;</highlight></codeline>
<codeline lineno="77"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="78"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="79"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;b&gt;Container<sp/>Type&lt;/b&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="80"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;b&gt;Definition<sp/>(DDL)<sp/>/<sp/>Manipulation<sp/>(DML)&lt;/b&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="81"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;b&gt;Module<sp/>Namespace&lt;/b&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="82"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="83"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="84"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Collections&lt;/td&gt;</highlight></codeline>
<codeline lineno="85"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL&lt;/td&gt;</highlight></codeline>
<codeline lineno="86"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/dynamic/collections/ddl&quot;&gt;http://zorba.io/modules/store/dynamic/collections/ddl&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="87"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="88"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="89"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Collections&lt;/td&gt;</highlight></codeline>
<codeline lineno="90"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="91"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/dynamic/collections/dml&quot;&gt;http://zorba.io/modules/store/dynamic/collections/dml&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="92"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="93"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="94"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;W3C<sp/>Collections&lt;/td&gt;</highlight></codeline>
<codeline lineno="95"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL&lt;/td&gt;</highlight></codeline>
<codeline lineno="96"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/dynamic/collections/w3c/ddl&quot;&gt;http://zorba.io/modules/store/dynamic/collections/w3c/ddl&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="97"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="98"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="99"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;W3C<sp/>Collections&lt;/td&gt;</highlight></codeline>
<codeline lineno="100"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="101"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/dynamic/collections/w3c/dml&quot;&gt;http://zorba.io/modules/store/dynamic/collections/w3c/dml&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="102"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="103"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="104"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Documents&lt;/td&gt;</highlight></codeline>
<codeline lineno="105"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL<sp/>/<sp/>DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="106"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/store/dynamic/documents&quot;&gt;http://zorba.io/modules/store/documents&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="107"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="108"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="109"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Unordered<sp/>Maps&lt;/td&gt;</highlight></codeline>
<codeline lineno="110"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL<sp/>/<sp/>DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="111"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/unordered-maps&quot;&gt;http://zorba.io/modules/unordered-maps&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="112"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="113"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="114"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Stacks&lt;/td&gt;</highlight></codeline>
<codeline lineno="115"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL<sp/>/<sp/>DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="116"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/stack&quot;&gt;http://zorba.io/modules/stack&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="117"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="118"><highlight class="comment"><sp/><sp/>&lt;tr&gt;</highlight></codeline>
<codeline lineno="119"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;Queues&lt;/td&gt;</highlight></codeline>
<codeline lineno="120"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;DDL<sp/>/<sp/>DML&lt;/td&gt;</highlight></codeline>
<codeline lineno="121"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;td&gt;&lt;a<sp/>href=&quot;/modules/latest/zorba.io/modules/queue&quot;&gt;http://zorba.io/modules/queue&lt;/a&gt;&lt;/td&gt;</highlight></codeline>
<codeline lineno="122"><highlight class="comment"><sp/><sp/>&lt;/tr&gt;</highlight></codeline>
<codeline lineno="123"><highlight class="comment">&lt;/table&gt;</highlight></codeline>
<codeline lineno="124"><highlight class="comment"></highlight></codeline>
<codeline lineno="125"><highlight class="comment">Please<sp/>note<sp/>that<sp/>all<sp/>of<sp/>the<sp/>modules<sp/>listed<sp/>above<sp/>require<sp/>JSONiq<sp/>or<sp/>at<sp/>least<sp/>XQuery<sp/>version<sp/>3.0.</highlight></codeline>
<codeline lineno="126"><highlight class="comment"></highlight></codeline>
<codeline lineno="127"><highlight class="comment">Other<sp/>the<sp/>fact<sp/>the<sp/>static<sp/>and<sp/>dynamic<sp/>containers<sp/>are<sp/>treated<sp/>differently<sp/>by<sp/>the<sp/>query<sp/>processor<sp/>during<sp/>compilation,<sp/>their<sp/>lifetime<sp/>is<sp/>exactly<sp/>the<sp/>same.</highlight></codeline>
<codeline lineno="128"><highlight class="comment">Data<sp/>can<sp/>be<sp/>loaded<sp/>in<sp/>any<sp/>container<sp/>--<sp/>static<sp/>or<sp/>dynamic<sp/>--<sp/><sp/>and<sp/>after<sp/>that<sp/>it<sp/>will<sp/>be<sp/>available<sp/>for<sp/>queries<sp/>and<sp/>updates,<sp/>until<sp/>the<sp/>data<sp/>is<sp/>explicitly<sp/>deleted<sp/>from<sp/>the<sp/>store,<sp/>or<sp/>the<sp/>store<sp/>itself<sp/>expires.</highlight></codeline>
<codeline lineno="129"><highlight class="comment">(Note<sp/>that<sp/>not<sp/>all<sp/>the<sp/>Zorba<sp/>Stores<sp/>are<sp/>persistent<sp/>stores).</highlight></codeline>
<codeline lineno="130"><highlight class="comment">Please<sp/>refer<sp/>to<sp/>the<sp/>section<sp/>below<sp/>on<sp/>various<sp/>Zorba<sp/>stores.</highlight></codeline>
<codeline lineno="131"><highlight class="comment"></highlight></codeline>
<codeline lineno="132"><highlight class="comment">Also<sp/>please<sp/>note<sp/>that<sp/>a<sp/>data<sp/>container<sp/>that<sp/>is<sp/>available<sp/>in<sp/>the<sp/>store<sp/>will<sp/>be<sp/>available<sp/>to<sp/>all<sp/>programs<sp/>that<sp/>are<sp/>being<sp/>executed<sp/>synchronously.</highlight></codeline>
<codeline lineno="133"><highlight class="comment">Again,<sp/>please<sp/>read<sp/>more<sp/>about<sp/>the<sp/>Zorba<sp/>Data<sp/>Stores<sp/>below<sp/>about<sp/>data<sp/>consistency<sp/>details.</highlight></codeline>
<codeline lineno="134"><highlight class="comment"></highlight></codeline>
<codeline lineno="135"><highlight class="comment">\section<sp/>dlexamples<sp/>Examples</highlight></codeline>
<codeline lineno="136"><highlight class="comment">In<sp/>the<sp/>following,<sp/>we<sp/>show<sp/>a<sp/>couple<sp/>of<sp/>examples<sp/>to<sp/>demonstrate<sp/>how<sp/>data<sp/>can<sp/>be<sp/>retrieved<sp/>and<sp/>store<sp/>in<sp/>various<sp/>kinds<sp/>of<sp/>containers.</highlight></codeline>
<codeline lineno="137"><highlight class="comment">It<sp/>is<sp/>important<sp/>to<sp/>note<sp/>that<sp/>most<sp/>of<sp/>the<sp/>examples<sp/>uses<sp/>the<sp/>&lt;a<sp/>href=&quot;/pages/latest/zorba/scripting_tutorial&quot;&gt;Scripting<sp/>Extension&lt;/a&gt;<sp/>for<sp/>apply<sp/>pending<sp/>updates<sp/>in<sp/>order<sp/>to<sp/>make<sp/>them<sp/>visible<sp/>to<sp/>subsequent<sp/>expressions<sp/>in<sp/>the<sp/>same<sp/>program.</highlight></codeline>
<codeline lineno="138"><highlight class="comment"></highlight></codeline>
<codeline lineno="139"><highlight class="comment">\subsection<sp/>dl_scenario_1<sp/>Scenario<sp/>1</highlight></codeline>
<codeline lineno="140"><highlight class="comment"></highlight></codeline>
<codeline lineno="141"><highlight class="comment">In<sp/>the<sp/>first<sp/>scenario,<sp/>we<sp/>show<sp/>how<sp/>to<sp/>use<sp/>the<sp/>\ref<sp/>xqddf<sp/>and<sp/>the<sp/>XQuery<sp/>Update<sp/>Facility<sp/>to</highlight></codeline>
<codeline lineno="142"><highlight class="comment">&lt;ul&gt;</highlight></codeline>
<codeline lineno="143"><highlight class="comment"><sp/><sp/>&lt;li&gt;declare<sp/>and<sp/>create<sp/>a<sp/>collection<sp/>with<sp/>an,&lt;/li&gt;</highlight></codeline>
<codeline lineno="144"><highlight class="comment"><sp/><sp/>&lt;li&gt;add<sp/>data<sp/>to<sp/>the<sp/>collection<sp/>that<sp/>is<sp/>retrieved<sp/>from<sp/>the<sp/>web,&lt;/li&gt;</highlight></codeline>
<codeline lineno="145"><highlight class="comment"><sp/><sp/>&lt;li&gt;query<sp/>the<sp/>collection,&lt;/li&gt;</highlight></codeline>
<codeline lineno="146"><highlight class="comment"><sp/><sp/>&lt;li&gt;delete<sp/>and<sp/>modify<sp/>data<sp/>in<sp/>the<sp/>collection,<sp/>and&lt;/li&gt;</highlight></codeline>
<codeline lineno="147"><highlight class="comment"><sp/><sp/>&lt;li&gt;finally<sp/>delete<sp/>the<sp/>entire<sp/>collection<sp/>an<sp/>the<sp/>index&lt;/li&gt;</highlight></codeline>
<codeline lineno="148"><highlight class="comment">&lt;/ul&gt;</highlight></codeline>
<codeline lineno="149"><highlight class="comment"></highlight></codeline>
<codeline lineno="150"><highlight class="comment">\subsection<sp/>dl_sc1_ex1<sp/>Declare<sp/>a<sp/>Collection<sp/>with<sp/>Index</highlight></codeline>
<codeline lineno="151"><highlight class="comment">Declare<sp/>an<sp/>unordered<sp/>collection<sp/>that<sp/>can<sp/>store<sp/>KML<sp/>placemarks<sp/>(see<sp/>&lt;a<sp/>href=&quot;http://code.google.com/apis/kml/documentation/&quot;&gt;http://code.google.com/apis/kml/documentation/&lt;/a&gt;).</highlight></codeline>
<codeline lineno="152"><highlight class="comment">On<sp/>top<sp/>of<sp/>this<sp/>collection,<sp/>we<sp/>declare<sp/>a<sp/>unique<sp/>value<sp/>index<sp/>that<sp/>is<sp/>indexing<sp/>the<sp/>names<sp/>of<sp/>the<sp/>parks.</highlight></codeline>
<codeline lineno="153"><highlight class="comment">Please<sp/>note<sp/>that<sp/>this<sp/>module<sp/>is<sp/>a<sp/>library<sp/>module<sp/>because<sp/>collections<sp/>and<sp/>indexes<sp/>can<sp/>not<sp/>be<sp/>declared<sp/>in<sp/>a<sp/>main<sp/>module.</highlight></codeline>
<codeline lineno="154"><highlight class="comment">All<sp/>of<sp/>the<sp/>following<sp/>examples<sp/>import<sp/>the<sp/>library<sp/>module<sp/>in<sp/>order<sp/>to<sp/>be<sp/>able<sp/>to<sp/>access<sp/>the<sp/>collection.</highlight></codeline>
<codeline lineno="155"><highlight class="comment"></highlight></codeline>
<codeline lineno="156"><highlight class="comment">\include<sp/>zorba/store/sc1_ex1.xqlib</highlight></codeline>
<codeline lineno="157"><highlight class="comment"></highlight></codeline>
<codeline lineno="158"><highlight class="comment">\subsection<sp/>dl_sc1_ex2<sp/>Create<sp/>a<sp/>Collection<sp/>and<sp/>Index</highlight></codeline>
<codeline lineno="159"><highlight class="comment">This<sp/>is<sp/>an<sp/>administration<sp/>program<sp/>that<sp/>imports<sp/>the<sp/>module<sp/>declaring<sp/>the<sp/>collection<sp/>and<sp/>invokes<sp/>the<sp/>&lt;tt&gt;create&lt;/tt&gt;<sp/>and<sp/>&lt;tt&gt;create&lt;/tt&gt;<sp/>functions<sp/>to<sp/>create<sp/>the<sp/>empty<sp/>collection<sp/>and<sp/>index<sp/>containers,<sp/>respectively.</highlight></codeline>
<codeline lineno="160"><highlight class="comment"></highlight></codeline>
<codeline lineno="161"><highlight class="comment">\include<sp/>zorba/store/sc1_ex2.xq</highlight></codeline>
<codeline lineno="162"><highlight class="comment"></highlight></codeline>
<codeline lineno="163"><highlight class="comment">\subsection<sp/>dl_sc1_ex3<sp/>Store<sp/>Data<sp/>in<sp/>a<sp/>Collection</highlight></codeline>
<codeline lineno="164"><highlight class="comment">Once<sp/>the<sp/>collection<sp/>has<sp/>been<sp/>created,<sp/>we<sp/>can<sp/>now<sp/>populate<sp/>it<sp/>with<sp/>some<sp/>placemarks.</highlight></codeline>
<codeline lineno="165"><highlight class="comment">The<sp/>according<sp/>placemarks<sp/>(data<sp/>about<sp/>Wildlife<sp/>National<sp/>Parks<sp/>in<sp/>India)<sp/>is<sp/>retrieved<sp/>from<sp/>the<sp/>web.</highlight></codeline>
<codeline lineno="166"><highlight class="comment">The<sp/>resource<sp/>retrieved<sp/>is<sp/>a<sp/>single<sp/>KML<sp/>document,<sp/>from<sp/>which<sp/>we<sp/>select<sp/>only<sp/>the<sp/>placemarks.</highlight></codeline>
<codeline lineno="167"><highlight class="comment">Before<sp/>inserting<sp/>them<sp/>into<sp/>the<sp/>collection,<sp/>the<sp/>validate<sp/>expression<sp/>makes<sp/>sure<sp/>that<sp/>each<sp/>placemark<sp/>is<sp/>valid<sp/>according<sp/>to<sp/>the<sp/>KML<sp/>schema.</highlight></codeline>
<codeline lineno="168"><highlight class="comment"></highlight></codeline>
<codeline lineno="169"><highlight class="comment">\include<sp/>zorba/store/sc1_ex3.xq</highlight></codeline>
<codeline lineno="170"><highlight class="comment"></highlight></codeline>
<codeline lineno="171"><highlight class="comment">\subsection<sp/>dl_sc1_ex4<sp/>Query<sp/>a<sp/>Collection&apos;s<sp/>Data</highlight></codeline>
<codeline lineno="172"><highlight class="comment">This<sp/>very<sp/>simple<sp/>query<sp/>shows<sp/>how<sp/>to<sp/>invoke<sp/>the<sp/>collection<sp/>function<sp/>of<sp/>the<sp/>dml<sp/>module<sp/>to<sp/>retrieve<sp/>the<sp/>contents<sp/>of<sp/>the<sp/>collection.</highlight></codeline>
<codeline lineno="173"><highlight class="comment">The<sp/>query<sp/>returns<sp/>the<sp/>names<sp/>of<sp/>all<sp/>national<sp/>parks<sp/>in<sp/>India<sp/>that<sp/>have<sp/>elephants.</highlight></codeline>
<codeline lineno="174"><highlight class="comment"></highlight></codeline>
<codeline lineno="175"><highlight class="comment">\include<sp/>zorba/store/sc1_ex4.xq</highlight></codeline>
<codeline lineno="176"><highlight class="comment"></highlight></codeline>
<codeline lineno="177"><highlight class="comment">\subsection<sp/>dl_sc1_ex5<sp/>Delete<sp/>Nodes<sp/>from<sp/>a<sp/>Collection</highlight></codeline>
<codeline lineno="178"><highlight class="comment">To<sp/>do<sp/>cleanup<sp/>of<sp/>the<sp/>data<sp/>in<sp/>the<sp/>collection,<sp/>the<sp/>following<sp/>snippet<sp/>deletes<sp/>all<sp/>national<sp/>parks<sp/>from<sp/>the<sp/>database<sp/>that<sp/>do<sp/>not<sp/>have<sp/>Elephants.</highlight></codeline>
<codeline lineno="179"><highlight class="comment"></highlight></codeline>
<codeline lineno="180"><highlight class="comment">\include<sp/>zorba/store/sc1_ex5.xq</highlight></codeline>
<codeline lineno="181"><highlight class="comment"></highlight></codeline>
<codeline lineno="182"><highlight class="comment">\subsection<sp/>dl_sc1_ex6<sp/>Updates<sp/>Nodes<sp/>in<sp/>a<sp/>Collection</highlight></codeline>
<codeline lineno="183"><highlight class="comment">In<sp/>order<sp/>modify<sp/>a<sp/>particular<sp/>node<sp/>in<sp/>a<sp/>collection,<sp/>the<sp/>XQuery<sp/>Update<sp/>Facility<sp/>can<sp/>be<sp/>used.</highlight></codeline>
<codeline lineno="184"><highlight class="comment">In<sp/>the<sp/>example<sp/>below,<sp/>we<sp/>set<sp/>the<sp/>visibility<sp/>of<sp/>all<sp/>national<sp/>parks<sp/>that<sp/>contain<sp/>wild<sp/>pigs<sp/>to<sp/>false<sp/>because<sp/>we<sp/>don&apos;t<sp/>want<sp/>them<sp/>to<sp/>show<sp/>up<sp/>in<sp/>a<sp/>map.</highlight></codeline>
<codeline lineno="185"><highlight class="comment">Please<sp/>note<sp/>that<sp/>we<sp/>need<sp/>to<sp/>insert<sp/>the<sp/>&lt;tt&gt;visibility&lt;/tt&gt;<sp/>element<sp/>after<sp/>the<sp/>name<sp/>element<sp/>because<sp/>otherwise<sp/>the<sp/>revalidation<sp/>of<sp/>the<sp/>node<sp/>in<sp/>the<sp/>collection<sp/>would<sp/>fail.</highlight></codeline>
<codeline lineno="186"><highlight class="comment"></highlight></codeline>
<codeline lineno="187"><highlight class="comment">\include<sp/>zorba/store/sc1_ex6.xq</highlight></codeline>
<codeline lineno="188"><highlight class="comment"></highlight></codeline>
<codeline lineno="189"><highlight class="comment">\subsection<sp/>dl_sc1_ex7<sp/>Delete<sp/>a<sp/>Collection</highlight></codeline>
<codeline lineno="190"><highlight class="comment"></highlight></codeline>
<codeline lineno="191"><highlight class="comment">Finally,<sp/>the<sp/>last<sp/>examples<sp/>shows<sp/>how<sp/>the<sp/>collection<sp/>and<sp/>index<sp/>containers<sp/>can<sp/>be<sp/>deleted<sp/>from<sp/>the<sp/>store.</highlight></codeline>
<codeline lineno="192"><highlight class="comment">All<sp/>the<sp/>nodes<sp/>stored<sp/>in<sp/>the<sp/>collection<sp/>are<sp/>also<sp/>deleted.</highlight></codeline>
<codeline lineno="193"><highlight class="comment">Please<sp/>note<sp/>that<sp/>the<sp/>index<sp/>has<sp/>to<sp/>be<sp/>deleted<sp/>before<sp/>the<sp/>according<sp/>collection.</highlight></codeline>
<codeline lineno="194"><highlight class="comment"></highlight></codeline>
<codeline lineno="195"><highlight class="comment">\include<sp/>zorba/store/sc1_ex7.xq</highlight></codeline>
<codeline lineno="196"><highlight class="comment"></highlight></codeline>
<codeline lineno="197"><highlight class="comment">\subsection<sp/>dl_scenario_2<sp/>Scenario<sp/>2</highlight></codeline>
<codeline lineno="198"><highlight class="comment"></highlight></codeline>
<codeline lineno="199"><highlight class="comment">The<sp/>examples<sp/>in<sp/>this<sp/>subsection<sp/>show<sp/>how<sp/>to</highlight></codeline>
<codeline lineno="200"><highlight class="comment">&lt;ul&gt;</highlight></codeline>
<codeline lineno="201"><highlight class="comment"><sp/><sp/>&lt;li&gt;create<sp/>a<sp/>dynamic<sp/>collection,&lt;/li&gt;</highlight></codeline>
<codeline lineno="202"><highlight class="comment"><sp/><sp/>&lt;li&gt;retrieve<sp/>data<sp/>form<sp/>the<sp/>web<sp/>and<sp/>load<sp/>in<sp/>a<sp/>collection,&lt;/li&gt;</highlight></codeline>
<codeline lineno="203"><highlight class="comment"><sp/><sp/>&lt;li&gt;query<sp/>and<sp/>update<sp/>data,<sp/>and&lt;/li&gt;</highlight></codeline>
<codeline lineno="204"><highlight class="comment"><sp/><sp/>&lt;li&gt;delete<sp/>the<sp/>collection.&lt;/li&gt;</highlight></codeline>
<codeline lineno="205"><highlight class="comment">&lt;/ul&gt;</highlight></codeline>
<codeline lineno="206"><highlight class="comment"></highlight></codeline>
<codeline lineno="207"><highlight class="comment">\subsection<sp/>dl_sc2_ex1<sp/>Creating<sp/>a<sp/>Dynamic<sp/>Collection</highlight></codeline>
<codeline lineno="208"><highlight class="comment"></highlight></codeline>
<codeline lineno="209"><highlight class="comment">Analogous<sp/>to<sp/>the<sp/>creation<sp/>of<sp/>a<sp/>collection<sp/>in<sp/>\ref<sp/>dl_sc1_ex2,<sp/>the<sp/>following<sp/>examples<sp/>demonstrates<sp/>how<sp/>a<sp/>dynamic<sp/>collection<sp/>can<sp/>be<sp/>created.</highlight></codeline>
<codeline lineno="210"><highlight class="comment">The<sp/>collection<sp/>is<sp/>called<sp/>&quot;earthquakes&quot;<sp/>and<sp/>will<sp/>be<sp/>used<sp/>to<sp/>contain<sp/>data<sp/>of<sp/>the<sp/>worldwide<sp/>earthquakes<sp/>from<sp/>July,<sp/>29th<sp/>2011<sp/>to<sp/>August,<sp/>5th<sp/>2011<sp/>(retrieved<sp/>from<sp/>&lt;a<sp/>href=&quot;http://explore.data.gov/Geography-and-Environment/Worldwide-M1-Earthquakes-Past-7-Days/7tag-iwnu&quot;&gt;data.gov&lt;/a&gt;).</highlight></codeline>
<codeline lineno="211"><highlight class="comment"></highlight></codeline>
<codeline lineno="212"><highlight class="comment">\include<sp/>zorba/store/sc2_ex1.xq</highlight></codeline>
<codeline lineno="213"><highlight class="comment"></highlight></codeline>
<codeline lineno="214"><highlight class="comment">\subsection<sp/>dl_sc2_ex2<sp/>Retrieve<sp/>Data<sp/>and<sp/>Store<sp/>in<sp/>Collection</highlight></codeline>
<codeline lineno="215"><highlight class="comment"></highlight></codeline>
<codeline lineno="216"><highlight class="comment">This<sp/>examples<sp/>fetches<sp/>the<sp/>data<sp/>as<sp/>CSV<sp/>from<sp/>the<sp/>web,<sp/>converts<sp/>it<sp/>to<sp/>XML,<sp/>and<sp/>inserts<sp/>it<sp/>into<sp/>the<sp/>earthquake<sp/>collection.</highlight></codeline>
<codeline lineno="217"><highlight class="comment">The<sp/>conversion<sp/>is<sp/>done<sp/>using<sp/>&lt;a<sp/>href=&quot;/modules/latest/www.zorba-xquery.com/modules/converters/csv&quot;&gt;Zorba&apos;s<sp/>CSV<sp/>converter<sp/>module&lt;/a&gt;.</highlight></codeline>
<codeline lineno="218"><highlight class="comment"></highlight></codeline>
<codeline lineno="219"><highlight class="comment">\include<sp/>zorba/store/sc2_ex2.xq</highlight></codeline>
<codeline lineno="220"><highlight class="comment"></highlight></codeline>
<codeline lineno="221"><highlight class="comment"></highlight></codeline>
<codeline lineno="222"><highlight class="comment">\subsection<sp/>dl_sc2_ex3<sp/>Query<sp/>a<sp/>Collection</highlight></codeline>
<codeline lineno="223"><highlight class="comment"></highlight></codeline>
<codeline lineno="224"><highlight class="comment">Given<sp/>all<sp/>the<sp/>information<sp/>of<sp/>earthquakes<sp/>in<sp/>the<sp/>collection,<sp/>the<sp/>following<sp/>example<sp/>shows<sp/>how<sp/>to<sp/>query<sp/>that<sp/>data.</highlight></codeline>
<codeline lineno="225"><highlight class="comment">The<sp/>query<sp/>selects<sp/>all<sp/>the<sp/>earthquakes<sp/>having<sp/>a<sp/>magnitude<sp/>of<sp/>three<sp/>or<sp/>higher<sp/>whose<sp/>region<sp/>contains<sp/>the<sp/>string<sp/>&quot;California&quot;.</highlight></codeline>
<codeline lineno="226"><highlight class="comment"></highlight></codeline>
<codeline lineno="227"><highlight class="comment">\include<sp/>zorba/store/sc2_ex3.xq</highlight></codeline>
<codeline lineno="228"><highlight class="comment"></highlight></codeline>
<codeline lineno="229"><highlight class="comment"></highlight></codeline>
<codeline lineno="230"><highlight class="comment">\section<sp/>dl_sc3<sp/>Scenario<sp/>3</highlight></codeline>
<codeline lineno="231"><highlight class="comment"></highlight></codeline>
<codeline lineno="232"><highlight class="comment">Previous<sp/>examples<sp/>have<sp/>show<sp/>how<sp/>to<sp/>work<sp/>with<sp/>static<sp/>and<sp/>dynamic<sp/>collections.</highlight></codeline>
<codeline lineno="233"><highlight class="comment">The<sp/>next<sp/>set<sp/>of<sp/>examples<sp/>will<sp/>focus<sp/>on<sp/>documents.</highlight></codeline>
<codeline lineno="234"><highlight class="comment">As<sp/>a<sp/>data<sp/>set,<sp/>we<sp/>use<sp/>the<sp/>meat,<sp/>poultry,<sp/>and<sp/>egg<sp/>inspection<sp/>directory<sp/>from<sp/>&lt;a<sp/>href=&quot;http://explore.data.gov/Agriculture/Meat-Poultry-and-Egg-Inspection-Directory-by-Estab/ffj8-dww2&quot;&gt;data.gov&lt;/a&gt;.</highlight></codeline>
<codeline lineno="235"><highlight class="comment">The<sp/>data<sp/>is<sp/>available<sp/>as<sp/>a<sp/>CSV<sp/>file<sp/>in<sp/>our<sp/>file<sp/>system.</highlight></codeline>
<codeline lineno="236"><highlight class="comment"></highlight></codeline>
<codeline lineno="237"><highlight class="comment">\subsection<sp/>dl_sc3_ex1<sp/>Put<sp/>a<sp/>Document</highlight></codeline>
<codeline lineno="238"><highlight class="comment">In<sp/>this<sp/>example,<sp/>we<sp/>read<sp/>a<sp/>file<sp/>from<sp/>the<sp/>file<sp/>system<sp/>whose<sp/>name<sp/>is<sp/>available<sp/>in<sp/>the<sp/>external<sp/>variable<sp/>named<sp/>input-context.</highlight></codeline>
<codeline lineno="239"><highlight class="comment">The<sp/>CSV<sp/>contents<sp/>of<sp/>the<sp/>file<sp/>is<sp/>parsed<sp/>and<sp/>converted<sp/>into<sp/>XML<sp/>using<sp/>the<sp/>&lt;a<sp/>href=&quot;/modules/latest/www.zorba-xquery.com/modules/converters/csv&quot;&gt;CSV<sp/>module&lt;/a&gt;.</highlight></codeline>
<codeline lineno="240"><highlight class="comment">The<sp/>resulting<sp/>document<sp/>is<sp/>put<sp/>into<sp/>the<sp/>store<sp/>and<sp/>given<sp/>the<sp/>name<sp/>&quot;meat_poultry.xml&quot;.</highlight></codeline>
<codeline lineno="241"><highlight class="comment"></highlight></codeline>
<codeline lineno="242"><highlight class="comment">\include<sp/>zorba/store/sc3_ex1.xq</highlight></codeline>
<codeline lineno="243"><highlight class="comment"></highlight></codeline>
<codeline lineno="244"><highlight class="comment">\subsection<sp/>dl_sc3_ex2<sp/>Retrieving<sp/>and<sp/>Modifying<sp/>a<sp/>Document</highlight></codeline>
<codeline lineno="245"><highlight class="comment">The<sp/>XML<sp/>format<sp/>of<sp/>the<sp/>resulting<sp/>document<sp/>(from<sp/>the<sp/>CSV<sp/>conversion<sp/>in<sp/>the<sp/>previous<sp/>example)<sp/>is<sp/>not<sp/>really<sp/>nice.</highlight></codeline>
<codeline lineno="246"><highlight class="comment">For<sp/>example,<sp/>a<sp/>sketch<sp/>of<sp/>the<sp/>document<sp/>is<sp/>as<sp/>follows:</highlight></codeline>
<codeline lineno="247"><highlight class="comment"></highlight></codeline>
<codeline lineno="248"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="249"><highlight class="comment">&lt;root&gt;</highlight></codeline>
<codeline lineno="250"><highlight class="comment"><sp/><sp/>&lt;row&gt;</highlight></codeline>
<codeline lineno="251"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;EstNumber&lt;/column&gt;</highlight></codeline>
<codeline lineno="252"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Company&lt;/column&gt;</highlight></codeline>
<codeline lineno="253"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Street&lt;/column&gt;</highlight></codeline>
<codeline lineno="254"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;City&lt;/column&gt;</highlight></codeline>
<codeline lineno="255"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;State&lt;/column&gt;</highlight></codeline>
<codeline lineno="256"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Zip&lt;/column&gt;</highlight></codeline>
<codeline lineno="257"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Phone&lt;/column&gt;</highlight></codeline>
<codeline lineno="258"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;GrantDate&lt;/column&gt;</highlight></codeline>
<codeline lineno="259"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Activities&lt;/column&gt;</highlight></codeline>
<codeline lineno="260"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;DBAs&lt;/column&gt;</highlight></codeline>
<codeline lineno="261"><highlight class="comment"><sp/><sp/>&lt;/row&gt;</highlight></codeline>
<codeline lineno="262"><highlight class="comment"><sp/><sp/>&lt;row&gt;</highlight></codeline>
<codeline lineno="263"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;M1-P1370&lt;/column&gt;</highlight></codeline>
<codeline lineno="264"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Vienna<sp/>Beef<sp/>Ltd.&lt;/column&gt;</highlight></codeline>
<codeline lineno="265"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;2501<sp/>N.<sp/>Damen<sp/>Ave.&lt;/column&gt;</highlight></codeline>
<codeline lineno="266"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Chicago&lt;/column&gt;</highlight></codeline>
<codeline lineno="267"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;IL&lt;/column&gt;</highlight></codeline>
<codeline lineno="268"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;60647&lt;/column&gt;</highlight></codeline>
<codeline lineno="269"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;(773)<sp/>278-7800&lt;/column&gt;</highlight></codeline>
<codeline lineno="270"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column/&gt;</highlight></codeline>
<codeline lineno="271"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Processing&lt;/column&gt;</highlight></codeline>
<codeline lineno="272"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;column&gt;Bistro<sp/>Soups,David<sp/>Berg,International<sp/>Deli<sp/>Brokerage,Kosher<sp/>Zion<sp/>Sausage<sp/>Co,Vienna<sp/>Beef<sp/>LTD,Vienna<sp/>Sausage<sp/>Manufacturing&lt;/column&gt;</highlight></codeline>
<codeline lineno="273"><highlight class="comment"><sp/><sp/>&lt;/row&gt;</highlight></codeline>
<codeline lineno="274"><highlight class="comment">&lt;/root&gt;</highlight></codeline>
<codeline lineno="275"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="276"><highlight class="comment"></highlight></codeline>
<codeline lineno="277"><highlight class="comment">The<sp/>columns<sp/>in<sp/>the<sp/>first<sp/>row<sp/>element<sp/>define<sp/>the<sp/>names<sp/>of<sp/>the<sp/>columns<sp/>in<sp/>the<sp/>subsequent<sp/>row<sp/>elements.</highlight></codeline>
<codeline lineno="278"><highlight class="comment">The<sp/>following<sp/>query<sp/>uses<sp/>an<sp/>XQuery<sp/>Update<sp/>expression<sp/>to<sp/>rename<sp/>the<sp/>columns.</highlight></codeline>
<codeline lineno="279"><highlight class="comment"></highlight></codeline>
<codeline lineno="280"><highlight class="comment">\include<sp/>zorba/store/sc3_ex2.xq</highlight></codeline>
<codeline lineno="281"><highlight class="comment"></highlight></codeline>
<codeline lineno="282"><highlight class="comment">Please<sp/>note<sp/>that<sp/>the<sp/>&lt;tt&gt;first-row-is-header&lt;/tt&gt;<sp/>option<sp/>of<sp/>the<sp/>&lt;tt&gt;csv:parse&lt;/tt&gt;<sp/>function<sp/>would<sp/>have<sp/>done<sp/>the<sp/>job<sp/>also<sp/>but<sp/>we<sp/>though<sp/>it<sp/>was<sp/>more<sp/>fun<sp/>to<sp/>present<sp/>this<sp/>query.<sp/>;-)</highlight></codeline>
<codeline lineno="283"><highlight class="comment"></highlight></codeline>
<codeline lineno="284"><highlight class="comment">\subsection<sp/>dl_sc3_ex3<sp/>Serializing<sp/>a<sp/>Document<sp/>to<sp/>JSON</highlight></codeline>
<codeline lineno="285"><highlight class="comment"></highlight></codeline>
<codeline lineno="286"><highlight class="comment">In<sp/>this<sp/>last<sp/>example,<sp/>we<sp/>show<sp/>how<sp/>the<sp/>document<sp/>resulting<sp/>from<sp/>the<sp/>previous<sp/>example<sp/>can<sp/>be<sp/>serialized<sp/>to<sp/>JSON<sp/>using<sp/>&lt;a<sp/>href=&quot;/modules/latest/www.zorba-xquery.com/modules/converters/json&quot;&gt;Zorba&apos;s<sp/>JSON<sp/>module&lt;/a&gt;.</highlight></codeline>
<codeline lineno="287"><highlight class="comment"></highlight></codeline>
<codeline lineno="288"><highlight class="comment">\include<sp/>zorba/store/sc3_ex3.xq</highlight></codeline>
<codeline lineno="289"><highlight class="comment"></highlight></codeline>
<codeline lineno="290"><highlight class="comment">Note:<sp/>data<sp/>can<sp/>be<sp/>loaded<sp/>in<sp/>the<sp/>Zorba<sp/>store<sp/>either<sp/>via<sp/>API<sp/>calls<sp/>(see<sp/>the<sp/>C++<sp/>API<sp/>and<sp/>the<sp/>other<sp/>APIs,<sp/>link)<sp/>or<sp/>directly<sp/>via<sp/>function<sp/>calls.</highlight></codeline>
<codeline lineno="291"><highlight class="comment">Both<sp/>ways<sp/>are<sp/>being<sp/>executed<sp/>internally<sp/>in<sp/>exactly<sp/>the<sp/>same<sp/>way<sp/>--<sp/>in<sp/>fact<sp/>all<sp/>such<sp/>C++<sp/>API<sp/>functions<sp/>are<sp/>100%<sp/>mirrored<sp/>by<sp/>functions.</highlight></codeline>
<codeline lineno="292"><highlight class="comment">We<sp/>strongly<sp/>encourage<sp/>users<sp/>to<sp/>use<sp/>the<sp/>modules<sp/>for<sp/>data<sp/>manipulation<sp/>instead<sp/>of<sp/>the<sp/>C++<sp/>API.</highlight></codeline>
<codeline lineno="293"><highlight class="comment">The<sp/>reason<sp/>is<sp/>simple:<sp/>the<sp/>processor<sp/>can<sp/>understand<sp/>the<sp/>data<sp/>flow<sp/>and<sp/>data<sp/>lifecycle<sp/>in<sp/>the<sp/>first<sp/>case,<sp/>while<sp/>it<sp/>cannot<sp/>in<sp/>the<sp/>second.</highlight></codeline>
<codeline lineno="294"><highlight class="comment"></highlight></codeline>
<codeline lineno="295"><highlight class="comment"></highlight></codeline>
<codeline lineno="296"><highlight class="comment">\section<sp/>dlzorbastore<sp/><sp/>Zorba<sp/>Stores</highlight></codeline>
<codeline lineno="297"><highlight class="comment"></highlight></codeline>
<codeline lineno="298"><highlight class="comment">Zorba<sp/>defines<sp/>a<sp/>Store<sp/>API<sp/>that<sp/>allows<sp/>developers<sp/>to<sp/>seamlessly<sp/>process<sp/>data<sp/>stored<sp/>in<sp/>different<sp/>places.</highlight></codeline>
<codeline lineno="299"><highlight class="comment">Essentially,<sp/>the<sp/>Store<sp/>API<sp/>is<sp/>a<sp/>C++<sp/>interface<sp/>for</highlight></codeline>
<codeline lineno="300"><highlight class="comment">&lt;ul&gt;</highlight></codeline>
<codeline lineno="301"><highlight class="comment"><sp/><sp/>&lt;li&gt;&lt;a<sp/>href=&quot;http://www.w3.org/TR/xpath-datamodel/&quot;&gt;XQuery<sp/>and<sp/>XPath<sp/>Data<sp/>Model<sp/>(XDM)&lt;/a&gt;,&lt;/li&gt;</highlight></codeline>
<codeline lineno="302"><highlight class="comment"><sp/><sp/>&lt;li&gt;&lt;a<sp/>href=&quot;http://jsoniq.org/docs/JSONiq/html-single/index.html#chapter-data-model&quot;&gt;JSONiq<sp/>Data<sp/>Model<sp/>(JDM)&lt;/a&gt;,&lt;/li&gt;</highlight></codeline>
<codeline lineno="303"><highlight class="comment"><sp/><sp/>&lt;li&gt;PULs<sp/>defined<sp/>by<sp/>the<sp/>&lt;a<sp/>href=&quot;http://www.w3.org/TR/xquery-update-10/&quot;&gt;XQuery<sp/>Update<sp/>Facility&lt;/a&gt;,&lt;/li&gt;</highlight></codeline>
<codeline lineno="304"><highlight class="comment"><sp/><sp/>&lt;li&gt;PULs<sp/>defined<sp/>by<sp/>the<sp/>\ref<sp/>xqddf,<sp/>and&lt;/li&gt;</highlight></codeline>
<codeline lineno="305"><highlight class="comment"><sp/><sp/>&lt;li&gt;an<sp/>XDM<sp/>extension<sp/>for<sp/>&lt;a<sp/>href=&quot;http://www.w3.org/TR/xpath-full-text-10/&quot;&gt;XQuery<sp/>Full<sp/>Text&lt;/a&gt;.&lt;/li&gt;</highlight></codeline>
<codeline lineno="306"><highlight class="comment">&lt;/ul&gt;</highlight></codeline>
<codeline lineno="307"><highlight class="comment"></highlight></codeline>
<codeline lineno="308"><highlight class="comment">Implementing<sp/>this<sp/>API<sp/>allows,<sp/>for<sp/>example,<sp/>processing<sp/>of<sp/>data<sp/>stored<sp/>in<sp/>main<sp/>memory,<sp/>on<sp/>mobile<sp/>devices,<sp/>in<sp/>browsers,<sp/>or<sp/>disk-<sp/>and<sp/>cloud-based<sp/>environments.</highlight></codeline>
<codeline lineno="309"><highlight class="comment"></highlight></codeline>
<codeline lineno="310"><highlight class="comment">It<sp/>is<sp/>important<sp/>to<sp/>understand<sp/>that<sp/>each<sp/>store<sp/>implementation<sp/>may<sp/>define<sp/>its<sp/>own<sp/>semantics<sp/>regarding<sp/>persistence<sp/>and<sp/>transactional<sp/>semantics.</highlight></codeline>
<codeline lineno="311"><highlight class="comment">For<sp/>example,<sp/>a<sp/>mobile<sp/>device<sp/>store<sp/>can<sp/>safely<sp/>assume<sp/>that<sp/>only<sp/>a<sp/>single<sp/>request<sp/>at<sp/>a<sp/>time<sp/>is<sp/>processed<sp/>whereas<sp/>a<sp/>store<sp/>backed<sp/>by<sp/>a<sp/>relational<sp/>database<sp/>might<sp/>provide<sp/>full-fledged<sp/>ACID<sp/>behavior.</highlight></codeline>
<codeline lineno="312"><highlight class="comment">Analogously,<sp/>a<sp/>main<sp/>memory<sp/>store<sp/>does<sp/>not<sp/>provide<sp/>persistence<sp/>of<sp/>data<sp/>across<sp/>process<sp/>boundaries.</highlight></codeline>
<codeline lineno="313"><highlight class="comment"></highlight></codeline>
<codeline lineno="314"><highlight class="comment">The<sp/>Zorba<sp/>source<sp/>distribution<sp/>as<sp/>well<sp/>as<sp/>the<sp/>packages<sp/>provided<sp/>by<sp/>&lt;a<sp/>href=&quot;http://www.zorba.io/&quot;&gt;http://www.zorba.io/&lt;/a&gt;<sp/>come<sp/>with<sp/>a<sp/>main<sp/>memory<sp/>based<sp/>store.</highlight></codeline>
<codeline lineno="315"><highlight class="comment">The<sp/>lifecycle<sp/>of<sp/>the<sp/>data<sp/>in<sp/>this<sp/>store<sp/>is<sp/>bounded<sp/>by<sp/>the<sp/>lifetime<sp/>of<sp/>the<sp/>process<sp/>in<sp/>which<sp/>it<sp/>is<sp/>running.</highlight></codeline>
<codeline lineno="316"><highlight class="comment">For<sp/>example,<sp/>a<sp/>document<sp/>added<sp/>to<sp/>the<sp/>store<sp/>can<sp/>be<sp/>accessed<sp/>by<sp/>programs<sp/>in<sp/>the<sp/>same<sp/>process.</highlight></codeline>
<codeline lineno="317"><highlight class="comment">As<sp/>soon<sp/>as<sp/>the<sp/>process<sp/>terminates<sp/>(or<sp/>even<sp/>earlier<sp/>if<sp/>Zorba<sp/>is<sp/>shutdown<sp/>before<sp/>the<sp/>process<sp/>terminates),<sp/>the<sp/>default<sp/>in-memory<sp/>store<sp/>will<sp/>destroy<sp/>the<sp/>XML<sp/>data<sp/>it<sp/>contains.</highlight></codeline>
<codeline lineno="318"><highlight class="comment">Changes<sp/>to<sp/>this<sp/>data<sp/>are<sp/>not<sp/>propagated<sp/>automatically<sp/>to<sp/>any<sp/>persistence<sp/>storage.</highlight></codeline>
<codeline lineno="319"><highlight class="comment"></highlight></codeline>
<codeline lineno="320"><highlight class="comment">However,<sp/>propagating<sp/>the<sp/>data<sp/>from<sp/>the<sp/>in-memory<sp/>store<sp/>to<sp/>a<sp/>persistent<sp/>storage<sp/>can<sp/>be<sp/>achieved<sp/>manually<sp/>using<sp/>the<sp/>&lt;a<sp/>href=&quot;http://www.w3.org/TR/xpath-functions-30/#func-serialize&quot;&gt;XML<sp/>serializer&lt;/a&gt;<sp/>and<sp/>the<sp/>&lt;a<sp/>href=&quot;/modules/latest/expath.org/ns/file&quot;&gt;file<sp/>module&lt;/a&gt;.</highlight></codeline>
<codeline lineno="321"><highlight class="comment">For<sp/>example:</highlight></codeline>
<codeline lineno="322"><highlight class="comment"></highlight></codeline>
<codeline lineno="323"><highlight class="comment">\include<sp/>zorba/file/file_read_serialize.xq</highlight></codeline>
<codeline lineno="324"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/home/wcandillon/deadlinks/doc/zorba/data_lifecycle.dox"/>
  </compounddef>
</doxygen>
