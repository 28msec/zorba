<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.7.6.1">
  <compounddef id="schema__lifecycle_8dox" kind="file">
    <compoundname>schema_lifecycle.dox</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/**<sp/>\page<sp/>schema_lifecycle<sp/>Schema<sp/>Lifecycle</highlight></codeline>
<codeline lineno="2"><highlight class="comment"></highlight></codeline>
<codeline lineno="3"><highlight class="comment">\section<sp/>intro<sp/>Introduction</highlight></codeline>
<codeline lineno="4"><highlight class="comment">This<sp/>page<sp/>is<sp/>a<sp/>quick<sp/>presentation<sp/>on<sp/>how<sp/>to<sp/>use<sp/>Zorba<sp/>with<sp/>XMLSchema<sp/>type<sp/></highlight></codeline>
<codeline lineno="5"><highlight class="comment">information.</highlight></codeline>
<codeline lineno="6"><highlight class="comment"></highlight></codeline>
<codeline lineno="7"><highlight class="comment">\section<sp/>slsoverview<sp/>Overview</highlight></codeline>
<codeline lineno="8"><highlight class="comment">Zorba<sp/>supports<sp/>&lt;a<sp/>href=&quot;http://www.w3.org/TR/xmlschema11-1/&quot;&gt;W3C<sp/>XML<sp/>Schema<sp/></highlight></codeline>
<codeline lineno="9"><highlight class="comment">(XSD)<sp/>1.1&lt;/a&gt;<sp/>including<sp/>dateTimeStamp,<sp/>+/-0,<sp/>+/-INF.<sp/>But<sp/>due<sp/>to<sp/>the<sp/>missing<sp/>support<sp/></highlight></codeline>
<codeline lineno="10"><highlight class="comment">from<sp/>Xerces-C<sp/>validation<sp/>is<sp/>still<sp/>using<sp/>only<sp/>XSD<sp/>1.0,<sp/>which<sp/>is<sp/>compatible<sp/>with<sp/></highlight></codeline>
<codeline lineno="11"><highlight class="comment">XSD<sp/>1.1<sp/>for<sp/>the<sp/>vast<sp/>majority<sp/>of<sp/>the<sp/>features<sp/>with<sp/>a<sp/>few<sp/>exceptions.<sp/>Check<sp/>out</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>&lt;a<sp/>href=&quot;http://www.w3.org/TR/xmlschema11-1/#changes&quot;&gt;the<sp/>full<sp/>list&lt;/a&gt;.</highlight></codeline>
<codeline lineno="13"><highlight class="comment"></highlight></codeline>
<codeline lineno="14"><highlight class="comment"></highlight></codeline>
<codeline lineno="15"><highlight class="comment">\section<sp/>immport<sp/>How<sp/>to<sp/>import<sp/>a<sp/>schema</highlight></codeline>
<codeline lineno="16"><highlight class="comment">In<sp/>order<sp/>to<sp/>use<sp/>XMLSchema<sp/>type<sp/>information<sp/>in<sp/>a<sp/>query<sp/>a<sp/>schema<sp/>file<sp/>needs<sp/>to<sp/>be<sp/>imported.</highlight></codeline>
<codeline lineno="17"><highlight class="comment">Note<sp/>the<sp/>URI<sp/>must<sp/>match<sp/>the<sp/>target<sp/>namespace<sp/>of<sp/>schema<sp/>file.</highlight></codeline>
<codeline lineno="18"><highlight class="comment"></highlight></codeline>
<codeline lineno="19"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="20"><highlight class="comment">import<sp/>schema<sp/>namespace<sp/>r<sp/>=<sp/>&quot;http://example&quot;<sp/>at<sp/>&quot;example.xsd&quot;;</highlight></codeline>
<codeline lineno="21"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="22"><highlight class="comment"></highlight></codeline>
<codeline lineno="23"><highlight class="comment">For<sp/>a<sp/>full<sp/>example<sp/>see<sp/>the<sp/>\ref<sp/>example1<sp/>below.</highlight></codeline>
<codeline lineno="24"><highlight class="comment"></highlight></codeline>
<codeline lineno="25"><highlight class="comment">Note:<sp/>for<sp/>simplicity,<sp/>the<sp/>examples<sp/>on<sp/>this<sp/>page<sp/>make<sp/>use<sp/>of<sp/>the<sp/>&quot;at<sp/>&lt;filename&gt;&quot;<sp/></highlight></codeline>
<codeline lineno="26"><highlight class="comment">clause<sp/>of<sp/>&lt;tt&gt;import<sp/>schema&lt;/tt&gt;<sp/>to<sp/>explicitly<sp/>load<sp/>a<sp/>specific<sp/>schema<sp/>file.</highlight></codeline>
<codeline lineno="27"><highlight class="comment">However,<sp/>when<sp/>developing<sp/>applications,<sp/>it<sp/>is<sp/>usually<sp/>better<sp/>to<sp/>omit<sp/>this</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>clause,<sp/>and<sp/>make<sp/>use<sp/>of<sp/>Zorba&apos;s<sp/>extensive<sp/>URI-resolution<sp/>mechanisms<sp/>to<sp/>load</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>schema<sp/>documents<sp/>by<sp/>URI.<sp/>For<sp/>details<sp/>on<sp/>this,<sp/>see<sp/>\ref<sp/>uriresolvers.</highlight></codeline>
<codeline lineno="30"><highlight class="comment"></highlight></codeline>
<codeline lineno="31"><highlight class="comment">\section<sp/>validateExpr<sp/>Validate<sp/>expression</highlight></codeline>
<codeline lineno="32"><highlight class="comment">Use<sp/>validate<sp/>expression<sp/>to<sp/>validate<sp/>an<sp/>untyped<sp/>document<sp/>against<sp/>an<sp/>XMLSchema.</highlight></codeline>
<codeline lineno="33"><highlight class="comment"></highlight></codeline>
<codeline lineno="34"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="35"><highlight class="comment">validate<sp/>{$untypeDoc}</highlight></codeline>
<codeline lineno="36"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="37"><highlight class="comment"></highlight></codeline>
<codeline lineno="38"><highlight class="comment">For<sp/>a<sp/>full<sp/>example<sp/>see<sp/>the<sp/>\ref<sp/>example1<sp/>below.</highlight></codeline>
<codeline lineno="39"><highlight class="comment"></highlight></codeline>
<codeline lineno="40"><highlight class="comment">\section<sp/>example1<sp/>Example<sp/>1</highlight></codeline>
<codeline lineno="41"><highlight class="comment"></highlight></codeline>
<codeline lineno="42"><highlight class="comment">The<sp/>script<sp/>&lt;tt&gt;example.xq&lt;/tt&gt;:</highlight></codeline>
<codeline lineno="43"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="44"><highlight class="comment">import<sp/>schema<sp/>namespace<sp/>r<sp/>=<sp/>&quot;http://example&quot;<sp/>at<sp/>&quot;example.xsd&quot;;</highlight></codeline>
<codeline lineno="45"><highlight class="comment"></highlight></codeline>
<codeline lineno="46"><highlight class="comment">import<sp/>module<sp/>namespace<sp/>file<sp/>=<sp/>&quot;http://expath.org/ns/file&quot;;</highlight></codeline>
<codeline lineno="47"><highlight class="comment"></highlight></codeline>
<codeline lineno="48"><highlight class="comment">let<sp/>$untypeDoc<sp/>:=<sp/>fn:parse-xml(file:read-text(&quot;example.xml&quot;))</highlight></codeline>
<codeline lineno="49"><highlight class="comment">let<sp/>$validatedDoc<sp/>:=<sp/>validate<sp/>{$untypeDoc}</highlight></codeline>
<codeline lineno="50"><highlight class="comment">return</highlight></codeline>
<codeline lineno="51"><highlight class="comment"><sp/><sp/>$validatedDoc</highlight></codeline>
<codeline lineno="52"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="53"><highlight class="comment"></highlight></codeline>
<codeline lineno="54"><highlight class="comment">Assuming<sp/>there<sp/>is<sp/>an<sp/>&lt;tt&gt;example.xsd&lt;/tt&gt;<sp/>file<sp/>with<sp/>this<sp/>content:</highlight></codeline>
<codeline lineno="55"><highlight class="comment"></highlight></codeline>
<codeline lineno="56"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="57"><highlight class="comment">&lt;xs:schema<sp/>xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;<sp/></highlight></codeline>
<codeline lineno="58"><highlight class="comment"><sp/><sp/>targetNamespace=&quot;http://example&quot;<sp/></highlight></codeline>
<codeline lineno="59"><highlight class="comment"><sp/><sp/>xmlns=&quot;http://example&quot;</highlight></codeline>
<codeline lineno="60"><highlight class="comment"><sp/><sp/>elementFormDefault=&quot;qualified&quot;<sp/>attributeFormDefault=&quot;unqualified&quot;&gt;</highlight></codeline>
<codeline lineno="61"><highlight class="comment"></highlight></codeline>
<codeline lineno="62"><highlight class="comment"><sp/><sp/>&lt;xs:element<sp/>name=&quot;a&quot;<sp/>type=&quot;TypeA&quot;/&gt;</highlight></codeline>
<codeline lineno="63"><highlight class="comment"></highlight></codeline>
<codeline lineno="64"><highlight class="comment"><sp/><sp/>&lt;xs:complexType<sp/>name=&quot;TypeA&quot;&gt;</highlight></codeline>
<codeline lineno="65"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;xs:sequence&gt;</highlight></codeline>
<codeline lineno="66"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>&lt;xs:element<sp/>name=&quot;b&quot;<sp/>maxOccurs=&quot;unbounded&quot;<sp/>type=&quot;xs:string&quot;/&gt;</highlight></codeline>
<codeline lineno="67"><highlight class="comment"><sp/><sp/><sp/><sp/>&lt;/xs:sequence&gt;</highlight></codeline>
<codeline lineno="68"><highlight class="comment"><sp/><sp/>&lt;/xs:complexType&gt;</highlight></codeline>
<codeline lineno="69"><highlight class="comment"></highlight></codeline>
<codeline lineno="70"><highlight class="comment">&lt;/xs:schema&gt;</highlight></codeline>
<codeline lineno="71"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="72"><highlight class="comment"></highlight></codeline>
<codeline lineno="73"><highlight class="comment">And<sp/>this<sp/>&lt;tt&gt;example.xml&lt;/tt&gt;<sp/>instance<sp/>XML<sp/>document:</highlight></codeline>
<codeline lineno="74"><highlight class="comment"></highlight></codeline>
<codeline lineno="75"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="76"><highlight class="comment">&lt;a<sp/>xmlns=&quot;http://example&quot;&gt;</highlight></codeline>
<codeline lineno="77"><highlight class="comment"><sp/><sp/>&lt;b&gt;Hello<sp/>world!&lt;/b&gt;</highlight></codeline>
<codeline lineno="78"><highlight class="comment">&lt;/a&gt;</highlight></codeline>
<codeline lineno="79"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="80"><highlight class="comment"></highlight></codeline>
<codeline lineno="81"><highlight class="comment">Zorba<sp/>can<sp/>execute<sp/>the<sp/>query<sp/>to<sp/>get<sp/>the<sp/>result:</highlight></codeline>
<codeline lineno="82"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="83"><highlight class="comment">$<sp/>zorba<sp/>--trailing-nl<sp/>-i<sp/>-f<sp/>-q<sp/>example.xq<sp/></highlight></codeline>
<codeline lineno="84"><highlight class="comment">&lt;?xml<sp/>version=&quot;1.0&quot;<sp/>encoding=&quot;UTF-8&quot;?&gt;</highlight></codeline>
<codeline lineno="85"><highlight class="comment">&lt;a<sp/>xmlns=&quot;http://example&quot;&gt;</highlight></codeline>
<codeline lineno="86"><highlight class="comment"><sp/><sp/>&lt;b&gt;Hello<sp/>world!&lt;/b&gt;</highlight></codeline>
<codeline lineno="87"><highlight class="comment">&lt;/a&gt;</highlight></codeline>
<codeline lineno="88"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="89"><highlight class="comment"></highlight></codeline>
<codeline lineno="90"><highlight class="comment">\section<sp/>schema-type<sp/>Schema<sp/>type<sp/>name</highlight></codeline>
<codeline lineno="91"><highlight class="comment"></highlight></codeline>
<codeline lineno="92"><highlight class="comment">Using<sp/>the<sp/>&lt;a<sp/>href=&quot;/modules/latest/www.zorba-xquery.com/modules/schema&quot;&gt;schema<sp/>module&lt;/a&gt;</highlight></codeline>
<codeline lineno="93"><highlight class="comment">it<sp/>is<sp/>possible<sp/>to<sp/>find<sp/>out<sp/>the<sp/>QName<sp/>of<sp/>a<sp/>certain<sp/>schema<sp/>type.</highlight></codeline>
<codeline lineno="94"><highlight class="comment"></highlight></codeline>
<codeline lineno="95"><highlight class="comment"></highlight></codeline>
<codeline lineno="96"><highlight class="comment">\ref<sp/>example1<sp/>can<sp/>be<sp/>adapted<sp/>to<sp/>the<sp/>following:</highlight></codeline>
<codeline lineno="97"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="98"><highlight class="comment">import<sp/>schema<sp/>namespace<sp/>r<sp/>=<sp/>&quot;http://example&quot;<sp/>at<sp/>&quot;example.xsd&quot;;</highlight></codeline>
<codeline lineno="99"><highlight class="comment"></highlight></codeline>
<codeline lineno="100"><highlight class="comment">import<sp/>module<sp/>namespace<sp/>file<sp/>=<sp/>&quot;http://expath.org/ns/file&quot;;</highlight></codeline>
<codeline lineno="101"><highlight class="comment">import<sp/>module<sp/>namespace<sp/>schema<sp/>=<sp/>&quot;http://zorba.io/modules/schema&quot;;</highlight></codeline>
<codeline lineno="102"><highlight class="comment"></highlight></codeline>
<codeline lineno="103"><highlight class="comment"></highlight></codeline>
<codeline lineno="104"><highlight class="comment">let<sp/>$untypeDoc<sp/>:=<sp/>fn:parse-xml(file:read-text(&quot;example.xml&quot;))</highlight></codeline>
<codeline lineno="105"><highlight class="comment">let<sp/>$validatedDoc<sp/>:=<sp/>validate<sp/>{$untypeDoc}</highlight></codeline>
<codeline lineno="106"><highlight class="comment">return</highlight></codeline>
<codeline lineno="107"><highlight class="comment"><sp/><sp/>let<sp/>$qname<sp/>:=<sp/>schema:schema-type($validatedDoc/r:a)</highlight></codeline>
<codeline lineno="108"><highlight class="comment"><sp/><sp/>return</highlight></codeline>
<codeline lineno="109"><highlight class="comment"><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="110"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>fn:prefix-from-QName($qname),</highlight></codeline>
<codeline lineno="111"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>fn:local-name-from-QName($qname),</highlight></codeline>
<codeline lineno="112"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>fn:namespace-uri-from-QName($qname)</highlight></codeline>
<codeline lineno="113"><highlight class="comment"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="114"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="115"><highlight class="comment"></highlight></codeline>
<codeline lineno="116"><highlight class="comment">Output:</highlight></codeline>
<codeline lineno="117"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="118"><highlight class="comment">$<sp/>zorba<sp/>--trailing-nl<sp/>-i<sp/>-f<sp/>-q<sp/>example.xq<sp/></highlight></codeline>
<codeline lineno="119"><highlight class="comment">&lt;?xml<sp/>version=&quot;1.0&quot;<sp/>encoding=&quot;UTF-8&quot;?&gt;</highlight></codeline>
<codeline lineno="120"><highlight class="comment">TypeA<sp/>http://example</highlight></codeline>
<codeline lineno="121"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="122"><highlight class="comment"></highlight></codeline>
<codeline lineno="123"><highlight class="comment"></highlight></codeline>
<codeline lineno="124"><highlight class="comment">\section<sp/>validateApi<sp/>Validate<sp/>using<sp/>the<sp/>C++<sp/>Zorba<sp/>API</highlight></codeline>
<codeline lineno="125"><highlight class="comment">The<sp/>C++<sp/>Zorba<sp/>API<sp/>can<sp/>be<sp/>used<sp/>by<sp/>an<sp/>application<sp/>to<sp/>validate<sp/>a<sp/>document<sp/>and<sp/></highlight></codeline>
<codeline lineno="126"><highlight class="comment">later<sp/>passed<sp/>as<sp/>a<sp/>valid<sp/>input<sp/>into<sp/>another<sp/>query.</highlight></codeline>
<codeline lineno="127"><highlight class="comment"></highlight></codeline>
<codeline lineno="128"><highlight class="comment">In<sp/>the<sp/>\ref<sp/>example2<sp/>first<sp/>loadProlog<sp/>method<sp/>on<sp/>the<sp/>static<sp/>context<sp/>was<sp/>used<sp/>to<sp/>import<sp/>the<sp/>required</highlight></codeline>
<codeline lineno="129"><highlight class="comment"><sp/>schema<sp/>file<sp/>and<sp/>than<sp/>validate<sp/>method<sp/>was<sp/>called<sp/>to<sp/>get<sp/>the<sp/>new<sp/>validated<sp/>item.</highlight></codeline>
<codeline lineno="130"><highlight class="comment"></highlight></codeline>
<codeline lineno="131"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="132"><highlight class="comment"><sp/><sp/>sc-&gt;loadProlog(&quot;import<sp/>schema<sp/>namespace<sp/>s=&apos;http://test.org&apos;<sp/>at<sp/>&apos;schema.xsd&apos;;&quot;,<sp/>hints);</highlight></codeline>
<codeline lineno="133"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="134"><highlight class="comment"></highlight></codeline>
<codeline lineno="135"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="136"><highlight class="comment"><sp/><sp/>sc-&gt;validate(lChild,<sp/>vItem);</highlight></codeline>
<codeline lineno="137"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="138"><highlight class="comment"></highlight></codeline>
<codeline lineno="139"><highlight class="comment"></highlight></codeline>
<codeline lineno="140"><highlight class="comment">\section<sp/>example2<sp/>Example<sp/>2</highlight></codeline>
<codeline lineno="141"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="142"><highlight class="comment">#include<sp/>&lt;iostream&gt;</highlight></codeline>
<codeline lineno="143"><highlight class="comment">#include<sp/>&lt;sstream&gt;</highlight></codeline>
<codeline lineno="144"><highlight class="comment"></highlight></codeline>
<codeline lineno="145"><highlight class="comment">#include<sp/>&lt;zorba/zorba.h&gt;</highlight></codeline>
<codeline lineno="146"><highlight class="comment">#include<sp/>&lt;zorba/store_manager.h&gt;</highlight></codeline>
<codeline lineno="147"><highlight class="comment">#include<sp/>&lt;zorba/serializer.h&gt;</highlight></codeline>
<codeline lineno="148"><highlight class="comment">#include<sp/>&lt;zorba/singleton_item_sequence.h&gt;</highlight></codeline>
<codeline lineno="149"><highlight class="comment">#include<sp/>&lt;zorba/zorba_exception.h&gt;</highlight></codeline>
<codeline lineno="150"><highlight class="comment"></highlight></codeline>
<codeline lineno="151"><highlight class="comment">using<sp/>namespace<sp/>zorba;</highlight></codeline>
<codeline lineno="152"><highlight class="comment"></highlight></codeline>
<codeline lineno="153"><highlight class="comment">void<sp/>printItem(Item&amp;<sp/>lChild,<sp/>String<sp/>pre);</highlight></codeline>
<codeline lineno="154"><highlight class="comment">void<sp/>printIter(Iterator_t<sp/>lIter,<sp/>String<sp/>pre);</highlight></codeline>
<codeline lineno="155"><highlight class="comment"></highlight></codeline>
<codeline lineno="156"><highlight class="comment"></highlight></codeline>
<codeline lineno="157"><highlight class="comment">void<sp/>printIter(Iterator_t<sp/>lIter,<sp/>String<sp/>pre)</highlight></codeline>
<codeline lineno="158"><highlight class="comment">{</highlight></codeline>
<codeline lineno="159"><highlight class="comment"><sp/><sp/>lIter-&gt;open();</highlight></codeline>
<codeline lineno="160"><highlight class="comment"><sp/><sp/>Item<sp/>lChild;</highlight></codeline>
<codeline lineno="161"><highlight class="comment"><sp/><sp/>while<sp/>(lIter-&gt;next(lChild))</highlight></codeline>
<codeline lineno="162"><highlight class="comment"><sp/><sp/>{</highlight></codeline>
<codeline lineno="163"><highlight class="comment"><sp/><sp/><sp/><sp/>printItem(lChild,<sp/>pre);</highlight></codeline>
<codeline lineno="164"><highlight class="comment"><sp/><sp/>}</highlight></codeline>
<codeline lineno="165"><highlight class="comment"><sp/><sp/>lIter-&gt;close();</highlight></codeline>
<codeline lineno="166"><highlight class="comment">}</highlight></codeline>
<codeline lineno="167"><highlight class="comment"></highlight></codeline>
<codeline lineno="168"><highlight class="comment"></highlight></codeline>
<codeline lineno="169"><highlight class="comment">void<sp/>printItem(Item&amp;<sp/>lChild,<sp/>String<sp/>pre)</highlight></codeline>
<codeline lineno="170"><highlight class="comment">{</highlight></codeline>
<codeline lineno="171"><highlight class="comment"><sp/><sp/>Item<sp/>lNodeName;</highlight></codeline>
<codeline lineno="172"><highlight class="comment"><sp/><sp/>lChild.getNodeName(lNodeName);</highlight></codeline>
<codeline lineno="173"><highlight class="comment"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>pre<sp/>&lt;&lt;<sp/>&quot;node<sp/>&quot;<sp/>&lt;&lt;<sp/>lNodeName.getStringValue()<sp/>&lt;&lt;</highlight></codeline>
<codeline lineno="174"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>&quot;<sp/><sp/><sp/>-type<sp/>&quot;<sp/>&lt;&lt;<sp/>lChild.getType().getStringValue()<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline lineno="175"><highlight class="comment"><sp/><sp/>Iterator_t<sp/>lAttrIter<sp/>=<sp/>lChild.getAttributes();</highlight></codeline>
<codeline lineno="176"><highlight class="comment"></highlight></codeline>
<codeline lineno="177"><highlight class="comment"><sp/><sp/>lAttrIter-&gt;open();</highlight></codeline>
<codeline lineno="178"><highlight class="comment"></highlight></codeline>
<codeline lineno="179"><highlight class="comment"><sp/><sp/>Item<sp/>lAttr;</highlight></codeline>
<codeline lineno="180"><highlight class="comment"><sp/><sp/>while<sp/>(lAttrIter-&gt;next(lAttr))</highlight></codeline>
<codeline lineno="181"><highlight class="comment"><sp/><sp/>{</highlight></codeline>
<codeline lineno="182"><highlight class="comment"><sp/><sp/><sp/><sp/>Item<sp/>lNodeName;</highlight></codeline>
<codeline lineno="183"><highlight class="comment"><sp/><sp/><sp/><sp/>lAttr.getNodeName(lNodeName);</highlight></codeline>
<codeline lineno="184"><highlight class="comment"><sp/><sp/><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>pre<sp/>&lt;&lt;<sp/>&quot;<sp/><sp/>@&quot;<sp/>&lt;&lt;<sp/>lNodeName.getStringValue()<sp/>&lt;&lt;<sp/>&quot;=&quot;<sp/>&lt;&lt;<sp/>lAttr.getStringValue()<sp/>&lt;&lt;</highlight></codeline>
<codeline lineno="185"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;<sp/><sp/><sp/>-type<sp/>&quot;<sp/>&lt;&lt;<sp/>lAttr.getType().getStringValue()<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline lineno="186"><highlight class="comment"><sp/><sp/>}</highlight></codeline>
<codeline lineno="187"><highlight class="comment"><sp/><sp/>lAttrIter-&gt;close();</highlight></codeline>
<codeline lineno="188"><highlight class="comment"></highlight></codeline>
<codeline lineno="189"><highlight class="comment"><sp/><sp/>Iterator_t<sp/>lChildIter<sp/>=<sp/>lChild.getChildren();</highlight></codeline>
<codeline lineno="190"><highlight class="comment"><sp/><sp/>printIter(lChildIter,<sp/>pre<sp/>+<sp/>&quot;<sp/><sp/>&quot;);</highlight></codeline>
<codeline lineno="191"><highlight class="comment">}</highlight></codeline>
<codeline lineno="192"><highlight class="comment"></highlight></codeline>
<codeline lineno="193"><highlight class="comment"></highlight></codeline>
<codeline lineno="194"><highlight class="comment">bool<sp/>example_12(Zorba*<sp/>aZorba)</highlight></codeline>
<codeline lineno="195"><highlight class="comment">{</highlight></codeline>
<codeline lineno="196"><highlight class="comment"><sp/><sp/>//<sp/>without<sp/>validation</highlight></codeline>
<codeline lineno="197"><highlight class="comment"><sp/><sp/>String<sp/>query<sp/>=<sp/>&quot;&lt;a<sp/>xmlns=&apos;http://test.org&apos;&gt;&lt;b<sp/>attr=&apos;1&apos;/&gt;&lt;b<sp/>attr=&apos;2&apos;/&gt;&lt;/a&gt;&quot;;</highlight></codeline>
<codeline lineno="198"><highlight class="comment"><sp/><sp/>XQuery_t<sp/>lQuery1<sp/>=<sp/>aZorba-&gt;compileQuery(query);</highlight></codeline>
<codeline lineno="199"><highlight class="comment"></highlight></codeline>
<codeline lineno="200"><highlight class="comment"><sp/><sp/>Iterator_t<sp/>lIterator1<sp/>=<sp/>lQuery1-&gt;iterator();</highlight></codeline>
<codeline lineno="201"><highlight class="comment"><sp/><sp/>printIter(lIterator1,<sp/>&quot;<sp/><sp/>&quot;);</highlight></codeline>
<codeline lineno="202"><highlight class="comment"></highlight></codeline>
<codeline lineno="203"><highlight class="comment"></highlight></codeline>
<codeline lineno="204"><highlight class="comment"><sp/><sp/>//with<sp/>validation</highlight></codeline>
<codeline lineno="205"><highlight class="comment"><sp/><sp/>XQuery_t<sp/>lQuery2<sp/>=<sp/>aZorba-&gt;compileQuery(query);</highlight></codeline>
<codeline lineno="206"><highlight class="comment"><sp/><sp/>Iterator_t<sp/>lIterator2<sp/>=<sp/>lQuery2-&gt;iterator();</highlight></codeline>
<codeline lineno="207"><highlight class="comment"></highlight></codeline>
<codeline lineno="208"><highlight class="comment"><sp/><sp/>lIterator2-&gt;open();</highlight></codeline>
<codeline lineno="209"><highlight class="comment"><sp/><sp/>Item<sp/>lChild;</highlight></codeline>
<codeline lineno="210"><highlight class="comment"><sp/><sp/>lIterator2-&gt;next(lChild);</highlight></codeline>
<codeline lineno="211"><highlight class="comment"></highlight></codeline>
<codeline lineno="212"><highlight class="comment"><sp/><sp/>StaticContext_t<sp/>sc<sp/>=<sp/>aZorba<sp/>-&gt;<sp/>createStaticContext();</highlight></codeline>
<codeline lineno="213"><highlight class="comment"><sp/><sp/>const<sp/>Zorba_CompilerHints_t<sp/>hints;</highlight></codeline>
<codeline lineno="214"><highlight class="comment"><sp/><sp/>sc-&gt;loadProlog(&quot;import<sp/>schema<sp/>namespace<sp/>s=&apos;http://test.org&apos;<sp/>at<sp/>&apos;schema.xsd&apos;;&quot;,<sp/>hints);</highlight></codeline>
<codeline lineno="215"><highlight class="comment"></highlight></codeline>
<codeline lineno="216"><highlight class="comment"><sp/><sp/>Item<sp/>vItem;</highlight></codeline>
<codeline lineno="217"><highlight class="comment"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;Validate:<sp/>&quot;<sp/>&lt;&lt;std::endl;<sp/>std::cout.flush();</highlight></codeline>
<codeline lineno="218"><highlight class="comment"><sp/><sp/>bool<sp/>vres<sp/>=<sp/>sc-&gt;validate(lChild,<sp/>vItem);</highlight></codeline>
<codeline lineno="219"><highlight class="comment"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;<sp/><sp/>res<sp/><sp/>:<sp/>&quot;<sp/>&lt;&lt;<sp/>(vres<sp/>?<sp/>&quot;true&quot;<sp/>:<sp/>&quot;false&quot;)<sp/>&lt;&lt;<sp/>std::endl;<sp/>std::cout.flush();</highlight></codeline>
<codeline lineno="220"><highlight class="comment"></highlight></codeline>
<codeline lineno="221"><highlight class="comment"></highlight></codeline>
<codeline lineno="222"><highlight class="comment"><sp/><sp/>printItem(vItem,<sp/>&quot;<sp/><sp/>&quot;);</highlight></codeline>
<codeline lineno="223"><highlight class="comment"><sp/><sp/>lIterator2-&gt;close();</highlight></codeline>
<codeline lineno="224"><highlight class="comment"></highlight></codeline>
<codeline lineno="225"><highlight class="comment"><sp/><sp/>return<sp/>true;</highlight></codeline>
<codeline lineno="226"><highlight class="comment">}</highlight></codeline>
<codeline lineno="227"><highlight class="comment"></highlight></codeline>
<codeline lineno="228"><highlight class="comment">int<sp/>main(int<sp/>argc,<sp/>char<sp/>**argv)</highlight></codeline>
<codeline lineno="229"><highlight class="comment">{</highlight></codeline>
<codeline lineno="230"><highlight class="comment"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;Start&quot;<sp/>&lt;&lt;<sp/>std::endl;<sp/>std::cout.flush();</highlight></codeline>
<codeline lineno="231"><highlight class="comment"></highlight></codeline>
<codeline lineno="232"><highlight class="comment"><sp/><sp/>void*<sp/>lStore<sp/>=<sp/>StoreManager::getStore();</highlight></codeline>
<codeline lineno="233"><highlight class="comment"><sp/><sp/>Zorba<sp/>*lZorba<sp/>=<sp/>Zorba::getInstance(lStore);</highlight></codeline>
<codeline lineno="234"><highlight class="comment"></highlight></codeline>
<codeline lineno="235"><highlight class="comment"><sp/><sp/>bool<sp/>res<sp/>=<sp/>false;</highlight></codeline>
<codeline lineno="236"><highlight class="comment"></highlight></codeline>
<codeline lineno="237"><highlight class="comment"></highlight></codeline>
<codeline lineno="238"><highlight class="comment"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;executing<sp/>example<sp/>12&quot;<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline lineno="239"><highlight class="comment"><sp/><sp/>res<sp/>=<sp/>example_12(lZorba);</highlight></codeline>
<codeline lineno="240"><highlight class="comment"><sp/><sp/>if<sp/>(!res)<sp/>return<sp/>1;</highlight></codeline>
<codeline lineno="241"><highlight class="comment"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline lineno="242"><highlight class="comment"></highlight></codeline>
<codeline lineno="243"><highlight class="comment"></highlight></codeline>
<codeline lineno="244"><highlight class="comment"><sp/><sp/>lZorba-&gt;shutdown();</highlight></codeline>
<codeline lineno="245"><highlight class="comment"><sp/><sp/>StoreManager::shutdownStore(lStore);</highlight></codeline>
<codeline lineno="246"><highlight class="comment"></highlight></codeline>
<codeline lineno="247"><highlight class="comment"><sp/><sp/>std::cout<sp/>&lt;&lt;<sp/>&quot;Done!&quot;<sp/>&lt;&lt;<sp/>std::endl;<sp/>std::cout.flush();</highlight></codeline>
<codeline lineno="248"><highlight class="comment"><sp/><sp/>return<sp/>0;</highlight></codeline>
<codeline lineno="249"><highlight class="comment">}</highlight></codeline>
<codeline lineno="250"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="251"><highlight class="comment"></highlight></codeline>
<codeline lineno="252"><highlight class="comment">Output:</highlight></codeline>
<codeline lineno="253"><highlight class="comment">\code</highlight></codeline>
<codeline lineno="254"><highlight class="comment">Start</highlight></codeline>
<codeline lineno="255"><highlight class="comment">executing<sp/>example<sp/>12</highlight></codeline>
<codeline lineno="256"><highlight class="comment"><sp/><sp/>node<sp/>a<sp/><sp/><sp/>-type<sp/>xs:anyType</highlight></codeline>
<codeline lineno="257"><highlight class="comment"><sp/><sp/><sp/><sp/>node<sp/>b<sp/><sp/><sp/>-type<sp/>xs:anyType</highlight></codeline>
<codeline lineno="258"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>@attr=1<sp/><sp/><sp/>-type<sp/>xs:untypedAtomic</highlight></codeline>
<codeline lineno="259"><highlight class="comment"><sp/><sp/><sp/><sp/>node<sp/>b<sp/><sp/><sp/>-type<sp/>xs:anyType</highlight></codeline>
<codeline lineno="260"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>@attr=2<sp/><sp/><sp/>-type<sp/>xs:untypedAtomic</highlight></codeline>
<codeline lineno="261"><highlight class="comment">Validate:</highlight></codeline>
<codeline lineno="262"><highlight class="comment"><sp/><sp/>res<sp/><sp/>:<sp/>true</highlight></codeline>
<codeline lineno="263"><highlight class="comment"><sp/><sp/>node<sp/>a<sp/><sp/><sp/>-type<sp/>__AnonC2</highlight></codeline>
<codeline lineno="264"><highlight class="comment"><sp/><sp/><sp/><sp/>node<sp/>b<sp/><sp/><sp/>-type<sp/>__AnonC3</highlight></codeline>
<codeline lineno="265"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>@attr=1<sp/><sp/><sp/>-type<sp/>xs:int</highlight></codeline>
<codeline lineno="266"><highlight class="comment"><sp/><sp/><sp/><sp/>node<sp/>b<sp/><sp/><sp/>-type<sp/>__AnonC3</highlight></codeline>
<codeline lineno="267"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>@attr=2<sp/><sp/><sp/>-type<sp/>xs:int</highlight></codeline>
<codeline lineno="268"><highlight class="comment">\endcode</highlight></codeline>
<codeline lineno="269"><highlight class="comment"></highlight></codeline>
<codeline lineno="270"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/home/wcandillon/deadlinks/doc/zorba/schema_lifecycle.dox"/>
  </compounddef>
</doxygen>
